(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function BS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var up={exports:{}},Ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function yw(){if(xv)return Ol;xv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:u,ref:o!==void 0?o:null,props:l}}return Ol.Fragment=e,Ol.jsx=t,Ol.jsxs=t,Ol}var Mv;function _w(){return Mv||(Mv=1,up.exports=yw()),up.exports}var N=_w(),cp={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function vw(){if(Dv)return we;Dv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function b(q){return q===null||typeof q!="object"?null:(q=S&&q[S]||q["@@iterator"],typeof q=="function"?q:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,G={};function ee(q,ie,fe){this.props=q,this.context=ie,this.refs=G,this.updater=fe||F}ee.prototype.isReactComponent={},ee.prototype.setState=function(q,ie){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ie,"setState")},ee.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function X(){}X.prototype=ee.prototype;function Z(q,ie,fe){this.props=q,this.context=ie,this.refs=G,this.updater=fe||F}var ae=Z.prototype=new X;ae.constructor=Z,B(ae,ee.prototype),ae.isPureReactComponent=!0;var ce=Array.isArray;function oe(){}var x={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function M(q,ie,fe){var pe=fe.ref;return{$$typeof:n,type:q,key:ie,ref:pe!==void 0?pe:null,props:fe}}function U(q,ie){return M(q.type,ie,q.props)}function k(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function L(q){var ie={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(fe){return ie[fe]})}var P=/\/+/g;function Pe(q,ie){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):ie.toString(36)}function tt(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(oe,oe):(q.status="pending",q.then(function(ie){q.status==="pending"&&(q.status="fulfilled",q.value=ie)},function(ie){q.status==="pending"&&(q.status="rejected",q.reason=ie)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function W(q,ie,fe,pe,Ce){var xe=typeof q;(xe==="undefined"||xe==="boolean")&&(q=null);var Ge=!1;if(q===null)Ge=!0;else switch(xe){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(q.$$typeof){case n:case e:Ge=!0;break;case v:return Ge=q._init,W(Ge(q._payload),ie,fe,pe,Ce)}}if(Ge)return Ce=Ce(q),Ge=pe===""?"."+Pe(q,0):pe,ce(Ce)?(fe="",Ge!=null&&(fe=Ge.replace(P,"$&/")+"/"),W(Ce,ie,fe,"",function(_r){return _r})):Ce!=null&&(k(Ce)&&(Ce=U(Ce,fe+(Ce.key==null||q&&q.key===Ce.key?"":(""+Ce.key).replace(P,"$&/")+"/")+Ge)),ie.push(Ce)),1;Ge=0;var Vt=pe===""?".":pe+":";if(ce(q))for(var dt=0;dt<q.length;dt++)pe=q[dt],xe=Vt+Pe(pe,dt),Ge+=W(pe,ie,fe,xe,Ce);else if(dt=b(q),typeof dt=="function")for(q=dt.call(q),dt=0;!(pe=q.next()).done;)pe=pe.value,xe=Vt+Pe(pe,dt++),Ge+=W(pe,ie,fe,xe,Ce);else if(xe==="object"){if(typeof q.then=="function")return W(tt(q),ie,fe,pe,Ce);throw ie=String(q),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function le(q,ie,fe){if(q==null)return q;var pe=[],Ce=0;return W(q,pe,"","",function(xe){return ie.call(fe,xe,Ce++)}),pe}function _e(q){if(q._status===-1){var ie=q._result;ie=ie(),ie.then(function(fe){(q._status===0||q._status===-1)&&(q._status=1,q._result=fe)},function(fe){(q._status===0||q._status===-1)&&(q._status=2,q._result=fe)}),q._status===-1&&(q._status=0,q._result=ie)}if(q._status===1)return q._result.default;throw q._result}var De=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Xe={map:le,forEach:function(q,ie,fe){le(q,function(){ie.apply(this,arguments)},fe)},count:function(q){var ie=0;return le(q,function(){ie++}),ie},toArray:function(q){return le(q,function(ie){return ie})||[]},only:function(q){if(!k(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return we.Activity=T,we.Children=Xe,we.Component=ee,we.Fragment=t,we.Profiler=o,we.PureComponent=Z,we.StrictMode=s,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,we.__COMPILER_RUNTIME={__proto__:null,c:function(q){return x.H.useMemoCache(q)}},we.cache=function(q){return function(){return q.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(q,ie,fe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var pe=B({},q.props),Ce=q.key;if(ie!=null)for(xe in ie.key!==void 0&&(Ce=""+ie.key),ie)!D.call(ie,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ie.ref===void 0||(pe[xe]=ie[xe]);var xe=arguments.length-2;if(xe===1)pe.children=fe;else if(1<xe){for(var Ge=Array(xe),Vt=0;Vt<xe;Vt++)Ge[Vt]=arguments[Vt+2];pe.children=Ge}return M(q.type,Ce,pe)},we.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},we.createElement=function(q,ie,fe){var pe,Ce={},xe=null;if(ie!=null)for(pe in ie.key!==void 0&&(xe=""+ie.key),ie)D.call(ie,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ce[pe]=ie[pe]);var Ge=arguments.length-2;if(Ge===1)Ce.children=fe;else if(1<Ge){for(var Vt=Array(Ge),dt=0;dt<Ge;dt++)Vt[dt]=arguments[dt+2];Ce.children=Vt}if(q&&q.defaultProps)for(pe in Ge=q.defaultProps,Ge)Ce[pe]===void 0&&(Ce[pe]=Ge[pe]);return M(q,xe,Ce)},we.createRef=function(){return{current:null}},we.forwardRef=function(q){return{$$typeof:d,render:q}},we.isValidElement=k,we.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:_e}},we.memo=function(q,ie){return{$$typeof:m,type:q,compare:ie===void 0?null:ie}},we.startTransition=function(q){var ie=x.T,fe={};x.T=fe;try{var pe=q(),Ce=x.S;Ce!==null&&Ce(fe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(oe,De)}catch(xe){De(xe)}finally{ie!==null&&fe.types!==null&&(ie.types=fe.types),x.T=ie}},we.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},we.use=function(q){return x.H.use(q)},we.useActionState=function(q,ie,fe){return x.H.useActionState(q,ie,fe)},we.useCallback=function(q,ie){return x.H.useCallback(q,ie)},we.useContext=function(q){return x.H.useContext(q)},we.useDebugValue=function(){},we.useDeferredValue=function(q,ie){return x.H.useDeferredValue(q,ie)},we.useEffect=function(q,ie){return x.H.useEffect(q,ie)},we.useEffectEvent=function(q){return x.H.useEffectEvent(q)},we.useId=function(){return x.H.useId()},we.useImperativeHandle=function(q,ie,fe){return x.H.useImperativeHandle(q,ie,fe)},we.useInsertionEffect=function(q,ie){return x.H.useInsertionEffect(q,ie)},we.useLayoutEffect=function(q,ie){return x.H.useLayoutEffect(q,ie)},we.useMemo=function(q,ie){return x.H.useMemo(q,ie)},we.useOptimistic=function(q,ie){return x.H.useOptimistic(q,ie)},we.useReducer=function(q,ie,fe){return x.H.useReducer(q,ie,fe)},we.useRef=function(q){return x.H.useRef(q)},we.useState=function(q){return x.H.useState(q)},we.useSyncExternalStore=function(q,ie,fe){return x.H.useSyncExternalStore(q,ie,fe)},we.useTransition=function(){return x.H.useTransition()},we.version="19.2.0",we}var Pv;function fm(){return Pv||(Pv=1,cp.exports=vw()),cp.exports}var ke=fm();const Tw=BS(ke);var fp={exports:{}},ql={},dp={exports:{}},hp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function Ew(){return kv||(kv=1,(function(n){function e(W,le){var _e=W.length;W.push(le);e:for(;0<_e;){var De=_e-1>>>1,Xe=W[De];if(0<o(Xe,le))W[De]=le,W[_e]=Xe,_e=De;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var le=W[0],_e=W.pop();if(_e!==le){W[0]=_e;e:for(var De=0,Xe=W.length,q=Xe>>>1;De<q;){var ie=2*(De+1)-1,fe=W[ie],pe=ie+1,Ce=W[pe];if(0>o(fe,_e))pe<Xe&&0>o(Ce,fe)?(W[De]=Ce,W[pe]=_e,De=pe):(W[De]=fe,W[ie]=_e,De=ie);else if(pe<Xe&&0>o(Ce,_e))W[De]=Ce,W[pe]=_e,De=pe;else break e}}return le}function o(W,le){var _e=W.sortIndex-le.sortIndex;return _e!==0?_e:W.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],m=[],v=1,T=null,S=3,b=!1,F=!1,B=!1,G=!1,ee=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ae(W){for(var le=t(m);le!==null;){if(le.callback===null)s(m);else if(le.startTime<=W)s(m),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(m)}}function ce(W){if(B=!1,ae(W),!F)if(t(g)!==null)F=!0,oe||(oe=!0,L());else{var le=t(m);le!==null&&tt(ce,le.startTime-W)}}var oe=!1,x=-1,D=5,M=-1;function U(){return G?!0:!(n.unstable_now()-M<D)}function k(){if(G=!1,oe){var W=n.unstable_now();M=W;var le=!0;try{e:{F=!1,B&&(B=!1,X(x),x=-1),b=!0;var _e=S;try{t:{for(ae(W),T=t(g);T!==null&&!(T.expirationTime>W&&U());){var De=T.callback;if(typeof De=="function"){T.callback=null,S=T.priorityLevel;var Xe=De(T.expirationTime<=W);if(W=n.unstable_now(),typeof Xe=="function"){T.callback=Xe,ae(W),le=!0;break t}T===t(g)&&s(g),ae(W)}else s(g);T=t(g)}if(T!==null)le=!0;else{var q=t(m);q!==null&&tt(ce,q.startTime-W),le=!1}}break e}finally{T=null,S=_e,b=!1}le=void 0}}finally{le?L():oe=!1}}}var L;if(typeof Z=="function")L=function(){Z(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Pe=P.port2;P.port1.onmessage=k,L=function(){Pe.postMessage(null)}}else L=function(){ee(k,0)};function tt(W,le){x=ee(function(){W(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(W){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var _e=S;S=le;try{return W()}finally{S=_e}},n.unstable_requestPaint=function(){G=!0},n.unstable_runWithPriority=function(W,le){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var _e=S;S=W;try{return le()}finally{S=_e}},n.unstable_scheduleCallback=function(W,le,_e){var De=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?De+_e:De):_e=De,W){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=_e+Xe,W={id:v++,callback:le,priorityLevel:W,startTime:_e,expirationTime:Xe,sortIndex:-1},_e>De?(W.sortIndex=_e,e(m,W),t(g)===null&&W===t(m)&&(B?(X(x),x=-1):B=!0,tt(ce,_e-De))):(W.sortIndex=Xe,e(g,W),F||b||(F=!0,oe||(oe=!0,L()))),W},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(W){var le=S;return function(){var _e=S;S=le;try{return W.apply(this,arguments)}finally{S=_e}}}})(hp)),hp}var Vv;function Sw(){return Vv||(Vv=1,dp.exports=Ew()),dp.exports}var pp={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function Aw(){if(Uv)return tn;Uv=1;var n=fm();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,tn.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,v)},tn.flushSync=function(g){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=m,s.p=v,s.d.f()}},tn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},tn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},tn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:b}):v==="script"&&s.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},tn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},tn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin);s.d.L(g,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},tn.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=d(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},tn.requestFormReset=function(g){s.d.r(g)},tn.unstable_batchedUpdates=function(g,m){return g(m)},tn.useFormState=function(g,m,v){return u.H.useFormState(g,m,v)},tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},tn.version="19.2.0",tn}var Lv;function Cw(){if(Lv)return pp.exports;Lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pp.exports=Aw(),pp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function Iw(){if(Ov)return ql;Ov=1;var n=Sw(),e=fm(),t=Cw();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return g(y),i;if(_===c)return g(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==c.return)a=y,c=_;else{for(var A=!1,w=y.child;w;){if(w===a){A=!0,a=y,c=_;break}if(w===c){A=!0,c=y,a=_;break}w=w.sibling}if(!A){for(w=_.child;w;){if(w===a){A=!0,a=_,c=y;break}if(w===c){A=!0,c=_,a=y;break}w=w.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function Pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case ee:return"Profiler";case G:return"StrictMode";case ce:return"Suspense";case oe:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case F:return"Portal";case Z:return i.displayName||"Context";case X:return(i._context.displayName||"Context")+".Consumer";case ae:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return r=i.displayName||null,r!==null?r:Pe(i.type)||"Memo";case D:r=i._payload,i=i._init;try{return Pe(i(r))}catch{}}return null}var tt=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},De=[],Xe=-1;function q(i){return{current:i}}function ie(i){0>Xe||(i.current=De[Xe],De[Xe]=null,Xe--)}function fe(i,r){Xe++,De[Xe]=i.current,i.current=r}var pe=q(null),Ce=q(null),xe=q(null),Ge=q(null);function Vt(i,r){switch(fe(xe,r),fe(Ce,i),fe(pe,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?j_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=j_(r),i=ev(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(pe),fe(pe,i)}function dt(){ie(pe),ie(Ce),ie(xe)}function _r(i){i.memoizedState!==null&&fe(Ge,i);var r=pe.current,a=ev(r,i.type);r!==a&&(fe(Ce,i),fe(pe,a))}function fo(i){Ce.current===i&&(ie(pe),ie(Ce)),Ge.current===i&&(ie(Ge),kl._currentValue=_e)}var ho,po;function li(i){if(ho===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ho=r&&r[1]||"",po=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ho+i+po}var ka=!1;function vr(i,r){if(!i||ka)return"";ka=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch($){var J=$}Reflect.construct(i,[],ne)}else{try{ne.call()}catch($){J=$}i.call(ne.prototype)}}else{try{throw Error()}catch($){J=$}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch($){if($&&J&&typeof $.stack=="string")return[$.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],w=_[1];if(A&&w){var V=A.split(`
`),Y=w.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===Y.length)for(c=V.length-1,y=Y.length-1;1<=c&&0<=y&&V[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==Y[y]){var j=`
`+V[c].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=c&&0<=y);break}}}finally{ka=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?li(a):""}function Va(i,r){switch(i.tag){case 26:case 27:case 5:return li(i.type);case 16:return li("Lazy");case 13:return i.child!==r&&r!==null?li("Suspense Fallback"):li("Suspense");case 19:return li("SuspenseList");case 0:case 15:return vr(i.type,!1);case 11:return vr(i.type.render,!1);case 1:return vr(i.type,!0);case 31:return li("Activity");default:return""}}function Ua(i){try{var r="",a=null;do r+=Va(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ct=Object.prototype.hasOwnProperty,Ut=n.unstable_scheduleCallback,ys=n.unstable_cancelCallback,fd=n.unstable_shouldYield,Su=n.unstable_requestPaint,ln=n.unstable_now,Tr=n.unstable_getCurrentPriorityLevel,La=n.unstable_ImmediatePriority,Oa=n.unstable_UserBlockingPriority,_s=n.unstable_NormalPriority,dd=n.unstable_LowPriority,Au=n.unstable_IdlePriority,Cu=n.log,Iu=n.unstable_setDisableYieldValue,Jn=null,Kt=null;function Mn(i){if(typeof Cu=="function"&&Iu(i),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Jn,i)}catch{}}var vt=Math.clz32?Math.clz32:Ru,wu=Math.log,mo=Math.LN2;function Ru(i){return i>>>=0,i===0?32:31-(wu(i)/mo|0)|0}var ui=256,Er=262144,It=4194304;function ci(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function fi(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var w=c&134217727;return w!==0?(c=w&~_,c!==0?y=ci(c):(A&=w,A!==0?y=ci(A):a||(a=w&~i,a!==0&&(y=ci(a))))):(w=c&~_,w!==0?y=ci(w):A!==0?y=ci(A):a||(a=c&~i,a!==0&&(y=ci(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function Qn(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function hd(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bu(){var i=It;return It<<=1,(It&62914560)===0&&(It=4194304),i}function di(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Sr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function pd(i,r,a,c,y,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var w=i.entanglements,V=i.expirationTimes,Y=i.hiddenUpdates;for(a=A&~a;0<a;){var j=31-vt(a),ne=1<<j;w[j]=0,V[j]=-1;var J=Y[j];if(J!==null)for(Y[j]=null,j=0;j<J.length;j++){var $=J[j];$!==null&&($.lane&=-536870913)}a&=~ne}c!==0&&Ar(i,c,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~r))}function Ar(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-vt(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function qa(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-vt(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function Ba(i,r){var a=r&-r;return a=(a&42)!==0?1:Cr(a),(a&(i.suspendedLanes|r))!==0?0:a}function Cr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Bi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Nu(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:Av(i.type))}function Wn(i,r){var a=le.p;try{return le.p=i,r()}finally{le.p=a}}var $n=Math.random().toString(36).slice(2),wt="__reactFiber$"+$n,Ft="__reactProps$"+$n,hi="__reactContainer$"+$n,go="__reactEvents$"+$n,md="__reactListeners$"+$n,xu="__reactHandles$"+$n,Mu="__reactResources$"+$n,pi="__reactMarker$"+$n;function yo(i){delete i[wt],delete i[Ft],delete i[go],delete i[md],delete i[xu]}function mi(i){var r=i[wt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[hi]||a[wt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=av(i);i!==null;){if(a=i[wt])return a;i=av(i)}return r}i=a,a=i.parentNode}return null}function Dn(i){if(i=i[wt]||i[hi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function En(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function gi(i){var r=i[Mu];return r||(r=i[Mu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Rt(i){i[pi]=!0}var Fa=new Set,Ha={};function yi(i,r){_i(i,r),_i(i+"Capture",r)}function _i(i,r){for(Ha[i]=r,i=0;i<r.length;i++)Fa.add(r[i])}var Ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),za={},Ka={};function Du(i){return Ct.call(Ka,i)?!0:Ct.call(za,i)?!1:Ga.test(i)?Ka[i]=!0:(za[i]=!0,!1)}function _o(i,r,a){if(Du(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Sn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function bt(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function Ht(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function vs(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ya(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Ze(i){if(!i._valueTracker){var r=vs(i)?"checked":"value";i._valueTracker=Ya(i,r,""+i[r])}}function Ir(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=vs(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var wr=/[\n"\\]/g;function dn(i){return i.replace(wr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function vo(i,r,a,c,y,_,A,w){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Ht(r)):i.value!==""+Ht(r)&&(i.value=""+Ht(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?Ja(i,A,Ht(r)):a!=null?Ja(i,A,Ht(a)):c!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Ht(w):i.removeAttribute("name")}function Pu(i,r,a,c,y,_,A,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Ze(i);return}a=a!=null?""+Ht(a):"",r=r!=null?""+Ht(r):a,w||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=w?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Ze(i)}function Ja(i,r,a){r==="number"&&vi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Ts(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Ht(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function ku(i,r,a){if(r!=null&&(r=""+Ht(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Ht(a):""}function Es(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(tt(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=Ht(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Ze(i)}function hn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qa(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||Vu.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function Wa(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&Qa(i,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&Qa(i,_,r[_])}function To(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ss=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Eo(i){return Ss.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xn(){}var $a=null;function Pn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var As=null,Ti=null;function Rr(i){var r=Dn(i);if(r&&(i=r.stateNode)){var a=i[Ft]||null;e:switch(i=r.stateNode,r.type){case"input":if(vo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[Ft]||null;if(!y)throw Error(s(90));vo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Ir(c)}break e;case"textarea":ku(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ts(i,!!a.multiple,r,!1)}}}var So=!1;function Cs(i,r,a){if(So)return i(r,a);So=!0;try{var c=i(r);return c}finally{if(So=!1,(As!==null||Ti!==null)&&(Nc(),As&&(r=As,i=Ti,Ti=As=null,Rr(r),i)))for(r=0;r<i.length;r++)Rr(i[r])}}function Zn(i,r){var a=i.stateNode;if(a===null)return null;var c=a[Ft]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),br=!1;if(kn)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){br=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{br=!1}var Ei=null,Xa=null,Nr=null;function Za(){if(Nr)return Nr;var i,r=Xa,a=r.length,c,y="value"in Ei?Ei.value:Ei.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&r[a-c]===y[_-c];c++);return Nr=y.slice(i,1<c?1-c:void 0)}function xr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Fi(){return!0}function jn(){return!1}function Yt(i){function r(a,c,y,_,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(a=i[w],this[w]=a?a(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Fi:jn,this.isPropagationStopped=jn,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),r}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=Yt(Hi),Is=T({},Hi,{view:0,detail:0}),ja=Yt(Is),ws,Ao,Ai,Co=T({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ai&&(Ai&&i.type==="mousemove"?(ws=i.screenX-Ai.screenX,Ao=i.screenY-Ai.screenY):Ao=ws=0,Ai=i),ws)},movementY:function(i){return"movementY"in i?i.movementY:Ao}}),el=Yt(Co),Mr=T({},Co,{dataTransfer:0}),Lu=Yt(Mr),Ou=T({},Is,{relatedTarget:0}),Dr=Yt(Ou),tl=T({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=Yt(tl),Io=T({},Hi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Bu=Yt(Io),Fu=T({},Hi,{data:0}),Ci=Yt(Fu),Hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ku(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=zu[i])?!!r[i]:!1}function Rs(){return Ku}var un=T({},Is,{key:function(i){if(i.key){var r=Hu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=xr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Gu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(i){return i.type==="keypress"?xr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Yu=Yt(un),Ju=T({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gi=Yt(Ju),p=T({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),E=Yt(p),I=T({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Yt(I),z=T({},Co,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Yt(z),ue=T({},Hi,{newState:0,oldState:0}),be=Yt(ue),Tt=[9,13,27,32],Qe=kn&&"CompositionEvent"in window,ht=null;kn&&"documentMode"in document&&(ht=document.documentMode);var Vn=kn&&"TextEvent"in window&&!ht,Ii=kn&&(!Qe||ht&&8<ht&&11>=ht),ei=" ",ti=!1;function Pr(i,r){switch(i){case"keyup":return Tt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ro=!1;function FC(i,r){switch(i){case"compositionend":return wo(r);case"keypress":return r.which!==32?null:(ti=!0,ei);case"textInput":return i=r.data,i===ei&&ti?null:i;default:return null}}function HC(i,r){if(Ro)return i==="compositionend"||!Qe&&Pr(i,r)?(i=Za(),Nr=Xa=Ei=null,Ro=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ii&&r.locale!=="ko"?null:r.data;default:return null}}var GC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!GC[i.type]:r==="textarea"}function fg(i,r,a,c){As?Ti?Ti.push(c):Ti=[c]:As=c,r=Uc(r,"onChange"),0<r.length&&(a=new Si("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var nl=null,il=null;function zC(i){J_(i,0)}function Qu(i){var r=En(i);if(Ir(r))return i}function dg(i,r){if(i==="change")return r}var hg=!1;if(kn){var gd;if(kn){var yd="oninput"in document;if(!yd){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),yd=typeof pg.oninput=="function"}gd=yd}else gd=!1;hg=gd&&(!document.documentMode||9<document.documentMode)}function mg(){nl&&(nl.detachEvent("onpropertychange",gg),il=nl=null)}function gg(i){if(i.propertyName==="value"&&Qu(il)){var r=[];fg(r,il,i,Pn(i)),Cs(zC,r)}}function KC(i,r,a){i==="focusin"?(mg(),nl=r,il=a,nl.attachEvent("onpropertychange",gg)):i==="focusout"&&mg()}function YC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Qu(il)}function JC(i,r){if(i==="click")return Qu(r)}function QC(i,r){if(i==="input"||i==="change")return Qu(r)}function WC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var An=typeof Object.is=="function"?Object.is:WC;function sl(i,r){if(An(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Ct.call(r,y)||!An(i[y],r[y]))return!1}return!0}function yg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function _g(i,r){var a=yg(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yg(a)}}function vg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?vg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Tg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=vi(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=vi(i.document)}return r}function _d(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var $C=kn&&"documentMode"in document&&11>=document.documentMode,bo=null,vd=null,rl=null,Td=!1;function Eg(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Td||bo==null||bo!==vi(c)||(c=bo,"selectionStart"in c&&_d(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),rl&&sl(rl,c)||(rl=c,c=Uc(vd,"onSelect"),0<c.length&&(r=new Si("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=bo)))}function kr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var No={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionrun:kr("Transition","TransitionRun"),transitionstart:kr("Transition","TransitionStart"),transitioncancel:kr("Transition","TransitionCancel"),transitionend:kr("Transition","TransitionEnd")},Ed={},Sg={};kn&&(Sg=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Vr(i){if(Ed[i])return Ed[i];if(!No[i])return i;var r=No[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Sg)return Ed[i]=r[a];return i}var Ag=Vr("animationend"),Cg=Vr("animationiteration"),Ig=Vr("animationstart"),XC=Vr("transitionrun"),ZC=Vr("transitionstart"),jC=Vr("transitioncancel"),wg=Vr("transitionend"),Rg=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function ni(i,r){Rg.set(i,r),yi(r,[i])}var Wu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Un=[],xo=0,Ad=0;function $u(){for(var i=xo,r=Ad=xo=0;r<i;){var a=Un[r];Un[r++]=null;var c=Un[r];Un[r++]=null;var y=Un[r];Un[r++]=null;var _=Un[r];if(Un[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&bg(a,y,_)}}function Xu(i,r,a,c){Un[xo++]=i,Un[xo++]=r,Un[xo++]=a,Un[xo++]=c,Ad|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Cd(i,r,a,c){return Xu(i,r,a,c),Zu(i)}function Ur(i,r){return Xu(i,null,null,r),Zu(i)}function bg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-vt(a),i=_.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),_):null}function Zu(i){if(50<Rl)throw Rl=0,Ph=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Mo={};function eI(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(i,r,a,c){return new eI(i,r,a,c)}function Id(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zi(i,r){var a=i.alternate;return a===null?(a=Cn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Ng(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ju(i,r,a,c,y,_){var A=0;if(c=i,typeof i=="function")Id(i)&&(A=1);else if(typeof i=="string")A=rw(i,a,pe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=Cn(31,a,r,y),i.elementType=M,i.lanes=_,i;case B:return Lr(a.children,y,_,r);case G:A=8,y|=24;break;case ee:return i=Cn(12,a,r,y|2),i.elementType=ee,i.lanes=_,i;case ce:return i=Cn(13,a,r,y),i.elementType=ce,i.lanes=_,i;case oe:return i=Cn(19,a,r,y),i.elementType=oe,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:A=10;break e;case X:A=9;break e;case ae:A=11;break e;case x:A=14;break e;case D:A=16,c=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=Cn(A,a,r,y),r.elementType=i,r.type=c,r.lanes=_,r}function Lr(i,r,a,c){return i=Cn(7,i,c,r),i.lanes=a,i}function wd(i,r,a){return i=Cn(6,i,null,r),i.lanes=a,i}function xg(i){var r=Cn(18,null,null,0);return r.stateNode=i,r}function Rd(i,r,a){return r=Cn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Mg=new WeakMap;function Ln(i,r){if(typeof i=="object"&&i!==null){var a=Mg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Ua(r)},Mg.set(i,r),r)}return{value:i,source:r,stack:Ua(r)}}var Do=[],Po=0,ec=null,ol=0,On=[],qn=0,bs=null,wi=1,Ri="";function Ki(i,r){Do[Po++]=ol,Do[Po++]=ec,ec=i,ol=r}function Dg(i,r,a){On[qn++]=wi,On[qn++]=Ri,On[qn++]=bs,bs=i;var c=wi;i=Ri;var y=32-vt(c)-1;c&=~(1<<y),a+=1;var _=32-vt(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,wi=1<<32-vt(r)+y|a<<y|c,Ri=_+i}else wi=1<<_|a<<y|c,Ri=i}function bd(i){i.return!==null&&(Ki(i,1),Dg(i,1,0))}function Nd(i){for(;i===ec;)ec=Do[--Po],Do[Po]=null,ol=Do[--Po],Do[Po]=null;for(;i===bs;)bs=On[--qn],On[qn]=null,Ri=On[--qn],On[qn]=null,wi=On[--qn],On[qn]=null}function Pg(i,r){On[qn++]=wi,On[qn++]=Ri,On[qn++]=bs,wi=r.id,Ri=r.overflow,bs=i}var Jt=null,at=null,He=!1,Ns=null,Bn=!1,xd=Error(s(519));function xs(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw al(Ln(r,i)),xd}function kg(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[wt]=i,r[Ft]=c,a){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(a=0;a<Nl.length;a++)Ue(Nl[a],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),Pu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),Es(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||X_(r.textContent,a)?(c.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),c.onScroll!=null&&Ue("scroll",r),c.onScrollEnd!=null&&Ue("scrollend",r),c.onClick!=null&&(r.onclick=Xn),r=!0):r=!1,r||xs(i,!0)}function Vg(i){for(Jt=i.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:Jt=Jt.return}}function ko(i){if(i!==Jt)return!1;if(!He)return Vg(i),He=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Qh(i.type,i.memoizedProps)),a=!a),a&&at&&xs(i),Vg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));at=ov(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));at=ov(i)}else r===27?(r=at,zs(i.type)?(i=jh,jh=null,at=i):at=r):at=Jt?Hn(i.stateNode.nextSibling):null;return!0}function Or(){at=Jt=null,He=!1}function Md(){var i=Ns;return i!==null&&(yn===null?yn=i:yn.push.apply(yn,i),Ns=null),i}function al(i){Ns===null?Ns=[i]:Ns.push(i)}var Dd=q(null),qr=null,Yi=null;function Ms(i,r,a){fe(Dd,r._currentValue),r._currentValue=a}function Ji(i){i._currentValue=Dd.current,ie(Dd)}function Pd(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function kd(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var V=0;V<r.length;V++)if(w.context===r[V]){_.lanes|=a,w=_.alternate,w!==null&&(w.lanes|=a),Pd(_.return,a,i),c||(A=null);break e}_=w.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(s(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Pd(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Vo(i,r,a,c){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var w=y.type;An(y.pendingProps.value,A.value)||(i!==null?i.push(w):i=[w])}}else if(y===Ge.current){if(A=y.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(kl):i=[kl])}y=y.return}i!==null&&kd(r,i,a,c),r.flags|=262144}function tc(i){for(i=i.firstContext;i!==null;){if(!An(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Br(i){qr=i,Yi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qt(i){return Ug(qr,i)}function nc(i,r){return qr===null&&Br(i),Ug(i,r)}function Ug(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Yi===null){if(i===null)throw Error(s(308));Yi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Yi=Yi.next=r;return a}var tI=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},nI=n.unstable_scheduleCallback,iI=n.unstable_NormalPriority,Nt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vd(){return{controller:new tI,data:new Map,refCount:0}}function ll(i){i.refCount--,i.refCount===0&&nI(iI,function(){i.controller.abort()})}var ul=null,Ud=0,Uo=0,Lo=null;function sI(i,r){if(ul===null){var a=ul=[];Ud=0,Uo=qh(),Lo={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Ud++,r.then(Lg,Lg),r}function Lg(){if(--Ud===0&&ul!==null){Lo!==null&&(Lo.status="fulfilled");var i=ul;ul=null,Uo=0,Lo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function rI(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Og=W.S;W.S=function(i,r){E_=ln(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&sI(i,r),Og!==null&&Og(i,r)};var Fr=q(null);function Ld(){var i=Fr.current;return i!==null?i:ot.pooledCache}function ic(i,r){r===null?fe(Fr,Fr.current):fe(Fr,r.pool)}function qg(){var i=Ld();return i===null?null:{parent:Nt._currentValue,pool:i}}var Oo=Error(s(460)),Od=Error(s(474)),sc=Error(s(542)),rc={then:function(){}};function Bg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Xn,Xn),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Gg(i),i;default:if(typeof r.status=="string")r.then(Xn,Xn);else{if(i=ot,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Gg(i),i}throw Gr=r,Oo}}function Hr(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Gr=a,Oo):a}}var Gr=null;function Hg(){if(Gr===null)throw Error(s(459));var i=Gr;return Gr=null,i}function Gg(i){if(i===Oo||i===sc)throw Error(s(483))}var qo=null,cl=0;function oc(i){var r=cl;return cl+=1,qo===null&&(qo=[]),Fg(qo,i,r)}function fl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ac(i,r){throw r.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function zg(i){function r(H,O){if(i){var K=H.deletions;K===null?(H.deletions=[O],H.flags|=16):K.push(O)}}function a(H,O){if(!i)return null;for(;O!==null;)r(H,O),O=O.sibling;return null}function c(H){for(var O=new Map;H!==null;)H.key!==null?O.set(H.key,H):O.set(H.index,H),H=H.sibling;return O}function y(H,O){return H=zi(H,O),H.index=0,H.sibling=null,H}function _(H,O,K){return H.index=K,i?(K=H.alternate,K!==null?(K=K.index,K<O?(H.flags|=67108866,O):K):(H.flags|=67108866,O)):(H.flags|=1048576,O)}function A(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function w(H,O,K,te){return O===null||O.tag!==6?(O=wd(K,H.mode,te),O.return=H,O):(O=y(O,K),O.return=H,O)}function V(H,O,K,te){var ve=K.type;return ve===B?j(H,O,K.props.children,te,K.key):O!==null&&(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===D&&Hr(ve)===O.type)?(O=y(O,K.props),fl(O,K),O.return=H,O):(O=ju(K.type,K.key,K.props,null,H.mode,te),fl(O,K),O.return=H,O)}function Y(H,O,K,te){return O===null||O.tag!==4||O.stateNode.containerInfo!==K.containerInfo||O.stateNode.implementation!==K.implementation?(O=Rd(K,H.mode,te),O.return=H,O):(O=y(O,K.children||[]),O.return=H,O)}function j(H,O,K,te,ve){return O===null||O.tag!==7?(O=Lr(K,H.mode,te,ve),O.return=H,O):(O=y(O,K),O.return=H,O)}function ne(H,O,K){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=wd(""+O,H.mode,K),O.return=H,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case b:return K=ju(O.type,O.key,O.props,null,H.mode,K),fl(K,O),K.return=H,K;case F:return O=Rd(O,H.mode,K),O.return=H,O;case D:return O=Hr(O),ne(H,O,K)}if(tt(O)||L(O))return O=Lr(O,H.mode,K,null),O.return=H,O;if(typeof O.then=="function")return ne(H,oc(O),K);if(O.$$typeof===Z)return ne(H,nc(H,O),K);ac(H,O)}return null}function J(H,O,K,te){var ve=O!==null?O.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ve!==null?null:w(H,O,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return K.key===ve?V(H,O,K,te):null;case F:return K.key===ve?Y(H,O,K,te):null;case D:return K=Hr(K),J(H,O,K,te)}if(tt(K)||L(K))return ve!==null?null:j(H,O,K,te,null);if(typeof K.then=="function")return J(H,O,oc(K),te);if(K.$$typeof===Z)return J(H,O,nc(H,K),te);ac(H,K)}return null}function $(H,O,K,te,ve){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return H=H.get(K)||null,w(O,H,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return H=H.get(te.key===null?K:te.key)||null,V(O,H,te,ve);case F:return H=H.get(te.key===null?K:te.key)||null,Y(O,H,te,ve);case D:return te=Hr(te),$(H,O,K,te,ve)}if(tt(te)||L(te))return H=H.get(K)||null,j(O,H,te,ve,null);if(typeof te.then=="function")return $(H,O,K,oc(te),ve);if(te.$$typeof===Z)return $(H,O,K,nc(O,te),ve);ac(O,te)}return null}function me(H,O,K,te){for(var ve=null,Ke=null,ge=O,Me=O=0,Oe=null;ge!==null&&Me<K.length;Me++){ge.index>Me?(Oe=ge,ge=null):Oe=ge.sibling;var Ye=J(H,ge,K[Me],te);if(Ye===null){ge===null&&(ge=Oe);break}i&&ge&&Ye.alternate===null&&r(H,ge),O=_(Ye,O,Me),Ke===null?ve=Ye:Ke.sibling=Ye,Ke=Ye,ge=Oe}if(Me===K.length)return a(H,ge),He&&Ki(H,Me),ve;if(ge===null){for(;Me<K.length;Me++)ge=ne(H,K[Me],te),ge!==null&&(O=_(ge,O,Me),Ke===null?ve=ge:Ke.sibling=ge,Ke=ge);return He&&Ki(H,Me),ve}for(ge=c(ge);Me<K.length;Me++)Oe=$(ge,H,Me,K[Me],te),Oe!==null&&(i&&Oe.alternate!==null&&ge.delete(Oe.key===null?Me:Oe.key),O=_(Oe,O,Me),Ke===null?ve=Oe:Ke.sibling=Oe,Ke=Oe);return i&&ge.forEach(function(Ws){return r(H,Ws)}),He&&Ki(H,Me),ve}function Ee(H,O,K,te){if(K==null)throw Error(s(151));for(var ve=null,Ke=null,ge=O,Me=O=0,Oe=null,Ye=K.next();ge!==null&&!Ye.done;Me++,Ye=K.next()){ge.index>Me?(Oe=ge,ge=null):Oe=ge.sibling;var Ws=J(H,ge,Ye.value,te);if(Ws===null){ge===null&&(ge=Oe);break}i&&ge&&Ws.alternate===null&&r(H,ge),O=_(Ws,O,Me),Ke===null?ve=Ws:Ke.sibling=Ws,Ke=Ws,ge=Oe}if(Ye.done)return a(H,ge),He&&Ki(H,Me),ve;if(ge===null){for(;!Ye.done;Me++,Ye=K.next())Ye=ne(H,Ye.value,te),Ye!==null&&(O=_(Ye,O,Me),Ke===null?ve=Ye:Ke.sibling=Ye,Ke=Ye);return He&&Ki(H,Me),ve}for(ge=c(ge);!Ye.done;Me++,Ye=K.next())Ye=$(ge,H,Me,Ye.value,te),Ye!==null&&(i&&Ye.alternate!==null&&ge.delete(Ye.key===null?Me:Ye.key),O=_(Ye,O,Me),Ke===null?ve=Ye:Ke.sibling=Ye,Ke=Ye);return i&&ge.forEach(function(gw){return r(H,gw)}),He&&Ki(H,Me),ve}function rt(H,O,K,te){if(typeof K=="object"&&K!==null&&K.type===B&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case b:e:{for(var ve=K.key;O!==null;){if(O.key===ve){if(ve=K.type,ve===B){if(O.tag===7){a(H,O.sibling),te=y(O,K.props.children),te.return=H,H=te;break e}}else if(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===D&&Hr(ve)===O.type){a(H,O.sibling),te=y(O,K.props),fl(te,K),te.return=H,H=te;break e}a(H,O);break}else r(H,O);O=O.sibling}K.type===B?(te=Lr(K.props.children,H.mode,te,K.key),te.return=H,H=te):(te=ju(K.type,K.key,K.props,null,H.mode,te),fl(te,K),te.return=H,H=te)}return A(H);case F:e:{for(ve=K.key;O!==null;){if(O.key===ve)if(O.tag===4&&O.stateNode.containerInfo===K.containerInfo&&O.stateNode.implementation===K.implementation){a(H,O.sibling),te=y(O,K.children||[]),te.return=H,H=te;break e}else{a(H,O);break}else r(H,O);O=O.sibling}te=Rd(K,H.mode,te),te.return=H,H=te}return A(H);case D:return K=Hr(K),rt(H,O,K,te)}if(tt(K))return me(H,O,K,te);if(L(K)){if(ve=L(K),typeof ve!="function")throw Error(s(150));return K=ve.call(K),Ee(H,O,K,te)}if(typeof K.then=="function")return rt(H,O,oc(K),te);if(K.$$typeof===Z)return rt(H,O,nc(H,K),te);ac(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,O!==null&&O.tag===6?(a(H,O.sibling),te=y(O,K),te.return=H,H=te):(a(H,O),te=wd(K,H.mode,te),te.return=H,H=te),A(H)):a(H,O)}return function(H,O,K,te){try{cl=0;var ve=rt(H,O,K,te);return qo=null,ve}catch(ge){if(ge===Oo||ge===sc)throw ge;var Ke=Cn(29,ge,null,H.mode);return Ke.lanes=te,Ke.return=H,Ke}finally{}}}var zr=zg(!0),Kg=zg(!1),Ds=!1;function qd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bd(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ps(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ks(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Zu(i),bg(i,null,a),r}return Xu(i,c,r,a),Zu(i)}function dl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,qa(i,a)}}function Fd(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Hd=!1;function hl(){if(Hd){var i=Lo;if(i!==null)throw i}}function pl(i,r,a,c){Hd=!1;var y=i.updateQueue;Ds=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var V=w,Y=V.next;V.next=null,A===null?_=Y:A.next=Y,A=V;var j=i.alternate;j!==null&&(j=j.updateQueue,w=j.lastBaseUpdate,w!==A&&(w===null?j.firstBaseUpdate=Y:w.next=Y,j.lastBaseUpdate=V))}if(_!==null){var ne=y.baseState;A=0,j=Y=V=null,w=_;do{var J=w.lane&-536870913,$=J!==w.lane;if($?(Le&J)===J:(c&J)===J){J!==0&&J===Uo&&(Hd=!0),j!==null&&(j=j.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var me=i,Ee=w;J=r;var rt=a;switch(Ee.tag){case 1:if(me=Ee.payload,typeof me=="function"){ne=me.call(rt,ne,J);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ee.payload,J=typeof me=="function"?me.call(rt,ne,J):me,J==null)break e;ne=T({},ne,J);break e;case 2:Ds=!0}}J=w.callback,J!==null&&(i.flags|=64,$&&(i.flags|=8192),$=y.callbacks,$===null?y.callbacks=[J]:$.push(J))}else $={lane:J,tag:w.tag,payload:w.payload,callback:w.callback,next:null},j===null?(Y=j=$,V=ne):j=j.next=$,A|=J;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;$=w,w=$.next,$.next=null,y.lastBaseUpdate=$,y.shared.pending=null}}while(!0);j===null&&(V=ne),y.baseState=V,y.firstBaseUpdate=Y,y.lastBaseUpdate=j,_===null&&(y.shared.lanes=0),qs|=A,i.lanes=A,i.memoizedState=ne}}function Yg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Jg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Yg(a[i],r)}var Bo=q(null),lc=q(0);function Qg(i,r){i=ns,fe(lc,i),fe(Bo,r),ns=i|r.baseLanes}function Gd(){fe(lc,ns),fe(Bo,Bo.current)}function zd(){ns=lc.current,ie(Bo),ie(lc)}var In=q(null),Fn=null;function Vs(i){var r=i.alternate;fe(Et,Et.current&1),fe(In,i),Fn===null&&(r===null||Bo.current!==null||r.memoizedState!==null)&&(Fn=i)}function Kd(i){fe(Et,Et.current),fe(In,i),Fn===null&&(Fn=i)}function Wg(i){i.tag===22?(fe(Et,Et.current),fe(In,i),Fn===null&&(Fn=i)):Us()}function Us(){fe(Et,Et.current),fe(In,In.current)}function wn(i){ie(In),Fn===i&&(Fn=null),ie(Et)}var Et=q(0);function uc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Xh(a)||Zh(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qi=0,Ne=null,it=null,xt=null,cc=!1,Fo=!1,Kr=!1,fc=0,ml=0,Ho=null,oI=0;function yt(){throw Error(s(321))}function Yd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!An(i[a],r[a]))return!1;return!0}function Jd(i,r,a,c,y,_){return Qi=_,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=i===null||i.memoizedState===null?Dy:lh,Kr=!1,_=a(c,y),Kr=!1,Fo&&(_=Xg(r,a,c,y)),$g(i),_}function $g(i){W.H=_l;var r=it!==null&&it.next!==null;if(Qi=0,xt=it=Ne=null,cc=!1,ml=0,Ho=null,r)throw Error(s(300));i===null||Mt||(i=i.dependencies,i!==null&&tc(i)&&(Mt=!0))}function Xg(i,r,a,c){Ne=i;var y=0;do{if(Fo&&(Ho=null),ml=0,Fo=!1,25<=y)throw Error(s(301));if(y+=1,xt=it=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=Py,_=r(a,c)}while(Fo);return _}function aI(){var i=W.H,r=i.useState()[0];return r=typeof r.then=="function"?gl(r):r,i=i.useState()[0],(it!==null?it.memoizedState:null)!==i&&(Ne.flags|=1024),r}function Qd(){var i=fc!==0;return fc=0,i}function Wd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function $d(i){if(cc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}cc=!1}Qi=0,xt=it=Ne=null,Fo=!1,ml=fc=0,Ho=null}function cn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ne.memoizedState=xt=i:xt=xt.next=i,xt}function St(){if(it===null){var i=Ne.alternate;i=i!==null?i.memoizedState:null}else i=it.next;var r=xt===null?Ne.memoizedState:xt.next;if(r!==null)xt=r,it=i;else{if(i===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));it=i,i={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},xt===null?Ne.memoizedState=xt=i:xt=xt.next=i}return xt}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(i){var r=ml;return ml+=1,Ho===null&&(Ho=[]),i=Fg(Ho,i,r),r=Ne,(xt===null?r.memoizedState:xt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?Dy:lh),i}function hc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return gl(i);if(i.$$typeof===Z)return Qt(i)}throw Error(s(438,String(i)))}function Xd(i){var r=null,a=Ne.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=dc(),Ne.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=U;return r.index++,a}function Wi(i,r){return typeof r=="function"?r(i):r}function pc(i){var r=St();return Zd(r,it,i)}function Zd(i,r,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var y=i.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var w=A=null,V=null,Y=r,j=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Le&ne)===ne:(Qi&ne)===ne){var J=Y.revertLane;if(J===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Uo&&(j=!0);else if((Qi&J)===J){Y=Y.next,J===Uo&&(j=!0);continue}else ne={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(w=V=ne,A=_):V=V.next=ne,Ne.lanes|=J,qs|=J;ne=Y.action,Kr&&a(_,ne),_=Y.hasEagerState?Y.eagerState:a(_,ne)}else J={lane:ne,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(w=V=J,A=_):V=V.next=J,Ne.lanes|=ne,qs|=ne;Y=Y.next}while(Y!==null&&Y!==r);if(V===null?A=_:V.next=w,!An(_,i.memoizedState)&&(Mt=!0,j&&(a=Lo,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=V,c.lastRenderedState=_}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function jd(i){var r=St(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do _=i(_,A.action),A=A.next;while(A!==y);An(_,r.memoizedState)||(Mt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function Zg(i,r,a){var c=Ne,y=St(),_=He;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var A=!An((it||y).memoizedState,a);if(A&&(y.memoizedState=a,Mt=!0),y=y.queue,nh(ty.bind(null,c,y,i),[i]),y.getSnapshot!==r||A||xt!==null&&xt.memoizedState.tag&1){if(c.flags|=2048,Go(9,{destroy:void 0},ey.bind(null,c,y,a,r),null),ot===null)throw Error(s(349));_||(Qi&127)!==0||jg(c,r,a)}return a}function jg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Ne.updateQueue,r===null?(r=dc(),Ne.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function ey(i,r,a,c){r.value=a,r.getSnapshot=c,ny(r)&&iy(i)}function ty(i,r,a){return a(function(){ny(r)&&iy(i)})}function ny(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!An(i,a)}catch{return!0}}function iy(i){var r=Ur(i,2);r!==null&&_n(r,i,2)}function eh(i){var r=cn();if(typeof i=="function"){var a=i;if(i=a(),Kr){Mn(!0);try{a()}finally{Mn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:i},r}function sy(i,r,a,c){return i.baseState=a,Zd(i,it,typeof c=="function"?c:Wi)}function lI(i,r,a,c,y){if(yc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};W.T!==null?a(!0):_.isTransition=!1,c(_),a=r.pending,a===null?(_.next=r.pending=_,ry(r,_)):(_.next=a.next,r.pending=a.next=_)}}function ry(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var _=W.T,A={};W.T=A;try{var w=a(y,c),V=W.S;V!==null&&V(A,w),oy(i,r,w)}catch(Y){th(i,r,Y)}finally{_!==null&&A.types!==null&&(_.types=A.types),W.T=_}}else try{_=a(y,c),oy(i,r,_)}catch(Y){th(i,r,Y)}}function oy(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){ay(i,r,c)},function(c){return th(i,r,c)}):ay(i,r,a)}function ay(i,r,a){r.status="fulfilled",r.value=a,ly(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,ry(i,a)))}function th(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,ly(r),r=r.next;while(r!==c)}i.action=null}function ly(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function uy(i,r){return r}function cy(i,r){if(He){var a=ot.formState;if(a!==null){e:{var c=Ne;if(He){if(at){t:{for(var y=at,_=Bn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Hn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){at=Hn(y.nextSibling),c=y.data==="F!";break e}}xs(c)}c=!1}c&&(r=a[0])}}return a=cn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:r},a.queue=c,a=Ny.bind(null,Ne,c),c.dispatch=a,c=eh(!1),_=ah.bind(null,Ne,!1,c.queue),c=cn(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=lI.bind(null,Ne,y,_,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function fy(i){var r=St();return dy(r,it,i)}function dy(i,r,a){if(r=Zd(i,r,uy)[0],i=pc(Wi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=gl(r)}catch(A){throw A===Oo?sc:A}else c=r;r=St();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Ne.flags|=2048,Go(9,{destroy:void 0},uI.bind(null,y,a),null)),[c,_,i]}function uI(i,r){i.action=r}function hy(i){var r=St(),a=it;if(a!==null)return dy(r,a,i);St(),r=r.memoizedState,a=St();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function Go(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=dc(),Ne.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function py(){return St().memoizedState}function mc(i,r,a,c){var y=cn();Ne.flags|=i,y.memoizedState=Go(1|r,{destroy:void 0},a,c===void 0?null:c)}function gc(i,r,a,c){var y=St();c=c===void 0?null:c;var _=y.memoizedState.inst;it!==null&&c!==null&&Yd(c,it.memoizedState.deps)?y.memoizedState=Go(r,_,a,c):(Ne.flags|=i,y.memoizedState=Go(1|r,_,a,c))}function my(i,r){mc(8390656,8,i,r)}function nh(i,r){gc(2048,8,i,r)}function cI(i){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=dc(),Ne.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function gy(i){var r=St().memoizedState;return cI({ref:r,nextImpl:i}),function(){if((We&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function yy(i,r){return gc(4,2,i,r)}function _y(i,r){return gc(4,4,i,r)}function vy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Ty(i,r,a){a=a!=null?a.concat([i]):null,gc(4,4,vy.bind(null,r,i),a)}function ih(){}function Ey(i,r){var a=St();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Yd(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function Sy(i,r){var a=St();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Yd(r,c[1]))return c[0];if(c=i(),Kr){Mn(!0);try{i()}finally{Mn(!1)}}return a.memoizedState=[c,r],c}function sh(i,r,a){return a===void 0||(Qi&1073741824)!==0&&(Le&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=A_(),Ne.lanes|=i,qs|=i,a)}function Ay(i,r,a,c){return An(a,r)?a:Bo.current!==null?(i=sh(i,a,c),An(i,r)||(Mt=!0),i):(Qi&42)===0||(Qi&1073741824)!==0&&(Le&261930)===0?(Mt=!0,i.memoizedState=a):(i=A_(),Ne.lanes|=i,qs|=i,r)}function Cy(i,r,a,c,y){var _=le.p;le.p=_!==0&&8>_?_:8;var A=W.T,w={};W.T=w,ah(i,!1,r,a);try{var V=y(),Y=W.S;if(Y!==null&&Y(w,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var j=rI(V,c);yl(i,r,j,Nn(i))}else yl(i,r,c,Nn(i))}catch(ne){yl(i,r,{then:function(){},status:"rejected",reason:ne},Nn())}finally{le.p=_,A!==null&&w.types!==null&&(A.types=w.types),W.T=A}}function fI(){}function rh(i,r,a,c){if(i.tag!==5)throw Error(s(476));var y=Iy(i).queue;Cy(i,y,r,_e,a===null?fI:function(){return wy(i),a(c)})}function Iy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:_e},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function wy(i){var r=Iy(i);r.next===null&&(r=i.alternate.memoizedState),yl(i,r.next.queue,{},Nn())}function oh(){return Qt(kl)}function Ry(){return St().memoizedState}function by(){return St().memoizedState}function dI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Nn();i=Ps(a);var c=ks(r,i,a);c!==null&&(_n(c,r,a),dl(c,r,a)),r={cache:Vd()},i.payload=r;return}r=r.return}}function hI(i,r,a){var c=Nn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},yc(i)?xy(r,a):(a=Cd(i,r,a,c),a!==null&&(_n(a,i,c),My(a,r,c)))}function Ny(i,r,a){var c=Nn();yl(i,r,a,c)}function yl(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(yc(i))xy(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,w=_(A,a);if(y.hasEagerState=!0,y.eagerState=w,An(w,A))return Xu(i,r,y,0),ot===null&&$u(),!1}catch{}finally{}if(a=Cd(i,r,y,c),a!==null)return _n(a,i,c),My(a,r,c),!0}return!1}function ah(i,r,a,c){if(c={lane:2,revertLane:qh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},yc(i)){if(r)throw Error(s(479))}else r=Cd(i,a,c,2),r!==null&&_n(r,i,2)}function yc(i){var r=i.alternate;return i===Ne||r!==null&&r===Ne}function xy(i,r){Fo=cc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function My(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,qa(i,a)}}var _l={readContext:Qt,use:hc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};_l.useEffectEvent=yt;var Dy={readContext:Qt,use:hc,useCallback:function(i,r){return cn().memoizedState=[i,r===void 0?null:r],i},useContext:Qt,useEffect:my,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,mc(4194308,4,vy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return mc(4194308,4,i,r)},useInsertionEffect:function(i,r){mc(4,2,i,r)},useMemo:function(i,r){var a=cn();r=r===void 0?null:r;var c=i();if(Kr){Mn(!0);try{i()}finally{Mn(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=cn();if(a!==void 0){var y=a(r);if(Kr){Mn(!0);try{a(r)}finally{Mn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=hI.bind(null,Ne,i),[c.memoizedState,i]},useRef:function(i){var r=cn();return i={current:i},r.memoizedState=i},useState:function(i){i=eh(i);var r=i.queue,a=Ny.bind(null,Ne,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:ih,useDeferredValue:function(i,r){var a=cn();return sh(a,i,r)},useTransition:function(){var i=eh(!1);return i=Cy.bind(null,Ne,i.queue,!0,!1),cn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=Ne,y=cn();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ot===null)throw Error(s(349));(Le&127)!==0||jg(c,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,my(ty.bind(null,c,_,i),[i]),c.flags|=2048,Go(9,{destroy:void 0},ey.bind(null,c,_,a,r),null),a},useId:function(){var i=cn(),r=ot.identifierPrefix;if(He){var a=Ri,c=wi;a=(c&~(1<<32-vt(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=fc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=oI++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:oh,useFormState:cy,useActionState:cy,useOptimistic:function(i){var r=cn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ah.bind(null,Ne,!0,a),a.dispatch=r,[i,r]},useMemoCache:Xd,useCacheRefresh:function(){return cn().memoizedState=dI.bind(null,Ne)},useEffectEvent:function(i){var r=cn(),a={impl:i};return r.memoizedState=a,function(){if((We&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},lh={readContext:Qt,use:hc,useCallback:Ey,useContext:Qt,useEffect:nh,useImperativeHandle:Ty,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:Sy,useReducer:pc,useRef:py,useState:function(){return pc(Wi)},useDebugValue:ih,useDeferredValue:function(i,r){var a=St();return Ay(a,it.memoizedState,i,r)},useTransition:function(){var i=pc(Wi)[0],r=St().memoizedState;return[typeof i=="boolean"?i:gl(i),r]},useSyncExternalStore:Zg,useId:Ry,useHostTransitionStatus:oh,useFormState:fy,useActionState:fy,useOptimistic:function(i,r){var a=St();return sy(a,it,i,r)},useMemoCache:Xd,useCacheRefresh:by};lh.useEffectEvent=gy;var Py={readContext:Qt,use:hc,useCallback:Ey,useContext:Qt,useEffect:nh,useImperativeHandle:Ty,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:Sy,useReducer:jd,useRef:py,useState:function(){return jd(Wi)},useDebugValue:ih,useDeferredValue:function(i,r){var a=St();return it===null?sh(a,i,r):Ay(a,it.memoizedState,i,r)},useTransition:function(){var i=jd(Wi)[0],r=St().memoizedState;return[typeof i=="boolean"?i:gl(i),r]},useSyncExternalStore:Zg,useId:Ry,useHostTransitionStatus:oh,useFormState:hy,useActionState:hy,useOptimistic:function(i,r){var a=St();return it!==null?sy(a,it,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:by};Py.useEffectEvent=gy;function uh(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:T({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var ch={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=Nn(),y=Ps(c);y.payload=r,a!=null&&(y.callback=a),r=ks(i,y,c),r!==null&&(_n(r,i,c),dl(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=Nn(),y=Ps(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=ks(i,y,c),r!==null&&(_n(r,i,c),dl(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Nn(),c=Ps(a);c.tag=2,r!=null&&(c.callback=r),r=ks(i,c,a),r!==null&&(_n(r,i,a),dl(r,i,a))}};function ky(i,r,a,c,y,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!sl(a,c)||!sl(y,_):!0}function Vy(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&ch.enqueueReplaceState(r,r.state,null)}function Yr(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=T({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Uy(i){Wu(i)}function Ly(i){console.error(i)}function Oy(i){Wu(i)}function _c(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function qy(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function fh(i,r,a){return a=Ps(a),a.tag=3,a.payload={element:null},a.callback=function(){_c(i,r)},a}function By(i){return i=Ps(i),i.tag=3,i}function Fy(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;i.payload=function(){return y(_)},i.callback=function(){qy(r,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){qy(r,a,c),typeof y!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function pI(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Vo(r,a,y,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return Fn===null?xc():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===rc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Uh(i,c,y)),!1;case 22:return a.flags|=65536,c===rc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Uh(i,c,y)),!1}throw Error(s(435,a.tag))}return Uh(i,c,y),xc(),!1}if(He)return r=In.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==xd&&(i=Error(s(422),{cause:c}),al(Ln(i,a)))):(c!==xd&&(r=Error(s(423),{cause:c}),al(Ln(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=Ln(c,a),y=fh(i.stateNode,c,y),Fd(i,y),_t!==4&&(_t=2)),!1;var _=Error(s(520),{cause:c});if(_=Ln(_,a),wl===null?wl=[_]:wl.push(_),_t!==4&&(_t=2),r===null)return!0;c=Ln(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=fh(a.stateNode,c,i),Fd(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Bs===null||!Bs.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=By(y),Fy(y,i,a,c),Fd(a,y),!1}a=a.return}while(a!==null);return!1}var dh=Error(s(461)),Mt=!1;function Wt(i,r,a,c){r.child=i===null?Kg(r,null,a,c):zr(r,i.child,a,c)}function Hy(i,r,a,c,y){a=a.render;var _=r.ref;if("ref"in c){var A={};for(var w in c)w!=="ref"&&(A[w]=c[w])}else A=c;return Br(r),c=Jd(i,r,a,A,_,y),w=Qd(),i!==null&&!Mt?(Wd(i,r,y),$i(i,r,y)):(He&&w&&bd(r),r.flags|=1,Wt(i,r,c,y),r.child)}function Gy(i,r,a,c,y){if(i===null){var _=a.type;return typeof _=="function"&&!Id(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,zy(i,r,_,c,y)):(i=ju(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!Th(i,y)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(A,c)&&i.ref===r.ref)return $i(i,r,y)}return r.flags|=1,i=zi(_,c),i.ref=r.ref,i.return=r,r.child=i}function zy(i,r,a,c,y){if(i!==null){var _=i.memoizedProps;if(sl(_,c)&&i.ref===r.ref)if(Mt=!1,r.pendingProps=c=_,Th(i,y))(i.flags&131072)!==0&&(Mt=!0);else return r.lanes=i.lanes,$i(i,r,y)}return hh(i,r,a,c,y)}function Ky(i,r,a,c){var y=c.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return Yy(i,r,_,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&ic(r,_!==null?_.cachePool:null),_!==null?Qg(r,_):Gd(),Wg(r);else return c=r.lanes=536870912,Yy(i,r,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(ic(r,_.cachePool),Qg(r,_),Us(),r.memoizedState=null):(i!==null&&ic(r,null),Gd(),Us());return Wt(i,r,y,a),r.child}function vl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Yy(i,r,a,c,y){var _=Ld();return _=_===null?null:{parent:Nt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&ic(r,null),Gd(),Wg(r),i!==null&&Vo(i,r,c,!0),r.childLanes=y,null}function vc(i,r){return r=Ec({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Jy(i,r,a){return zr(r,i.child,null,a),i=vc(r,r.pendingProps),i.flags|=2,wn(r),r.memoizedState=null,i}function mI(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(He){if(c.mode==="hidden")return i=vc(r,c),r.lanes=536870912,vl(null,i);if(Kd(r),(i=at)?(i=rv(i,Bn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:bs!==null?{id:wi,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},a=xg(i),a.return=r,r.child=a,Jt=r,at=null)):i=null,i===null)throw xs(r);return r.lanes=536870912,null}return vc(r,c)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(Kd(r),y)if(r.flags&256)r.flags&=-257,r=Jy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Mt||Vo(i,r,a,!1),y=(a&i.childLanes)!==0,Mt||y){if(c=ot,c!==null&&(A=Ba(c,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Ur(i,A),_n(c,i,A),dh;xc(),r=Jy(i,r,a)}else i=_.treeContext,at=Hn(A.nextSibling),Jt=r,He=!0,Ns=null,Bn=!1,i!==null&&Pg(r,i),r=vc(r,c),r.flags|=4096;return r}return i=zi(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Tc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function hh(i,r,a,c,y){return Br(r),a=Jd(i,r,a,c,void 0,y),c=Qd(),i!==null&&!Mt?(Wd(i,r,y),$i(i,r,y)):(He&&c&&bd(r),r.flags|=1,Wt(i,r,a,y),r.child)}function Qy(i,r,a,c,y,_){return Br(r),r.updateQueue=null,a=Xg(r,c,a,y),$g(i),c=Qd(),i!==null&&!Mt?(Wd(i,r,_),$i(i,r,_)):(He&&c&&bd(r),r.flags|=1,Wt(i,r,a,_),r.child)}function Wy(i,r,a,c,y){if(Br(r),r.stateNode===null){var _=Mo,A=a.contextType;typeof A=="object"&&A!==null&&(_=Qt(A)),_=new a(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ch,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},qd(r),A=a.contextType,_.context=typeof A=="object"&&A!==null?Qt(A):Mo,_.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(uh(r,a,A,c),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&ch.enqueueReplaceState(_,_.state,null),pl(r,c,_,y),hl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){_=r.stateNode;var w=r.memoizedProps,V=Yr(a,w);_.props=V;var Y=_.context,j=a.contextType;A=Mo,typeof j=="object"&&j!==null&&(A=Qt(j));var ne=a.getDerivedStateFromProps;j=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,j||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||Y!==A)&&Vy(r,_,c,A),Ds=!1;var J=r.memoizedState;_.state=J,pl(r,c,_,y),hl(),Y=r.memoizedState,w||J!==Y||Ds?(typeof ne=="function"&&(uh(r,a,ne,c),Y=r.memoizedState),(V=Ds||ky(r,a,V,c,J,Y,A))?(j||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),_.props=c,_.state=Y,_.context=A,c=V):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Bd(i,r),A=r.memoizedProps,j=Yr(a,A),_.props=j,ne=r.pendingProps,J=_.context,Y=a.contextType,V=Mo,typeof Y=="object"&&Y!==null&&(V=Qt(Y)),w=a.getDerivedStateFromProps,(Y=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ne||J!==V)&&Vy(r,_,c,V),Ds=!1,J=r.memoizedState,_.state=J,pl(r,c,_,y),hl();var $=r.memoizedState;A!==ne||J!==$||Ds||i!==null&&i.dependencies!==null&&tc(i.dependencies)?(typeof w=="function"&&(uh(r,a,w,c),$=r.memoizedState),(j=Ds||ky(r,a,j,c,J,$,V)||i!==null&&i.dependencies!==null&&tc(i.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,$,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,$,V)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=$),_.props=c,_.state=$,_.context=V,c=j):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),c=!1)}return _=c,Tc(i,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&c?(r.child=zr(r,i.child,null,y),r.child=zr(r,null,a,y)):Wt(i,r,a,y),r.memoizedState=_.state,i=r.child):i=$i(i,r,y),i}function $y(i,r,a,c){return Or(),r.flags|=256,Wt(i,r,a,c),r.child}var ph={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mh(i){return{baseLanes:i,cachePool:qg()}}function gh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=bn),i}function Xy(i,r,a){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Et.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(He){if(y?Vs(r):Us(),(i=at)?(i=rv(i,Bn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:bs!==null?{id:wi,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},a=xg(i),a.return=r,r.child=a,Jt=r,at=null)):i=null,i===null)throw xs(r);return Zh(i)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(Us(),y=r.mode,w=Ec({mode:"hidden",children:w},y),c=Lr(c,y,a,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=mh(a),c.childLanes=gh(i,A,a),r.memoizedState=ph,vl(null,c)):(Vs(r),yh(r,w))}var V=i.memoizedState;if(V!==null&&(w=V.dehydrated,w!==null)){if(_)r.flags&256?(Vs(r),r.flags&=-257,r=_h(i,r,a)):r.memoizedState!==null?(Us(),r.child=i.child,r.flags|=128,r=null):(Us(),w=c.fallback,y=r.mode,c=Ec({mode:"visible",children:c.children},y),w=Lr(w,y,a,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,zr(r,i.child,null,a),c=r.child,c.memoizedState=mh(a),c.childLanes=gh(i,A,a),r.memoizedState=ph,r=vl(null,c));else if(Vs(r),Zh(w)){if(A=w.nextSibling&&w.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(s(419)),c.stack="",c.digest=A,al({value:c,source:null,stack:null}),r=_h(i,r,a)}else if(Mt||Vo(i,r,a,!1),A=(a&i.childLanes)!==0,Mt||A){if(A=ot,A!==null&&(c=Ba(A,a),c!==0&&c!==V.retryLane))throw V.retryLane=c,Ur(i,c),_n(A,i,c),dh;Xh(w)||xc(),r=_h(i,r,a)}else Xh(w)?(r.flags|=192,r.child=i.child,r=null):(i=V.treeContext,at=Hn(w.nextSibling),Jt=r,He=!0,Ns=null,Bn=!1,i!==null&&Pg(r,i),r=yh(r,c.children),r.flags|=4096);return r}return y?(Us(),w=c.fallback,y=r.mode,V=i.child,Y=V.sibling,c=zi(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,Y!==null?w=zi(Y,w):(w=Lr(w,y,a,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,vl(null,c),c=r.child,w=i.child.memoizedState,w===null?w=mh(a):(y=w.cachePool,y!==null?(V=Nt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=qg(),w={baseLanes:w.baseLanes|a,cachePool:y}),c.memoizedState=w,c.childLanes=gh(i,A,a),r.memoizedState=ph,vl(i.child,c)):(Vs(r),a=i.child,i=a.sibling,a=zi(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=a,r.memoizedState=null,a)}function yh(i,r){return r=Ec({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Ec(i,r){return i=Cn(22,i,null,r),i.lanes=0,i}function _h(i,r,a){return zr(r,i.child,null,a),i=yh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Zy(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),Pd(i.return,r,a)}function vh(i,r,a,c,y,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=_)}function jy(i,r,a){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Et.current,w=(A&2)!==0;if(w?(A=A&1|2,r.flags|=128):A&=1,fe(Et,A),Wt(i,r,c,a),c=He?ol:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Zy(i,a,r);else if(i.tag===19)Zy(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&uc(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),vh(r,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&uc(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}vh(r,!0,a,null,_,c);break;case"together":vh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function $i(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),qs|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Vo(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=zi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=zi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Th(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&tc(i)))}function gI(i,r,a){switch(r.tag){case 3:Vt(r,r.stateNode.containerInfo),Ms(r,Nt,i.memoizedState.cache),Or();break;case 27:case 5:_r(r);break;case 4:Vt(r,r.stateNode.containerInfo);break;case 10:Ms(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Kd(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Vs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Xy(i,r,a):(Vs(r),i=$i(i,r,a),i!==null?i.sibling:null);Vs(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Vo(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return jy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(Et,Et.current),c)break;return null;case 22:return r.lanes=0,Ky(i,r,a,r.pendingProps);case 24:Ms(r,Nt,i.memoizedState.cache)}return $i(i,r,a)}function e_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Mt=!0;else{if(!Th(i,a)&&(r.flags&128)===0)return Mt=!1,gI(i,r,a);Mt=(i.flags&131072)!==0}else Mt=!1,He&&(r.flags&1048576)!==0&&Dg(r,ol,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=Hr(r.elementType),r.type=i,typeof i=="function")Id(i)?(c=Yr(i,c),r.tag=1,r=Wy(null,r,i,c,a)):(r.tag=0,r=hh(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===ae){r.tag=11,r=Hy(null,r,i,c,a);break e}else if(y===x){r.tag=14,r=Gy(null,r,i,c,a);break e}}throw r=Pe(i)||i,Error(s(306,r,""))}}return r;case 0:return hh(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=Yr(c,r.pendingProps),Wy(i,r,c,y,a);case 3:e:{if(Vt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Bd(i,r),pl(r,c,null,a);var A=r.memoizedState;if(c=A.cache,Ms(r,Nt,c),c!==_.cache&&kd(r,[Nt],a,!0),hl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=$y(i,r,c,a);break e}else if(c!==y){y=Ln(Error(s(424)),r),al(y),r=$y(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(at=Hn(i.firstChild),Jt=r,He=!0,Ns=null,Bn=!0,a=Kg(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Or(),c===y){r=$i(i,r,a);break e}Wt(i,r,c,a)}r=r.child}return r;case 26:return Tc(i,r),i===null?(a=fv(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,i=r.pendingProps,c=Lc(xe.current).createElement(a),c[wt]=r,c[Ft]=i,$t(c,a,i),Rt(c),r.stateNode=c):r.memoizedState=fv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return _r(r),i===null&&He&&(c=r.stateNode=lv(r.type,r.pendingProps,xe.current),Jt=r,Bn=!0,y=at,zs(r.type)?(jh=y,at=Hn(c.firstChild)):at=y),Wt(i,r,r.pendingProps.children,a),Tc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&He&&((y=c=at)&&(c=YI(c,r.type,r.pendingProps,Bn),c!==null?(r.stateNode=c,Jt=r,at=Hn(c.firstChild),Bn=!1,y=!0):y=!1),y||xs(r)),_r(r),y=r.type,_=r.pendingProps,A=i!==null?i.memoizedProps:null,c=_.children,Qh(y,_)?c=null:A!==null&&Qh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=Jd(i,r,aI,null,null,a),kl._currentValue=y),Tc(i,r),Wt(i,r,c,a),r.child;case 6:return i===null&&He&&((i=a=at)&&(a=JI(a,r.pendingProps,Bn),a!==null?(r.stateNode=a,Jt=r,at=null,i=!0):i=!1),i||xs(r)),null;case 13:return Xy(i,r,a);case 4:return Vt(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=zr(r,null,c,a):Wt(i,r,c,a),r.child;case 11:return Hy(i,r,r.type,r.pendingProps,a);case 7:return Wt(i,r,r.pendingProps,a),r.child;case 8:return Wt(i,r,r.pendingProps.children,a),r.child;case 12:return Wt(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Ms(r,r.type,c.value),Wt(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Br(r),y=Qt(y),c=c(y),r.flags|=1,Wt(i,r,c,a),r.child;case 14:return Gy(i,r,r.type,r.pendingProps,a);case 15:return zy(i,r,r.type,r.pendingProps,a);case 19:return jy(i,r,a);case 31:return mI(i,r,a);case 22:return Ky(i,r,a,r.pendingProps);case 24:return Br(r),c=Qt(Nt),i===null?(y=Ld(),y===null&&(y=ot,_=Vd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:c,cache:y},qd(r),Ms(r,Nt,y)):((i.lanes&a)!==0&&(Bd(i,r),pl(r,null,null,a),hl()),y=i.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Ms(r,Nt,c)):(c=_.cache,Ms(r,Nt,c),c!==y.cache&&kd(r,[Nt],a,!0))),Wt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Xi(i){i.flags|=4}function Eh(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(R_())i.flags|=8192;else throw Gr=rc,Od}else i.flags&=-16777217}function t_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!gv(r))if(R_())i.flags|=8192;else throw Gr=rc,Od}function Sc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?bu():536870912,i.lanes|=r,Jo|=r)}function Tl(i,r){if(!He)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function lt(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function yI(i,r,a){var c=r.pendingProps;switch(Nd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(r),null;case 1:return lt(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Ji(Nt),dt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(ko(r)?Xi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Md())),lt(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(Xi(r),_!==null?(lt(r),t_(r,_)):(lt(r),Eh(r,y,null,c,a))):_?_!==i.memoizedState?(Xi(r),lt(r),t_(r,_)):(lt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&Xi(r),lt(r),Eh(r,y,i,c,a)),null;case 27:if(fo(r),a=xe.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&Xi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return lt(r),null}i=pe.current,ko(r)?kg(r):(i=lv(y,c,a),r.stateNode=i,Xi(r))}return lt(r),null;case 5:if(fo(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&Xi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return lt(r),null}if(_=pe.current,ko(r))kg(r);else{var A=Lc(xe.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[wt]=r,_[Ft]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch($t(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Xi(r)}}return lt(r),Eh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&Xi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=xe.current,ko(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=Jt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[wt]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||X_(i.nodeValue,a)),i||xs(r,!0)}else i=Lc(i).createTextNode(c),i[wt]=r,r.stateNode=i}return lt(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=ko(r),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[wt]=r}else Or(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),i=!1}else a=Md(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(wn(r),r):(wn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return lt(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=ko(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[wt]=r}else Or(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),y=!1}else y=Md(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(wn(r),r):(wn(r),null)}return wn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),Sc(r,r.updateQueue),lt(r),null);case 4:return dt(),i===null&&Gh(r.stateNode.containerInfo),lt(r),null;case 10:return Ji(r.type),lt(r),null;case 19:if(ie(Et),c=r.memoizedState,c===null)return lt(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Tl(c,!1);else{if(_t!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=uc(i),_!==null){for(r.flags|=128,Tl(c,!1),i=_.updateQueue,r.updateQueue=i,Sc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Ng(a,i),a=a.sibling;return fe(Et,Et.current&1|2),He&&Ki(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&ln()>Rc&&(r.flags|=128,y=!0,Tl(c,!1),r.lanes=4194304)}else{if(!y)if(i=uc(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,Sc(r,i),Tl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!He)return lt(r),null}else 2*ln()-c.renderingStartTime>Rc&&a!==536870912&&(r.flags|=128,y=!0,Tl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(i=c.last,i!==null?i.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=ln(),i.sibling=null,a=Et.current,fe(Et,y?a&1|2:a&1),He&&Ki(r,c.treeForkCount),i):(lt(r),null);case 22:case 23:return wn(r),zd(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(lt(r),r.subtreeFlags&6&&(r.flags|=8192)):lt(r),a=r.updateQueue,a!==null&&Sc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&ie(Fr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ji(Nt),lt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function _I(i,r){switch(Nd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Ji(Nt),dt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return fo(r),null;case 31:if(r.memoizedState!==null){if(wn(r),r.alternate===null)throw Error(s(340));Or()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(wn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Or()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ie(Et),null;case 4:return dt(),null;case 10:return Ji(r.type),null;case 22:case 23:return wn(r),zd(),i!==null&&ie(Fr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Ji(Nt),null;case 25:return null;default:return null}}function n_(i,r){switch(Nd(r),r.tag){case 3:Ji(Nt),dt();break;case 26:case 27:case 5:fo(r);break;case 4:dt();break;case 31:r.memoizedState!==null&&wn(r);break;case 13:wn(r);break;case 19:ie(Et);break;case 10:Ji(r.type);break;case 22:case 23:wn(r),zd(),i!==null&&ie(Fr);break;case 24:Ji(Nt)}}function El(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var _=a.create,A=a.inst;c=_(),A.destroy=c}a=a.next}while(a!==y)}}catch(w){et(r,r.return,w)}}function Ls(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&i)===i){var A=c.inst,w=A.destroy;if(w!==void 0){A.destroy=void 0,y=r;var V=a,Y=w;try{Y()}catch(j){et(y,V,j)}}}c=c.next}while(c!==_)}}catch(j){et(r,r.return,j)}}function i_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Jg(r,a)}catch(c){et(i,i.return,c)}}}function s_(i,r,a){a.props=Yr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){et(i,r,c)}}function Sl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){et(i,r,y)}}function bi(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){et(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){et(i,r,y)}else a.current=null}function r_(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){et(i,i.return,y)}}function Sh(i,r,a){try{var c=i.stateNode;BI(c,i.type,a,r),c[Ft]=r}catch(y){et(i,i.return,y)}}function o_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&zs(i.type)||i.tag===4}function Ah(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||o_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&zs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ch(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Xn));else if(c!==4&&(c===27&&zs(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Ch(i,r,a),i=i.sibling;i!==null;)Ch(i,r,a),i=i.sibling}function Ac(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&zs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Ac(i,r,a),i=i.sibling;i!==null;)Ac(i,r,a),i=i.sibling}function a_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);$t(r,c,a),r[wt]=i,r[Ft]=a}catch(_){et(i,i.return,_)}}var Zi=!1,Dt=!1,Ih=!1,l_=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function vI(i,r){if(i=i.containerInfo,Yh=zc,i=Tg(i),_d(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,w=-1,V=-1,Y=0,j=0,ne=i,J=null;t:for(;;){for(var $;ne!==a||y!==0&&ne.nodeType!==3||(w=A+y),ne!==_||c!==0&&ne.nodeType!==3||(V=A+c),ne.nodeType===3&&(A+=ne.nodeValue.length),($=ne.firstChild)!==null;)J=ne,ne=$;for(;;){if(ne===i)break t;if(J===a&&++Y===y&&(w=A),J===_&&++j===c&&(V=A),($=ne.nextSibling)!==null)break;ne=J,J=ne.parentNode}ne=$}a=w===-1||V===-1?null:{start:w,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jh={focusedElem:i,selectionRange:a},zc=!1,Gt=r;Gt!==null;)if(r=Gt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Gt=i;else for(;Gt!==null;){switch(r=Gt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var me=Yr(a.type,y);i=c.getSnapshotBeforeUpdate(me,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){et(a,a.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)$h(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":$h(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Gt=i;break}Gt=r.return}}function u_(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:es(i,a),c&4&&El(5,a);break;case 1:if(es(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(A){et(a,a.return,A)}else{var y=Yr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){et(a,a.return,A)}}c&64&&i_(a),c&512&&Sl(a,a.return);break;case 3:if(es(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Jg(i,r)}catch(A){et(a,a.return,A)}}break;case 27:r===null&&c&4&&a_(a);case 26:case 5:es(i,a),r===null&&c&4&&r_(a),c&512&&Sl(a,a.return);break;case 12:es(i,a);break;case 31:es(i,a),c&4&&d_(i,a);break;case 13:es(i,a),c&4&&h_(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=bI.bind(null,a),QI(i,a))));break;case 22:if(c=a.memoizedState!==null||Zi,!c){r=r!==null&&r.memoizedState!==null||Dt,y=Zi;var _=Dt;Zi=c,(Dt=r)&&!_?ts(i,a,(a.subtreeFlags&8772)!==0):es(i,a),Zi=y,Dt=_}break;case 30:break;default:es(i,a)}}function c_(i){var r=i.alternate;r!==null&&(i.alternate=null,c_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&yo(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,pn=!1;function ji(i,r,a){for(a=a.child;a!==null;)f_(i,r,a),a=a.sibling}function f_(i,r,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Jn,a)}catch{}switch(a.tag){case 26:Dt||bi(a,r),ji(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||bi(a,r);var c=pt,y=pn;zs(a.type)&&(pt=a.stateNode,pn=!1),ji(i,r,a),Ml(a.stateNode),pt=c,pn=y;break;case 5:Dt||bi(a,r);case 6:if(c=pt,y=pn,pt=null,ji(i,r,a),pt=c,pn=y,pt!==null)if(pn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(_){et(a,r,_)}else try{pt.removeChild(a.stateNode)}catch(_){et(a,r,_)}break;case 18:pt!==null&&(pn?(i=pt,iv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),ta(i)):iv(pt,a.stateNode));break;case 4:c=pt,y=pn,pt=a.stateNode.containerInfo,pn=!0,ji(i,r,a),pt=c,pn=y;break;case 0:case 11:case 14:case 15:Ls(2,a,r),Dt||Ls(4,a,r),ji(i,r,a);break;case 1:Dt||(bi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&s_(a,r,c)),ji(i,r,a);break;case 21:ji(i,r,a);break;case 22:Dt=(c=Dt)||a.memoizedState!==null,ji(i,r,a),Dt=c;break;default:ji(i,r,a)}}function d_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ta(i)}catch(a){et(r,r.return,a)}}}function h_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ta(i)}catch(a){et(r,r.return,a)}}function TI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new l_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new l_),r;default:throw Error(s(435,i.tag))}}function Cc(i,r){var a=TI(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=NI.bind(null,i,c);c.then(y,y)}})}function mn(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=i,A=r,w=A;e:for(;w!==null;){switch(w.tag){case 27:if(zs(w.type)){pt=w.stateNode,pn=!1;break e}break;case 5:pt=w.stateNode,pn=!1;break e;case 3:case 4:pt=w.stateNode.containerInfo,pn=!0;break e}w=w.return}if(pt===null)throw Error(s(160));f_(_,A,y),pt=null,pn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)p_(r,i),r=r.sibling}var ii=null;function p_(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:mn(r,i),gn(i),c&4&&(Ls(3,i,i.return),El(3,i),Ls(5,i,i.return));break;case 1:mn(r,i),gn(i),c&512&&(Dt||a===null||bi(a,a.return)),c&64&&Zi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=ii;if(mn(r,i),gn(i),c&512&&(Dt||a===null||bi(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[pi]||_[wt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),$t(_,c,a),_[wt]=i,Rt(_),c=_;break e;case"link":var A=pv("link","href",y).get(c+(a.href||""));if(A){for(var w=0;w<A.length;w++)if(_=A[w],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(w,1);break t}}_=y.createElement(c),$t(_,c,a),y.head.appendChild(_);break;case"meta":if(A=pv("meta","content",y).get(c+(a.content||""))){for(w=0;w<A.length;w++)if(_=A[w],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(w,1);break t}}_=y.createElement(c),$t(_,c,a),y.head.appendChild(_);break;default:throw Error(s(468,c))}_[wt]=i,Rt(_),c=_}i.stateNode=c}else mv(y,i.type,i.stateNode);else i.stateNode=hv(y,c,i.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?mv(y,i.type,i.stateNode):hv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Sh(i,i.memoizedProps,a.memoizedProps)}break;case 27:mn(r,i),gn(i),c&512&&(Dt||a===null||bi(a,a.return)),a!==null&&c&4&&Sh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(mn(r,i),gn(i),c&512&&(Dt||a===null||bi(a,a.return)),i.flags&32){y=i.stateNode;try{hn(y,"")}catch(me){et(i,i.return,me)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Sh(i,y,a!==null?a.memoizedProps:y)),c&1024&&(Ih=!0);break;case 6:if(mn(r,i),gn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(me){et(i,i.return,me)}}break;case 3:if(Bc=null,y=ii,ii=Oc(r.containerInfo),mn(r,i),ii=y,gn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ta(r.containerInfo)}catch(me){et(i,i.return,me)}Ih&&(Ih=!1,m_(i));break;case 4:c=ii,ii=Oc(i.stateNode.containerInfo),mn(r,i),gn(i),ii=c;break;case 12:mn(r,i),gn(i);break;case 31:mn(r,i),gn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Cc(i,c)));break;case 13:mn(r,i),gn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wc=ln()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Cc(i,c)));break;case 22:y=i.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,Y=Zi,j=Dt;if(Zi=Y||y,Dt=j||V,mn(r,i),Dt=j,Zi=Y,gn(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||V||Zi||Dt||Jr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(_=V.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{w=V.stateNode;var ne=V.memoizedProps.style,J=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(me){et(V,V.return,me)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(me){et(V,V.return,me)}}}else if(r.tag===18){if(a===null){V=r;try{var $=V.stateNode;y?sv($,!0):sv(V.stateNode,!1)}catch(me){et(V,V.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Cc(i,a))));break;case 19:mn(r,i),gn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Cc(i,c)));break;case 30:break;case 21:break;default:mn(r,i),gn(i)}}function gn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(o_(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=Ah(i);Ac(i,_,y);break;case 5:var A=a.stateNode;a.flags&32&&(hn(A,""),a.flags&=-33);var w=Ah(i);Ac(i,w,A);break;case 3:case 4:var V=a.stateNode.containerInfo,Y=Ah(i);Ch(i,Y,V);break;default:throw Error(s(161))}}catch(j){et(i,i.return,j)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function m_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;m_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function es(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)u_(i,r.alternate,r),r=r.sibling}function Jr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ls(4,r,r.return),Jr(r);break;case 1:bi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&s_(r,r.return,a),Jr(r);break;case 27:Ml(r.stateNode);case 26:case 5:bi(r,r.return),Jr(r);break;case 22:r.memoizedState===null&&Jr(r);break;case 30:Jr(r);break;default:Jr(r)}i=i.sibling}}function ts(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:ts(y,_,a),El(4,_);break;case 1:if(ts(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){et(c,c.return,Y)}if(c=_,y=c.updateQueue,y!==null){var w=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)Yg(V[y],w)}catch(Y){et(c,c.return,Y)}}a&&A&64&&i_(_),Sl(_,_.return);break;case 27:a_(_);case 26:case 5:ts(y,_,a),a&&c===null&&A&4&&r_(_),Sl(_,_.return);break;case 12:ts(y,_,a);break;case 31:ts(y,_,a),a&&A&4&&d_(y,_);break;case 13:ts(y,_,a),a&&A&4&&h_(y,_);break;case 22:_.memoizedState===null&&ts(y,_,a),Sl(_,_.return);break;case 30:break;default:ts(y,_,a)}r=r.sibling}}function wh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&ll(a))}function Rh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&ll(i))}function si(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)g_(i,r,a,c),r=r.sibling}function g_(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:si(i,r,a,c),y&2048&&El(9,r);break;case 1:si(i,r,a,c);break;case 3:si(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&ll(i)));break;case 12:if(y&2048){si(i,r,a,c),i=r.stateNode;try{var _=r.memoizedProps,A=_.id,w=_.onPostCommit;typeof w=="function"&&w(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){et(r,r.return,V)}}else si(i,r,a,c);break;case 31:si(i,r,a,c);break;case 13:si(i,r,a,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?si(i,r,a,c):Al(i,r):_._visibility&2?si(i,r,a,c):(_._visibility|=2,zo(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&wh(A,r);break;case 24:si(i,r,a,c),y&2048&&Rh(r.alternate,r);break;default:si(i,r,a,c)}}function zo(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,A=r,w=a,V=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:zo(_,A,w,V,y),El(8,A);break;case 23:break;case 22:var j=A.stateNode;A.memoizedState!==null?j._visibility&2?zo(_,A,w,V,y):Al(_,A):(j._visibility|=2,zo(_,A,w,V,y)),y&&Y&2048&&wh(A.alternate,A);break;case 24:zo(_,A,w,V,y),y&&Y&2048&&Rh(A.alternate,A);break;default:zo(_,A,w,V,y)}r=r.sibling}}function Al(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:Al(a,c),y&2048&&wh(c.alternate,c);break;case 24:Al(a,c),y&2048&&Rh(c.alternate,c);break;default:Al(a,c)}r=r.sibling}}var Cl=8192;function Ko(i,r,a){if(i.subtreeFlags&Cl)for(i=i.child;i!==null;)y_(i,r,a),i=i.sibling}function y_(i,r,a){switch(i.tag){case 26:Ko(i,r,a),i.flags&Cl&&i.memoizedState!==null&&ow(a,ii,i.memoizedState,i.memoizedProps);break;case 5:Ko(i,r,a);break;case 3:case 4:var c=ii;ii=Oc(i.stateNode.containerInfo),Ko(i,r,a),ii=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Cl,Cl=16777216,Ko(i,r,a),Cl=c):Ko(i,r,a));break;default:Ko(i,r,a)}}function __(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Il(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Gt=c,T_(c,i)}__(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)v_(i),i=i.sibling}function v_(i){switch(i.tag){case 0:case 11:case 15:Il(i),i.flags&2048&&Ls(9,i,i.return);break;case 3:Il(i);break;case 12:Il(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Ic(i)):Il(i);break;default:Il(i)}}function Ic(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Gt=c,T_(c,i)}__(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ls(8,r,r.return),Ic(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Ic(r));break;default:Ic(r)}i=i.sibling}}function T_(i,r){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Ls(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ll(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Gt=c;else e:for(a=i;Gt!==null;){c=Gt;var y=c.sibling,_=c.return;if(c_(c),c===a){Gt=null;break e}if(y!==null){y.return=_,Gt=y;break e}Gt=_}}}var EI={getCacheForType:function(i){var r=Qt(Nt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Qt(Nt).controller.signal}},SI=typeof WeakMap=="function"?WeakMap:Map,We=0,ot=null,Ve=null,Le=0,je=0,Rn=null,Os=!1,Yo=!1,bh=!1,ns=0,_t=0,qs=0,Qr=0,Nh=0,bn=0,Jo=0,wl=null,yn=null,xh=!1,wc=0,E_=0,Rc=1/0,bc=null,Bs=null,Lt=0,Fs=null,Qo=null,is=0,Mh=0,Dh=null,S_=null,Rl=0,Ph=null;function Nn(){return(We&2)!==0&&Le!==0?Le&-Le:W.T!==null?qh():Nu()}function A_(){if(bn===0)if((Le&536870912)===0||He){var i=Er;Er<<=1,(Er&3932160)===0&&(Er=262144),bn=i}else bn=536870912;return i=In.current,i!==null&&(i.flags|=32),bn}function _n(i,r,a){(i===ot&&(je===2||je===9)||i.cancelPendingCommit!==null)&&(Wo(i,0),Hs(i,Le,bn,!1)),Sr(i,a),((We&2)===0||i!==ot)&&(i===ot&&((We&2)===0&&(Qr|=a),_t===4&&Hs(i,Le,bn,!1)),Ni(i))}function C_(i,r,a){if((We&6)!==0)throw Error(s(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||Qn(i,r),y=c?II(i,r):Vh(i,r,!0),_=c;do{if(y===0){Yo&&!c&&Hs(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!AI(a)){y=Vh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var w=i;y=wl;var V=w.current.memoizedState.isDehydrated;if(V&&(Wo(w,A).flags|=256),A=Vh(w,A,!1),A!==2){if(bh&&!V){w.errorRecoveryDisabledLanes|=_,Qr|=_,y=4;break e}_=yn,yn=y,_!==null&&(yn===null?yn=_:yn.push.apply(yn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){Wo(i,0),Hs(i,r,0,!0);break}e:{switch(c=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Hs(c,r,bn,!Os);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=wc+300-ln(),10<y)){if(Hs(c,r,bn,!Os),fi(c,0,!0)!==0)break e;is=r,c.timeoutHandle=tv(I_.bind(null,c,a,yn,bc,xh,r,bn,Qr,Jo,Os,_,"Throttled",-0,0),y);break e}I_(c,a,yn,bc,xh,r,bn,Qr,Jo,Os,_,null,-0,0)}}break}while(!0);Ni(i)}function I_(i,r,a,c,y,_,A,w,V,Y,j,ne,J,$){if(i.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},y_(r,_,ne);var me=(_&62914560)===_?wc-ln():(_&4194048)===_?E_-ln():0;if(me=aw(ne,me),me!==null){is=_,i.cancelPendingCommit=me(P_.bind(null,i,r,_,a,c,y,A,w,V,j,ne,null,J,$)),Hs(i,_,A,!Y);return}}P_(i,r,_,a,c,y,A,w,V)}function AI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!An(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hs(i,r,a,c){r&=~Nh,r&=~Qr,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var _=31-vt(y),A=1<<_;c[_]=-1,y&=~A}a!==0&&Ar(i,a,r)}function Nc(){return(We&6)===0?(bl(0),!1):!0}function kh(){if(Ve!==null){if(je===0)var i=Ve.return;else i=Ve,Yi=qr=null,$d(i),qo=null,cl=0,i=Ve;for(;i!==null;)n_(i.alternate,i),i=i.return;Ve=null}}function Wo(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,GI(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),is=0,kh(),ot=i,Ve=a=zi(i.current,null),Le=r,je=0,Rn=null,Os=!1,Yo=Qn(i,r),bh=!1,Jo=bn=Nh=Qr=qs=_t=0,yn=wl=null,xh=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-vt(c),_=1<<y;r|=i[y],c&=~_}return ns=r,$u(),a}function w_(i,r){Ne=null,W.H=_l,r===Oo||r===sc?(r=Hg(),je=3):r===Od?(r=Hg(),je=4):je=r===dh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,Ve===null&&(_t=1,_c(i,Ln(r,i.current)))}function R_(){var i=In.current;return i===null?!0:(Le&4194048)===Le?Fn===null:(Le&62914560)===Le||(Le&536870912)!==0?i===Fn:!1}function b_(){var i=W.H;return W.H=_l,i===null?_l:i}function N_(){var i=W.A;return W.A=EI,i}function xc(){_t=4,Os||(Le&4194048)!==Le&&In.current!==null||(Yo=!0),(qs&134217727)===0&&(Qr&134217727)===0||ot===null||Hs(ot,Le,bn,!1)}function Vh(i,r,a){var c=We;We|=2;var y=b_(),_=N_();(ot!==i||Le!==r)&&(bc=null,Wo(i,r)),r=!1;var A=_t;e:do try{if(je!==0&&Ve!==null){var w=Ve,V=Rn;switch(je){case 8:kh(),A=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(r=!0);var Y=je;if(je=0,Rn=null,$o(i,w,V,Y),a&&Yo){A=0;break e}break;default:Y=je,je=0,Rn=null,$o(i,w,V,Y)}}CI(),A=_t;break}catch(j){w_(i,j)}while(!0);return r&&i.shellSuspendCounter++,Yi=qr=null,We=c,W.H=y,W.A=_,Ve===null&&(ot=null,Le=0,$u()),A}function CI(){for(;Ve!==null;)x_(Ve)}function II(i,r){var a=We;We|=2;var c=b_(),y=N_();ot!==i||Le!==r?(bc=null,Rc=ln()+500,Wo(i,r)):Yo=Qn(i,r);e:do try{if(je!==0&&Ve!==null){r=Ve;var _=Rn;t:switch(je){case 1:je=0,Rn=null,$o(i,r,_,1);break;case 2:case 9:if(Bg(_)){je=0,Rn=null,M_(r);break}r=function(){je!==2&&je!==9||ot!==i||(je=7),Ni(i)},_.then(r,r);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:Bg(_)?(je=0,Rn=null,M_(r)):(je=0,Rn=null,$o(i,r,_,7));break;case 5:var A=null;switch(Ve.tag){case 26:A=Ve.memoizedState;case 5:case 27:var w=Ve;if(A?gv(A):w.stateNode.complete){je=0,Rn=null;var V=w.sibling;if(V!==null)Ve=V;else{var Y=w.return;Y!==null?(Ve=Y,Mc(Y)):Ve=null}break t}}je=0,Rn=null,$o(i,r,_,5);break;case 6:je=0,Rn=null,$o(i,r,_,6);break;case 8:kh(),_t=6;break e;default:throw Error(s(462))}}wI();break}catch(j){w_(i,j)}while(!0);return Yi=qr=null,W.H=c,W.A=y,We=a,Ve!==null?0:(ot=null,Le=0,$u(),_t)}function wI(){for(;Ve!==null&&!fd();)x_(Ve)}function x_(i){var r=e_(i.alternate,i,ns);i.memoizedProps=i.pendingProps,r===null?Mc(i):Ve=r}function M_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Qy(a,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=Qy(a,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:$d(r);default:n_(a,r),r=Ve=Ng(r,ns),r=e_(a,r,ns)}i.memoizedProps=i.pendingProps,r===null?Mc(i):Ve=r}function $o(i,r,a,c){Yi=qr=null,$d(r),qo=null,cl=0;var y=r.return;try{if(pI(i,y,r,a,Le)){_t=1,_c(i,Ln(a,i.current)),Ve=null;return}}catch(_){if(y!==null)throw Ve=y,_;_t=1,_c(i,Ln(a,i.current)),Ve=null;return}r.flags&32768?(He||c===1?i=!0:Yo||(Le&536870912)!==0?i=!1:(Os=i=!0,(c===2||c===9||c===3||c===6)&&(c=In.current,c!==null&&c.tag===13&&(c.flags|=16384))),D_(r,i)):Mc(r)}function Mc(i){var r=i;do{if((r.flags&32768)!==0){D_(r,Os);return}i=r.return;var a=yI(r.alternate,r,ns);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=i}while(r!==null);_t===0&&(_t=5)}function D_(i,r){do{var a=_I(i.alternate,i);if(a!==null){a.flags&=32767,Ve=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=a}while(i!==null);_t=6,Ve=null}function P_(i,r,a,c,y,_,A,w,V){i.cancelPendingCommit=null;do Dc();while(Lt!==0);if((We&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Ad,pd(i,a,_,A,w,V),i===ot&&(Ve=ot=null,Le=0),Qo=r,Fs=i,is=a,Mh=_,Dh=y,S_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,xI(_s,function(){return O_(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,y=le.p,le.p=2,A=We,We|=4;try{vI(i,r,a)}finally{We=A,le.p=y,W.T=c}}Lt=1,k_(),V_(),U_()}}function k_(){if(Lt===1){Lt=0;var i=Fs,r=Qo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var c=le.p;le.p=2;var y=We;We|=4;try{p_(r,i);var _=Jh,A=Tg(i.containerInfo),w=_.focusedElem,V=_.selectionRange;if(A!==w&&w&&w.ownerDocument&&vg(w.ownerDocument.documentElement,w)){if(V!==null&&_d(w)){var Y=V.start,j=V.end;if(j===void 0&&(j=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(j,w.value.length);else{var ne=w.ownerDocument||document,J=ne&&ne.defaultView||window;if(J.getSelection){var $=J.getSelection(),me=w.textContent.length,Ee=Math.min(V.start,me),rt=V.end===void 0?Ee:Math.min(V.end,me);!$.extend&&Ee>rt&&(A=rt,rt=Ee,Ee=A);var H=_g(w,Ee),O=_g(w,rt);if(H&&O&&($.rangeCount!==1||$.anchorNode!==H.node||$.anchorOffset!==H.offset||$.focusNode!==O.node||$.focusOffset!==O.offset)){var K=ne.createRange();K.setStart(H.node,H.offset),$.removeAllRanges(),Ee>rt?($.addRange(K),$.extend(O.node,O.offset)):(K.setEnd(O.node,O.offset),$.addRange(K))}}}}for(ne=[],$=w;$=$.parentNode;)$.nodeType===1&&ne.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var te=ne[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}zc=!!Yh,Jh=Yh=null}finally{We=y,le.p=c,W.T=a}}i.current=r,Lt=2}}function V_(){if(Lt===2){Lt=0;var i=Fs,r=Qo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var c=le.p;le.p=2;var y=We;We|=4;try{u_(i,r.alternate,r)}finally{We=y,le.p=c,W.T=a}}Lt=3}}function U_(){if(Lt===4||Lt===3){Lt=0,Su();var i=Fs,r=Qo,a=is,c=S_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Lt=5:(Lt=0,Qo=Fs=null,L_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Bs=null),Bi(a),r=r.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Jn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=W.T,y=le.p,le.p=2,W.T=null;try{for(var _=i.onRecoverableError,A=0;A<c.length;A++){var w=c[A];_(w.value,{componentStack:w.stack})}}finally{W.T=r,le.p=y}}(is&3)!==0&&Dc(),Ni(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Ph?Rl++:(Rl=0,Ph=i):Rl=0,bl(0)}}function L_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,ll(r)))}function Dc(){return k_(),V_(),U_(),O_()}function O_(){if(Lt!==5)return!1;var i=Fs,r=Mh;Mh=0;var a=Bi(is),c=W.T,y=le.p;try{le.p=32>a?32:a,W.T=null,a=Dh,Dh=null;var _=Fs,A=is;if(Lt=0,Qo=Fs=null,is=0,(We&6)!==0)throw Error(s(331));var w=We;if(We|=4,v_(_.current),g_(_,_.current,A,a),We=w,bl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Jn,_)}catch{}return!0}finally{le.p=y,W.T=c,L_(i,r)}}function q_(i,r,a){r=Ln(a,r),r=fh(i.stateNode,r,2),i=ks(i,r,2),i!==null&&(Sr(i,2),Ni(i))}function et(i,r,a){if(i.tag===3)q_(i,i,a);else for(;r!==null;){if(r.tag===3){q_(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Bs===null||!Bs.has(c))){i=Ln(a,i),a=By(2),c=ks(r,a,2),c!==null&&(Fy(a,c,r,i),Sr(c,2),Ni(c));break}}r=r.return}}function Uh(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new SI;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(bh=!0,y.add(a),i=RI.bind(null,i,r,a),r.then(i,i))}function RI(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ot===i&&(Le&a)===a&&(_t===4||_t===3&&(Le&62914560)===Le&&300>ln()-wc?(We&2)===0&&Wo(i,0):Nh|=a,Jo===Le&&(Jo=0)),Ni(i)}function B_(i,r){r===0&&(r=bu()),i=Ur(i,r),i!==null&&(Sr(i,r),Ni(i))}function bI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),B_(i,a)}function NI(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),B_(i,a)}function xI(i,r){return Ut(i,r)}var Pc=null,Xo=null,Lh=!1,kc=!1,Oh=!1,Gs=0;function Ni(i){i!==Xo&&i.next===null&&(Xo===null?Pc=Xo=i:Xo=Xo.next=i),kc=!0,Lh||(Lh=!0,DI())}function bl(i,r){if(!Oh&&kc){Oh=!0;do for(var a=!1,c=Pc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,w=c.pingedLanes;_=(1<<31-vt(42|i)+1)-1,_&=y&~(A&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,z_(c,_))}else _=Le,_=fi(c,c===ot?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Qn(c,_)||(a=!0,z_(c,_));c=c.next}while(a);Oh=!1}}function MI(){F_()}function F_(){kc=Lh=!1;var i=0;Gs!==0&&HI()&&(i=Gs);for(var r=ln(),a=null,c=Pc;c!==null;){var y=c.next,_=H_(c,r);_===0?(c.next=null,a===null?Pc=y:a.next=y,y===null&&(Xo=a)):(a=c,(i!==0||(_&3)!==0)&&(kc=!0)),c=y}Lt!==0&&Lt!==5||bl(i),Gs!==0&&(Gs=0)}function H_(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-vt(_),w=1<<A,V=y[A];V===-1?((w&a)===0||(w&c)!==0)&&(y[A]=hd(w,r)):V<=r&&(i.expiredLanes|=w),_&=~w}if(r=ot,a=Le,a=fi(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(je===2||je===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&ys(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Qn(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&ys(c),Bi(a)){case 2:case 8:a=Oa;break;case 32:a=_s;break;case 268435456:a=Au;break;default:a=_s}return c=G_.bind(null,i),a=Ut(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&ys(c),i.callbackPriority=2,i.callbackNode=null,2}function G_(i,r){if(Lt!==0&&Lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Dc()&&i.callbackNode!==a)return null;var c=Le;return c=fi(i,i===ot?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(C_(i,c,r),H_(i,ln()),i.callbackNode!=null&&i.callbackNode===a?G_.bind(null,i):null)}function z_(i,r){if(Dc())return null;C_(i,r,!0)}function DI(){zI(function(){(We&6)!==0?Ut(La,MI):F_()})}function qh(){if(Gs===0){var i=Uo;i===0&&(i=ui,ui<<=1,(ui&261888)===0&&(ui=256)),Gs=i}return Gs}function K_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Eo(""+i)}function Y_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function PI(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var _=K_((y[Ft]||null).action),A=c.submitter;A&&(r=(r=A[Ft]||null)?K_(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var w=new Si("action","action",null,c,y);i.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Gs!==0){var V=A?Y_(y,A):new FormData(y);rh(a,{pending:!0,data:V,method:y.method,action:_},null,V)}}else typeof _=="function"&&(w.preventDefault(),V=A?Y_(y,A):new FormData(y),rh(a,{pending:!0,data:V,method:y.method,action:_},_,V))},currentTarget:y}]})}}for(var Bh=0;Bh<Sd.length;Bh++){var Fh=Sd[Bh],kI=Fh.toLowerCase(),VI=Fh[0].toUpperCase()+Fh.slice(1);ni(kI,"on"+VI)}ni(Ag,"onAnimationEnd"),ni(Cg,"onAnimationIteration"),ni(Ig,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(XC,"onTransitionRun"),ni(ZC,"onTransitionStart"),ni(jC,"onTransitionCancel"),ni(wg,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function J_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var w=c[A],V=w.instance,Y=w.currentTarget;if(w=w.listener,V!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=Y;try{_(y)}catch(j){Wu(j)}y.currentTarget=null,_=V}else for(A=0;A<c.length;A++){if(w=c[A],V=w.instance,Y=w.currentTarget,w=w.listener,V!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=Y;try{_(y)}catch(j){Wu(j)}y.currentTarget=null,_=V}}}}function Ue(i,r){var a=r[go];a===void 0&&(a=r[go]=new Set);var c=i+"__bubble";a.has(c)||(Q_(r,i,2,!1),a.add(c))}function Hh(i,r,a){var c=0;r&&(c|=4),Q_(a,i,c,r)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function Gh(i){if(!i[Vc]){i[Vc]=!0,Fa.forEach(function(a){a!=="selectionchange"&&(UI.has(a)||Hh(a,!1,i),Hh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Vc]||(r[Vc]=!0,Hh("selectionchange",!1,r))}}function Q_(i,r,a,c){switch(Av(r)){case 2:var y=cw;break;case 8:y=fw;break;default:y=sp}a=y.bind(null,r,a,i),y=void 0,!br||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function zh(i,r,a,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var w=c.stateNode.containerInfo;if(w===y)break;if(A===4)for(A=c.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;w!==null;){if(A=mi(w),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){c=_=A;continue e}w=w.parentNode}}c=c.return}Cs(function(){var Y=_,j=Pn(a),ne=[];e:{var J=Rg.get(i);if(J!==void 0){var $=Si,me=i;switch(i){case"keypress":if(xr(a)===0)break e;case"keydown":case"keyup":$=Yu;break;case"focusin":me="focus",$=Dr;break;case"focusout":me="blur",$=Dr;break;case"beforeblur":case"afterblur":$=Dr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=E;break;case Ag:case Cg:case Ig:$=qu;break;case wg:$=R;break;case"scroll":case"scrollend":$=ja;break;case"wheel":$=Q;break;case"copy":case"cut":case"paste":$=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Gi;break;case"toggle":case"beforetoggle":$=be}var Ee=(r&4)!==0,rt=!Ee&&(i==="scroll"||i==="scrollend"),H=Ee?J!==null?J+"Capture":null:J;Ee=[];for(var O=Y,K;O!==null;){var te=O;if(K=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||K===null||H===null||(te=Zn(O,H),te!=null&&Ee.push(xl(O,te,K))),rt)break;O=O.return}0<Ee.length&&(J=new $(J,me,null,a,j),ne.push({event:J,listeners:Ee}))}}if((r&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",J&&a!==$a&&(me=a.relatedTarget||a.fromElement)&&(mi(me)||me[hi]))break e;if(($||J)&&(J=j.window===j?j:(J=j.ownerDocument)?J.defaultView||J.parentWindow:window,$?(me=a.relatedTarget||a.toElement,$=Y,me=me?mi(me):null,me!==null&&(rt=l(me),Ee=me.tag,me!==rt||Ee!==5&&Ee!==27&&Ee!==6)&&(me=null)):($=null,me=Y),$!==me)){if(Ee=el,te="onMouseLeave",H="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=Gi,te="onPointerLeave",H="onPointerEnter",O="pointer"),rt=$==null?J:En($),K=me==null?J:En(me),J=new Ee(te,O+"leave",$,a,j),J.target=rt,J.relatedTarget=K,te=null,mi(j)===Y&&(Ee=new Ee(H,O+"enter",me,a,j),Ee.target=K,Ee.relatedTarget=rt,te=Ee),rt=te,$&&me)t:{for(Ee=LI,H=$,O=me,K=0,te=H;te;te=Ee(te))K++;te=0;for(var ve=O;ve;ve=Ee(ve))te++;for(;0<K-te;)H=Ee(H),K--;for(;0<te-K;)O=Ee(O),te--;for(;K--;){if(H===O||O!==null&&H===O.alternate){Ee=H;break t}H=Ee(H),O=Ee(O)}Ee=null}else Ee=null;$!==null&&W_(ne,J,$,Ee,!1),me!==null&&rt!==null&&W_(ne,rt,me,Ee,!0)}}e:{if(J=Y?En(Y):window,$=J.nodeName&&J.nodeName.toLowerCase(),$==="select"||$==="input"&&J.type==="file")var Ke=dg;else if(cg(J))if(hg)Ke=QC;else{Ke=YC;var ge=KC}else $=J.nodeName,!$||$.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&To(Y.elementType)&&(Ke=dg):Ke=JC;if(Ke&&(Ke=Ke(i,Y))){fg(ne,Ke,a,j);break e}ge&&ge(i,J,Y),i==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&Ja(J,"number",J.value)}switch(ge=Y?En(Y):window,i){case"focusin":(cg(ge)||ge.contentEditable==="true")&&(bo=ge,vd=Y,rl=null);break;case"focusout":rl=vd=bo=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Eg(ne,a,j);break;case"selectionchange":if($C)break;case"keydown":case"keyup":Eg(ne,a,j)}var Me;if(Qe)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Ro?Pr(i,a)&&(Oe="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(Ii&&a.locale!=="ko"&&(Ro||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Ro&&(Me=Za()):(Ei=j,Xa="value"in Ei?Ei.value:Ei.textContent,Ro=!0)),ge=Uc(Y,Oe),0<ge.length&&(Oe=new Ci(Oe,i,null,a,j),ne.push({event:Oe,listeners:ge}),Me?Oe.data=Me:(Me=wo(a),Me!==null&&(Oe.data=Me)))),(Me=Vn?FC(i,a):HC(i,a))&&(Oe=Uc(Y,"onBeforeInput"),0<Oe.length&&(ge=new Ci("onBeforeInput","beforeinput",null,a,j),ne.push({event:ge,listeners:Oe}),ge.data=Me)),PI(ne,i,Y,a,j)}J_(ne,r)})}function xl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Uc(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Zn(i,a),y!=null&&c.unshift(xl(i,y,_)),y=Zn(i,r),y!=null&&c.push(xl(i,y,_))),i.tag===3)return c;i=i.return}return[]}function LI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function W_(i,r,a,c,y){for(var _=r._reactName,A=[];a!==null&&a!==c;){var w=a,V=w.alternate,Y=w.stateNode;if(w=w.tag,V!==null&&V===c)break;w!==5&&w!==26&&w!==27||Y===null||(V=Y,y?(Y=Zn(a,_),Y!=null&&A.unshift(xl(a,Y,V))):y||(Y=Zn(a,_),Y!=null&&A.push(xl(a,Y,V)))),a=a.return}A.length!==0&&i.push({event:r,listeners:A})}var OI=/\r\n?/g,qI=/\u0000|\uFFFD/g;function $_(i){return(typeof i=="string"?i:""+i).replace(OI,`
`).replace(qI,"")}function X_(i,r){return r=$_(r),$_(i)===r}function st(i,r,a,c,y,_){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||hn(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&hn(i,""+c);break;case"className":Sn(i,"class",c);break;case"tabIndex":Sn(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(i,a,c);break;case"style":Wa(i,c,_);break;case"data":if(r!=="object"){Sn(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Eo(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&st(i,r,"name",y.name,y,null),st(i,r,"formEncType",y.formEncType,y,null),st(i,r,"formMethod",y.formMethod,y,null),st(i,r,"formTarget",y.formTarget,y,null)):(st(i,r,"encType",y.encType,y,null),st(i,r,"method",y.method,y,null),st(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Eo(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Xn);break;case"onScroll":c!=null&&Ue("scroll",i);break;case"onScrollEnd":c!=null&&Ue("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Eo(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Ue("beforetoggle",i),Ue("toggle",i),_o(i,"popover",c);break;case"xlinkActuate":bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":bt(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":bt(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":bt(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":bt(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":_o(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Uu.get(a)||a,_o(i,a,c))}}function Kh(i,r,a,c,y,_){switch(a){case"style":Wa(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?hn(i,c):(typeof c=="number"||typeof c=="bigint")&&hn(i,""+c);break;case"onScroll":c!=null&&Ue("scroll",i);break;case"onScrollEnd":c!=null&&Ue("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ha.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[Ft]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):_o(i,a,c)}}}function $t(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",i),Ue("load",i);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:st(i,r,_,A,a,null)}}y&&st(i,r,"srcSet",a.srcSet,a,null),c&&st(i,r,"src",a.src,a,null);return;case"input":Ue("invalid",i);var w=_=A=y=null,V=null,Y=null;for(c in a)if(a.hasOwnProperty(c)){var j=a[c];if(j!=null)switch(c){case"name":y=j;break;case"type":A=j;break;case"checked":V=j;break;case"defaultChecked":Y=j;break;case"value":_=j;break;case"defaultValue":w=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,r));break;default:st(i,r,c,j,a,null)}}Pu(i,_,w,V,Y,A,y,!1);return;case"select":Ue("invalid",i),c=A=_=null;for(y in a)if(a.hasOwnProperty(y)&&(w=a[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":A=w;break;case"multiple":c=w;default:st(i,r,y,w,a,null)}r=_,a=A,i.multiple=!!c,r!=null?Ts(i,!!c,r,!1):a!=null&&Ts(i,!!c,a,!0);return;case"textarea":Ue("invalid",i),_=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(w=a[A],w!=null))switch(A){case"value":c=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:st(i,r,A,w,a,null)}Es(i,c,y,_);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(c=a[V],c!=null))switch(V){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(i,r,V,c,a,null)}return;case"dialog":Ue("beforetoggle",i),Ue("toggle",i),Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":Ue("load",i);break;case"video":case"audio":for(c=0;c<Nl.length;c++)Ue(Nl[c],i);break;case"image":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"embed":case"source":case"link":Ue("error",i),Ue("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(c=a[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:st(i,r,Y,c,a,null)}return;default:if(To(r)){for(j in a)a.hasOwnProperty(j)&&(c=a[j],c!==void 0&&Kh(i,r,j,c,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null&&st(i,r,w,c,a,null))}function BI(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,w=null,V=null,Y=null,j=null;for($ in a){var ne=a[$];if(a.hasOwnProperty($)&&ne!=null)switch($){case"checked":break;case"value":break;case"defaultValue":V=ne;default:c.hasOwnProperty($)||st(i,r,$,null,c,ne)}}for(var J in c){var $=c[J];if(ne=a[J],c.hasOwnProperty(J)&&($!=null||ne!=null))switch(J){case"type":_=$;break;case"name":y=$;break;case"checked":Y=$;break;case"defaultChecked":j=$;break;case"value":A=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==ne&&st(i,r,J,$,c,ne)}}vo(i,A,w,V,Y,j,_,y);return;case"select":$=A=w=J=null;for(_ in a)if(V=a[_],a.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":$=V;default:c.hasOwnProperty(_)||st(i,r,_,null,c,V)}for(y in c)if(_=c[y],V=a[y],c.hasOwnProperty(y)&&(_!=null||V!=null))switch(y){case"value":J=_;break;case"defaultValue":w=_;break;case"multiple":A=_;default:_!==V&&st(i,r,y,_,c,V)}r=w,a=A,c=$,J!=null?Ts(i,!!a,J,!1):!!c!=!!a&&(r!=null?Ts(i,!!a,r,!0):Ts(i,!!a,a?[]:"",!1));return;case"textarea":$=J=null;for(w in a)if(y=a[w],a.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:st(i,r,w,null,c,y)}for(A in c)if(y=c[A],_=a[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":J=y;break;case"defaultValue":$=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&st(i,r,A,y,c,_)}ku(i,J,$);return;case"option":for(var me in a)if(J=a[me],a.hasOwnProperty(me)&&J!=null&&!c.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:st(i,r,me,null,c,J)}for(V in c)if(J=c[V],$=a[V],c.hasOwnProperty(V)&&J!==$&&(J!=null||$!=null))switch(V){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:st(i,r,V,J,c,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)J=a[Ee],a.hasOwnProperty(Ee)&&J!=null&&!c.hasOwnProperty(Ee)&&st(i,r,Ee,null,c,J);for(Y in c)if(J=c[Y],$=a[Y],c.hasOwnProperty(Y)&&J!==$&&(J!=null||$!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:st(i,r,Y,J,c,$)}return;default:if(To(r)){for(var rt in a)J=a[rt],a.hasOwnProperty(rt)&&J!==void 0&&!c.hasOwnProperty(rt)&&Kh(i,r,rt,void 0,c,J);for(j in c)J=c[j],$=a[j],!c.hasOwnProperty(j)||J===$||J===void 0&&$===void 0||Kh(i,r,j,J,c,$);return}}for(var H in a)J=a[H],a.hasOwnProperty(H)&&J!=null&&!c.hasOwnProperty(H)&&st(i,r,H,null,c,J);for(ne in c)J=c[ne],$=a[ne],!c.hasOwnProperty(ne)||J===$||J==null&&$==null||st(i,r,ne,J,c,$)}function Z_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,A=y.initiatorType,w=y.duration;if(_&&w&&Z_(A)){for(A=0,w=y.responseEnd,c+=1;c<a.length;c++){var V=a[c],Y=V.startTime;if(Y>w)break;var j=V.transferSize,ne=V.initiatorType;j&&Z_(ne)&&(V=V.responseEnd,A+=j*(V<w?1:(w-Y)/(V-Y)))}if(--c,r+=8*(_+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Yh=null,Jh=null;function Lc(i){return i.nodeType===9?i:i.ownerDocument}function j_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ev(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Qh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Wh=null;function HI(){var i=window.event;return i&&i.type==="popstate"?i===Wh?!1:(Wh=i,!0):(Wh=null,!1)}var tv=typeof setTimeout=="function"?setTimeout:void 0,GI=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,zI=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(i){return nv.resolve(null).then(i).catch(KI)}:tv;function KI(i){setTimeout(function(){throw i})}function zs(i){return i==="head"}function iv(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),ta(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Ml(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Ml(a);for(var _=a.firstChild;_;){var A=_.nextSibling,w=_.nodeName;_[pi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&Ml(i.ownerDocument.body);a=y}while(a);ta(r)}function sv(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function $h(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$h(a),yo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function YI(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[pi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Hn(i.nextSibling),i===null)break}return null}function JI(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Hn(i.nextSibling),i===null))return null;return i}function rv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Hn(i.nextSibling),i===null))return null;return i}function Xh(i){return i.data==="$?"||i.data==="$~"}function Zh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function QI(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Hn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var jh=null;function ov(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Hn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function av(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function lv(i,r,a){switch(r=Lc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Ml(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);yo(i)}var Gn=new Map,uv=new Set;function Oc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ss=le.d;le.d={f:WI,r:$I,D:XI,C:ZI,L:jI,m:ew,X:nw,S:tw,M:iw};function WI(){var i=ss.f(),r=Nc();return i||r}function $I(i){var r=Dn(i);r!==null&&r.tag===5&&r.type==="form"?wy(r):ss.r(i)}var Zo=typeof document>"u"?null:document;function cv(i,r,a){var c=Zo;if(c&&typeof r=="string"&&r){var y=dn(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),uv.has(y)||(uv.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),$t(r,"link",i),Rt(r),c.head.appendChild(r)))}}function XI(i){ss.D(i),cv("dns-prefetch",i,null)}function ZI(i,r){ss.C(i,r),cv("preconnect",i,r)}function jI(i,r,a){ss.L(i,r,a);var c=Zo;if(c&&i&&r){var y='link[rel="preload"][as="'+dn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+dn(a.imageSizes)+'"]')):y+='[href="'+dn(i)+'"]';var _=y;switch(r){case"style":_=jo(i);break;case"script":_=ea(i)}Gn.has(_)||(i=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Gn.set(_,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(Dl(_))||r==="script"&&c.querySelector(Pl(_))||(r=c.createElement("link"),$t(r,"link",i),Rt(r),c.head.appendChild(r)))}}function ew(i,r){ss.m(i,r);var a=Zo;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+dn(c)+'"][href="'+dn(i)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ea(i)}if(!Gn.has(_)&&(i=T({rel:"modulepreload",href:i},r),Gn.set(_,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(_)))return}c=a.createElement("link"),$t(c,"link",i),Rt(c),a.head.appendChild(c)}}}function tw(i,r,a){ss.S(i,r,a);var c=Zo;if(c&&i){var y=gi(c).hoistableStyles,_=jo(i);r=r||"default";var A=y.get(_);if(!A){var w={loading:0,preload:null};if(A=c.querySelector(Dl(_)))w.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Gn.get(_))&&ep(i,a);var V=A=c.createElement("link");Rt(V),$t(V,"link",i),V._p=new Promise(function(Y,j){V.onload=Y,V.onerror=j}),V.addEventListener("load",function(){w.loading|=1}),V.addEventListener("error",function(){w.loading|=2}),w.loading|=4,qc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:w},y.set(_,A)}}}function nw(i,r){ss.X(i,r);var a=Zo;if(a&&i){var c=gi(a).hoistableScripts,y=ea(i),_=c.get(y);_||(_=a.querySelector(Pl(y)),_||(i=T({src:i,async:!0},r),(r=Gn.get(y))&&tp(i,r),_=a.createElement("script"),Rt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function iw(i,r){ss.M(i,r);var a=Zo;if(a&&i){var c=gi(a).hoistableScripts,y=ea(i),_=c.get(y);_||(_=a.querySelector(Pl(y)),_||(i=T({src:i,async:!0,type:"module"},r),(r=Gn.get(y))&&tp(i,r),_=a.createElement("script"),Rt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function fv(i,r,a,c){var y=(y=xe.current)?Oc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=jo(a.href),a=gi(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=jo(a.href);var _=gi(y).hoistableStyles,A=_.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=y.querySelector(Dl(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Gn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(i,a),_||sw(y,i,a,A.state))),r&&c===null)throw Error(s(528,""));return A}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ea(a),a=gi(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function jo(i){return'href="'+dn(i)+'"'}function Dl(i){return'link[rel="stylesheet"]['+i+"]"}function dv(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function sw(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),$t(r,"link",a),Rt(r),i.head.appendChild(r))}function ea(i){return'[src="'+dn(i)+'"]'}function Pl(i){return"script[async]"+i}function hv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+dn(a.href)+'"]');if(c)return r.instance=c,Rt(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Rt(c),$t(c,"style",y),qc(c,a.precedence,i),r.instance=c;case"stylesheet":y=jo(a.href);var _=i.querySelector(Dl(y));if(_)return r.state.loading|=4,r.instance=_,Rt(_),_;c=dv(a),(y=Gn.get(y))&&ep(c,y),_=(i.ownerDocument||i).createElement("link"),Rt(_);var A=_;return A._p=new Promise(function(w,V){A.onload=w,A.onerror=V}),$t(_,"link",c),r.state.loading|=4,qc(_,a.precedence,i),r.instance=_;case"script":return _=ea(a.src),(y=i.querySelector(Pl(_)))?(r.instance=y,Rt(y),y):(c=a,(y=Gn.get(_))&&(c=T({},a),tp(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Rt(y),$t(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,qc(c,a.precedence,i));return r.instance}function qc(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var w=c[A];if(w.dataset.precedence===r)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function ep(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function tp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Bc=null;function pv(i,r,a){if(Bc===null){var c=new Map,y=Bc=new Map;y.set(a,c)}else y=Bc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[pi]||_[wt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=i+A;var w=c.get(A);w?w.push(_):c.set(A,[_])}}return c}function mv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function rw(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function gv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function ow(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=jo(c.href),_=r.querySelector(Dl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Fc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Rt(_);return}_=r.ownerDocument||r,c=dv(c),(y=Gn.get(y))&&ep(c,y),_=_.createElement("link"),Rt(_);var A=_;A._p=new Promise(function(w,V){A.onload=w,A.onerror=V}),$t(_,"link",c),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Fc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var np=0;function aw(i,r){return i.stylesheets&&i.count===0&&Gc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Gc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&np===0&&(np=62500*FI());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Gc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>np?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Fc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Hc=null;function Gc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Hc=new Map,r.forEach(lw,i),Hc=null,Fc.call(i))}function lw(i,r){if(!(r.state.loading&4)){var a=Hc.get(i);if(a)var c=a.get(null);else{a=new Map,Hc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=a.get(A)||c,_===c&&a.set(null,y),a.set(A,y),this.count++,c=Fc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var kl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function uw(i,r,a,c,y,_,A,w,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function yv(i,r,a,c,y,_,A,w,V,Y,j,ne){return i=new uw(i,r,a,A,V,Y,j,ne,w),r=1,_===!0&&(r|=24),_=Cn(3,null,null,r),i.current=_,_.stateNode=i,r=Vd(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:r},qd(_),i}function _v(i){return i?(i=Mo,i):Mo}function vv(i,r,a,c,y,_){y=_v(y),c.context===null?c.context=y:c.pendingContext=y,c=Ps(r),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=ks(i,c,r),a!==null&&(_n(a,i,r),dl(a,i,r))}function Tv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function ip(i,r){Tv(i,r),(i=i.alternate)&&Tv(i,r)}function Ev(i){if(i.tag===13||i.tag===31){var r=Ur(i,67108864);r!==null&&_n(r,i,67108864),ip(i,67108864)}}function Sv(i){if(i.tag===13||i.tag===31){var r=Nn();r=Cr(r);var a=Ur(i,r);a!==null&&_n(a,i,r),ip(i,r)}}var zc=!0;function cw(i,r,a,c){var y=W.T;W.T=null;var _=le.p;try{le.p=2,sp(i,r,a,c)}finally{le.p=_,W.T=y}}function fw(i,r,a,c){var y=W.T;W.T=null;var _=le.p;try{le.p=8,sp(i,r,a,c)}finally{le.p=_,W.T=y}}function sp(i,r,a,c){if(zc){var y=rp(c);if(y===null)zh(i,r,c,Kc,a),Cv(i,c);else if(hw(y,i,r,a,c))c.stopPropagation();else if(Cv(i,c),r&4&&-1<dw.indexOf(i)){for(;y!==null;){var _=Dn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ci(_.pendingLanes);if(A!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;A;){var V=1<<31-vt(A);w.entanglements[1]|=V,A&=~V}Ni(_),(We&6)===0&&(Rc=ln()+500,bl(0))}}break;case 31:case 13:w=Ur(_,2),w!==null&&_n(w,_,2),Nc(),ip(_,2)}if(_=rp(c),_===null&&zh(i,r,c,Kc,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else zh(i,r,c,null,a)}}function rp(i){return i=Pn(i),op(i)}var Kc=null;function op(i){if(Kc=null,i=mi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Kc=i,null}function Av(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tr()){case La:return 2;case Oa:return 8;case _s:case dd:return 32;case Au:return 268435456;default:return 32}default:return 32}}var ap=!1,Ks=null,Ys=null,Js=null,Vl=new Map,Ul=new Map,Qs=[],dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cv(i,r){switch(i){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":Vl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(r.pointerId)}}function Ll(i,r,a,c,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Dn(r),r!==null&&Ev(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function hw(i,r,a,c,y){switch(r){case"focusin":return Ks=Ll(Ks,i,r,a,c,y),!0;case"dragenter":return Ys=Ll(Ys,i,r,a,c,y),!0;case"mouseover":return Js=Ll(Js,i,r,a,c,y),!0;case"pointerover":var _=y.pointerId;return Vl.set(_,Ll(Vl.get(_)||null,i,r,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Ul.set(_,Ll(Ul.get(_)||null,i,r,a,c,y)),!0}return!1}function Iv(i){var r=mi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,Wn(i.priority,function(){Sv(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,Wn(i.priority,function(){Sv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Yc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=rp(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);$a=c,a.target.dispatchEvent(c),$a=null}else return r=Dn(a),r!==null&&Ev(r),i.blockedOn=a,!1;r.shift()}return!0}function wv(i,r,a){Yc(i)&&a.delete(r)}function pw(){ap=!1,Ks!==null&&Yc(Ks)&&(Ks=null),Ys!==null&&Yc(Ys)&&(Ys=null),Js!==null&&Yc(Js)&&(Js=null),Vl.forEach(wv),Ul.forEach(wv)}function Jc(i,r){i.blockedOn===r&&(i.blockedOn=null,ap||(ap=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,pw)))}var Qc=null;function Rv(i){Qc!==i&&(Qc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Qc===i&&(Qc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(op(c||a)===null)continue;break}var _=Dn(a);_!==null&&(i.splice(r,3),r-=3,rh(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function ta(i){function r(V){return Jc(V,i)}Ks!==null&&Jc(Ks,i),Ys!==null&&Jc(Ys,i),Js!==null&&Jc(Js,i),Vl.forEach(r),Ul.forEach(r);for(var a=0;a<Qs.length;a++){var c=Qs[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Qs.length&&(a=Qs[0],a.blockedOn===null);)Iv(a),a.blockedOn===null&&Qs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],A=y[Ft]||null;if(typeof _=="function")A||Rv(a);else if(A){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[Ft]||null)w=A.formAction;else if(op(y)!==null)continue}else w=A.action;typeof w=="function"?a[c+1]=w:(a.splice(c,3),c-=3),Rv(a)}}}function bv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function lp(i){this._internalRoot=i}Wc.prototype.render=lp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=Nn();vv(a,c,i,r,null,null)},Wc.prototype.unmount=lp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;vv(i.current,2,null,i,null,null),Nc(),r[hi]=null}};function Wc(i){this._internalRoot=i}Wc.prototype.unstable_scheduleHydration=function(i){if(i){var r=Nu();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Qs.length&&r!==0&&r<Qs[a].priority;a++);Qs.splice(a,0,i),a===0&&Iv(i)}};var Nv=e.version;if(Nv!=="19.2.0")throw Error(s(527,Nv,"19.2.0"));le.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var mw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{Jn=$c.inject(mw),Kt=$c}catch{}}return ql.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,c="",y=Uy,_=Ly,A=Oy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=yv(i,1,!1,null,null,a,c,null,y,_,A,bv),i[hi]=r.current,Gh(i),new lp(r)},ql.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var c=!1,y="",_=Uy,A=Ly,w=Oy,V=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),r=yv(i,1,!0,r,a??null,c,y,V,_,A,w,bv),r.context=_v(null),a=r.current,c=Nn(),c=Cr(c),y=Ps(c),y.callback=null,ks(a,y,c),a=c,r.current.lanes=a,Sr(r,a),Ni(r),i[hi]=r.current,Gh(i),new Wc(r)},ql.version="19.2.0",ql}var qv;function ww(){if(qv)return fp.exports;qv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fp.exports=Iw(),fp.exports}var Rw=ww();const bw=BS(Rw);var ut=(n=>(n.HOME="HOME",n.LOADING="LOADING",n.TOPIC_DETAIL="TOPIC_DETAIL",n.FLASHCARD="FLASHCARD",n.QUIZ="QUIZ",n.RESULT="RESULT",n.PROFILE="PROFILE",n))(ut||{});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Nw,xw;function Mw(){return{geminiUrl:Nw,vertexUrl:xw}}function Dw(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const u=Mw();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hs{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let m=0;m<g.length;m++){const v=g[m];h(v,e.slice(l+1),t[m])}else for(const m of g)h(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function Pw(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),u=new Set;let d=-1;for(let g=0;g<o.length;g++)if(o[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Np(n,o,l,0,u)}}function Np(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])Np(g,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),g={};for(const m of d)g[m]=u[m];for(const[m,v]of Object.entries(g)){const T=[];for(const S of t.slice(s))S==="*"?T.push(m):T.push(S);h(u,T,v)}for(const m of d)delete u[m]}}else{const u=n;l in u&&Np(u[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kw(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function Vw(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],Lw(u)),e}function Uw(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],Ow(u)),e}function Lw(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>qw(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function Ow(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>Bw(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function qw(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],Yw(t)),e}function Bw(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],Jw(t)),e}function Fw(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function Hw(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function Gw(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],zw(u)),e}function zw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function FS(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],Kw(u)),e}function Kw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function Yw(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],dm(s));const o=f(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function Jw(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],dm(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Bv||(Bv={}));var Fv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Fv||(Fv={}));var Hv;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Hv||(Hv={}));var fn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(fn||(fn={}));var Gv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Gv||(Gv={}));var zv;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zv||(zv={}));var Kv;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Kv||(Kv={}));var Yv;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Yv||(Yv={}));var Jv;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Jv||(Jv={}));var Qv;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(Qv||(Qv={}));var Wv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Wv||(Wv={}));var $v;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})($v||($v={}));var Xv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Xv||(Xv={}));var Zv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Zv||(Zv={}));var jv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(jv||(jv={}));var eT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(eT||(eT={}));var tT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(tT||(tT={}));var nT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(nT||(nT={}));var iT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(iT||(iT={}));var gf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(gf||(gf={}));var sT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(sT||(sT={}));var rT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(rT||(rT={}));var oT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(oT||(oT={}));var xp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(xp||(xp={}));var aT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(aT||(aT={}));var lT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(lT||(lT={}));var uT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(uT||(uT={}));var cT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(cT||(cT={}));var fT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(fT||(fT={}));var dT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(dT||(dT={}));var hT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(hT||(hT={}));var pT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(pT||(pT={}));var mT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(mT||(mT={}));var gT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(gT||(gT={}));var yT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yT||(yT={}));var _T;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_T||(_T={}));var vT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vT||(vT={}));var TT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(TT||(TT={}));var ET;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(ET||(ET={}));var ST;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ST||(ST={}));var AT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(AT||(AT={}));var CT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(CT||(CT={}));var IT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(IT||(IT={}));var wT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(wT||(wT={}));var RT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(RT||(RT={}));var bT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(bT||(bT={}));var NT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(NT||(NT={}));var xT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(xT||(xT={}));var MT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(MT||(MT={}));var DT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(DT||(DT={}));var PT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(PT||(PT={}));var kT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kT||(kT={}));var VT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(VT||(VT={}));var UT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(UT||(UT={}));var oa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(oa||(oa={}));class Mp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Bl{get text(){var e,t,s,o,l,u,d,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const T=[];for(const S of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[b,F]of Object.entries(S))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(F!==null||F!==void 0)&&T.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,o,l,u,d,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const T of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,b]of Object.entries(T))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,o,l,u,d,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,o,l,u,d,g,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,o,l,u,d,g,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class LT{}class OT{}class Qw{}class Ww{}class $w{}class Xw{}class qT{}class BT{}class FT{}class Zw{}class yf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new yf;let o;const l=e;return t?o=Uw(l):o=Vw(l),Object.assign(s,o),s}}class HT{}class GT{}class zT{}class jw{}class eR{}class tR{}class hm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new hm,l=Gw(e);return Object.assign(s,l),s}}class nR{}class iR{}class sR{}class KT{}class rR{get text(){var e,t,s;let o="",l=!1;const u=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[g,m]of Object.entries(d))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class oR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class pm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new pm,l=FS(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function HS(n,e){const t=Je(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function GS(n){return Array.isArray(n)?n.map(e=>_f(e)):[_f(n)]}function _f(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function zS(n){const e=_f(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function KS(n){const e=_f(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function YS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>YT(e)):[YT(n)]}function Dp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function JT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function QT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function on(n){if(n==null)throw new Error("ContentUnion is required");return Dp(n)?n:{role:"user",parts:YS(n)}}function mm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=on(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=on(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>on(t)):[on(e)]}function Yn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(JT(n)||QT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[on(n)]}const e=[],t=[],s=Dp(n[0]);for(const o of n){const l=Dp(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(JT(o)||QT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:YS(t)}),e}function aR(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(fn).includes(t[0].toUpperCase())?t[0].toUpperCase():fn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(fn).includes(s.toUpperCase())?s.toUpperCase():fn.TYPE_UNSPECIFIED})}}function la(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&aR(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(fn).includes(d.toUpperCase())?d.toUpperCase():fn.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=la(d);else if(s.includes(u)){const g=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}g.push(la(m))}e[u]=g}else if(o.includes(u)){const g={};for(const[m,v]of Object.entries(d))g[m]=la(v);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function gm(n){return la(n)}function ym(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function _m(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ca(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=la(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=la(e.response));return n}function Ia(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function lR(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function ps(n,e){if(typeof e!="string")throw new Error("name must be a string");return lR(n,e,"cachedContents")}function JS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function pr(n){return dm(n)}function uR(n){return n!=null&&typeof n=="object"&&"name"in n}function cR(n){return n!=null&&typeof n=="object"&&"video"in n}function fR(n){return n!=null&&typeof n=="object"&&"uri"in n}function QS(n){var e;let t;if(uR(n)&&(t=n.name),!(fR(n)&&(t=n.uri,t===void 0))&&!(cR(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function WS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function $S(n){for(const e of["models","tunedModels","publisherModels"])if(dR(n,e))return n[e];return[]}function dR(n,e){return n!==null&&typeof n=="object"&&e in n}function hR(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function pR(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=hR(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function XS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function mR(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ZS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function wa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function jS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gR(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>$R(u))),h(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function yR(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function _R(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&h(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function sf(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&h(e,["state"],jS(o));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const m=f(n,["metadata","output"]);return m!=null&&h(e,["dest"],gR(ZS(m))),e}function Pp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["state"]);o!=null&&h(e,["state"],jS(o));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&h(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&h(e,["src"],vR(T));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],yR(ZS(S)));const b=f(n,["completionStats"]);return b!=null&&h(e,["completionStats"],b),e}function vR(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function TR(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&h(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>WR(n,u))),h(t,["requests","requests"],l)}return t}function ER(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&h(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function SR(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function AR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function CR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function IR(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],wR(s));const o=f(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function wR(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["citations"],s)}return e}function e0(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>ib(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function RR(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function bR(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&h(e,["outputConfig"],_R(mR(o))),t}function WT(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["src"]);o!=null&&h(t,["batch","inputConfig"],TR(n,XS(n,o)));const l=f(e,["config"]);return l!=null&&RR(l,t),t}function NR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],Je(n,s));const o=f(e,["src"]);o!=null&&h(t,["inputConfig"],ER(XS(n,o)));const l=f(e,["config"]);return l!=null&&bR(l,t),t}function xR(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function MR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["src"]);o!=null&&h(t,["batch","inputConfig"],OR(n,o));const l=f(e,["config"]);return l!=null&&xR(l,t),t}function DR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function PR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function kR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function VR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function UR(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=mm(n,s);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&(h(t,["_self"],LR(o,t)),Pw(t,{"requests[].*":"requests[].request.*"})),t}function LR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function OR(n,e){const t={},s=f(e,["fileName"]);s!=null&&h(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&h(t,["requests"],UR(n,o)),t}function qR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function BR(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FR(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function HR(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],e0(on(o)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&h(s,["presencePenalty"],b);const F=f(e,["frequencyPenalty"]);F!=null&&h(s,["frequencyPenalty"],F);const B=f(e,["seed"]);B!=null&&h(s,["seed"],B);const G=f(e,["responseMimeType"]);G!=null&&h(s,["responseMimeType"],G);const ee=f(e,["responseSchema"]);ee!=null&&h(s,["responseSchema"],gm(ee));const X=f(e,["responseJsonSchema"]);if(X!=null&&h(s,["responseJsonSchema"],X),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let L=Z;Array.isArray(L)&&(L=L.map(P=>sb(P))),h(t,["safetySettings"],L)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let L=Ia(ae);Array.isArray(L)&&(L=L.map(P=>ob(Ca(P)))),h(t,["tools"],L)}const ce=f(e,["toolConfig"]);if(t!==void 0&&ce!=null&&h(t,["toolConfig"],rb(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=f(e,["cachedContent"]);t!==void 0&&oe!=null&&h(t,["cachedContent"],ps(n,oe));const x=f(e,["responseModalities"]);x!=null&&h(s,["responseModalities"],x);const D=f(e,["mediaResolution"]);D!=null&&h(s,["mediaResolution"],D);const M=f(e,["speechConfig"]);if(M!=null&&h(s,["speechConfig"],ym(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(s,["thinkingConfig"],U);const k=f(e,["imageConfig"]);return k!=null&&h(s,["imageConfig"],QR(k)),s}function GR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>IR(m))),h(e,["candidates"],g)}const o=f(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function zR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function KR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function YR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function JR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function QR(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["request","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let d=Yn(o);Array.isArray(d)&&(d=d.map(g=>e0(g))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(t,["request","generationConfig"],HR(n,u,f(t,["request"],{}))),t}function $R(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],GR(t));const s=f(n,["error"]);return s!=null&&h(e,["error"],s),e}function XR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function ZR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&h(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function jR(n){const e={},t=f(n,["config"]);return t!=null&&XR(t,e),e}function eb(n){const e={},t=f(n,["config"]);return t!=null&&ZR(t,e),e}function tb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>sf(u))),h(e,["batchJobs"],l)}return e}function nb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Pp(u))),h(e,["batchJobs"],l)}return e}function ib(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],qR(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],BR(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],SR(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function sb(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function rb(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],FR(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function ob(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],YR(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],JR(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ls;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ls||(ls={}));class ro{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ab extends hs{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new ro(ls.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=WT(this.apiClient,e),s=t._url,o=de("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,g=d.requests,m=[];for(const v of g){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const b=T.request;b.systemInstruction=S,T.request=b}m.push(T)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(u)s.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=NR(this.apiClient,e);return d=de("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Pp(v))}else{const m=WT(this.apiClient,e);return d=de("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>sf(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MR(this.apiClient,e);return l=de("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>sf(g))}}async get(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=KR(this.apiClient,e);return d=de("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Pp(v))}else{const m=zR(this.apiClient,e);return d=de("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>sf(v))}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=CR(this.apiClient,e);u=de("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=AR(this.apiClient,e);u=de("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=eb(e);return d=de("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=nb(v),S=new KT;return Object.assign(S,T),S})}else{const m=jR(e);return d=de("batches",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=tb(v),S=new KT;return Object.assign(S,T),S})}}async delete(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=PR(this.apiClient,e);return d=de("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>VR(v))}else{const m=DR(this.apiClient,e);return d=de("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>kR(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lb(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function $T(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Mb(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function ub(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=Yn(u);Array.isArray(v)&&(v=v.map(T=>$T(T))),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],$T(on(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(T=>Pb(T))),h(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],Db(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function cb(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=Yn(u);Array.isArray(T)&&(T=T.map(S=>S)),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],on(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>kb(S))),h(e,["tools"],T)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function fb(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],HS(n,s));const o=f(e,["config"]);return o!=null&&ub(o,t),t}function db(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],HS(n,s));const o=f(e,["config"]);return o!=null&&cb(o,t),t}function hb(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ps(n,s)),t}function pb(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ps(n,s)),t}function mb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function gb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function yb(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _b(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vb(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Tb(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function Eb(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ps(n,s)),t}function Sb(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ps(n,s)),t}function Ab(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Cb(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function Ib(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function wb(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function Rb(n){const e={},t=f(n,["config"]);return t!=null&&Ib(t,e),e}function bb(n){const e={},t=f(n,["config"]);return t!=null&&wb(t,e),e}function Nb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function xb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function Mb(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],yb(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],_b(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],lb(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function Db(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],vb(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function Pb(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],Ab(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],Cb(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function kb(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>Tb(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function Vb(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function Ub(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function Lb(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],ps(n,s));const o=f(e,["config"]);return o!=null&&Vb(o,t),t}function Ob(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],ps(n,s));const o=f(e,["config"]);return o!=null&&Ub(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qb extends hs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ro(ls.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=db(this.apiClient,e);return d=de("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=fb(this.apiClient,e);return d=de("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Sb(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=Eb(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=pb(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=gb(v),S=new GT;return Object.assign(S,T),S})}else{const m=hb(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=mb(v),S=new GT;return Object.assign(S,T),S})}}async update(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Ob(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=Lb(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=bb(e);return d=de("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=xb(v),S=new zT;return Object.assign(S,T),S})}else{const m=Rb(e);return d=de("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Nb(v),S=new zT;return Object.assign(S,T),S})}}}function XT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(n){return this instanceof ct?(this.v=n,this):new ct(n)}function ua(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(b){return function(F){return Promise.resolve(F).then(b,T)}}function d(b,F){s[b]&&(o[b]=function(B){return new Promise(function(G,ee){l.push([b,B,G,ee])>1||g(b,B)})},F&&(o[b]=F(o[b])))}function g(b,F){try{m(s[b](F))}catch(B){S(l[0][3],B)}}function m(b){b.value instanceof ct?Promise.resolve(b.value.v).then(v,T):S(l[0][2],b)}function v(b){g("next",b)}function T(b){g("throw",b)}function S(b,F){b(F),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Jl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof XT=="function"?XT(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(d,g){u=n[l](u),o(d,g,u.done,u.value)})}}function o(l,u,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bb(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:t0(t)}function t0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Fb(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ZT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!t0(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class Hb{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Gb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Gb{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Fb(l)}async sendMessage(e){var t;await this.sendPromise;const s=on(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await o,m=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const b=m?[m]:[];this.recordHistory(s,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=on(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?ZT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return ua(this,arguments,function*(){var u,d,g,m;const v=[];try{for(var T=!0,S=Jl(e),b;b=yield ct(S.next()),u=b.done,!u;T=!0){m=b.value,T=!1;const F=m;if(Bb(F)){const B=(o=(s=F.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;B!==void 0&&v.push(B)}yield yield ct(F)}}catch(F){d={error:F}}finally{try{!T&&!u&&(g=S.return)&&(yield ct(g.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...ZT(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Bf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zb(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function Kb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function Yb(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],QS(t)),e}function Jb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function Qb(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],QS(t)),e}function Wb(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function $b(n){const e={},t=f(n,["config"]);return t!=null&&Wb(t,e),e}function Xb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zb extends hs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ro(ls.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$b(e);return l=de("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=Xb(g),v=new nR;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zb(e);return l=de("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=Kb(g),v=new iR;return Object.assign(v,m),v})}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Qb(e);return l=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Yb(e);return l=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=Jb(g),v=new sR;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rf(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function jb(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>mN(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function eN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function tN(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nN(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function iN(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const o=f(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&h(e,["responseMimeType"],b);const F=f(n,["responseModalities"]);F!=null&&h(e,["responseModalities"],F);const B=f(n,["responseSchema"]);B!=null&&h(e,["responseSchema"],B);const G=f(n,["routingConfig"]);G!=null&&h(e,["routingConfig"],G);const ee=f(n,["seed"]);ee!=null&&h(e,["seed"],ee);const X=f(n,["speechConfig"]);X!=null&&h(e,["speechConfig"],n0(X));const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const ae=f(n,["temperature"]);ae!=null&&h(e,["temperature"],ae);const ce=f(n,["thinkingConfig"]);ce!=null&&h(e,["thinkingConfig"],ce);const oe=f(n,["topK"]);oe!=null&&h(e,["topK"],oe);const x=f(n,["topP"]);if(x!=null&&h(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function sN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function rN(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function oN(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],_m(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],b);const F=f(n,["systemInstruction"]);e!==void 0&&F!=null&&h(e,["setup","systemInstruction"],jb(on(F)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let oe=Ia(B);Array.isArray(oe)&&(oe=oe.map(x=>yN(Ca(x)))),h(e,["setup","tools"],oe)}const G=f(n,["sessionResumption"]);e!==void 0&&G!=null&&h(e,["setup","sessionResumption"],gN(G));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&h(e,["setup","inputAudioTranscription"],ee);const X=f(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const ce=f(n,["proactivity"]);return e!==void 0&&ce!=null&&h(e,["setup","proactivity"],ce),t}function aN(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],iN(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],n0(_m(T)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],b);const F=f(n,["systemInstruction"]);e!==void 0&&F!=null&&h(e,["setup","systemInstruction"],on(F));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let oe=Ia(B);Array.isArray(oe)&&(oe=oe.map(x=>_N(Ca(x)))),h(e,["setup","tools"],oe)}const G=f(n,["sessionResumption"]);e!==void 0&&G!=null&&h(e,["setup","sessionResumption"],G);const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&h(e,["setup","inputAudioTranscription"],ee);const X=f(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const ce=f(n,["proactivity"]);return e!==void 0&&ce!=null&&h(e,["setup","proactivity"],ce),t}function lN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Je(n,s));const o=f(e,["config"]);return o!=null&&h(t,["config"],oN(o,t)),t}function uN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Je(n,s));const o=f(e,["config"]);return o!=null&&h(t,["config"],aN(o,t)),t}function cN(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function fN(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["weightedPrompts"],s)}return e}function dN(n){const e={},t=f(n,["media"]);if(t!=null){let m=GS(t);Array.isArray(m)&&(m=m.map(v=>rf(v))),h(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],rf(KS(s)));const o=f(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&h(e,["video"],rf(zS(l)));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function hN(n){const e={},t=f(n,["media"]);if(t!=null){let m=GS(t);Array.isArray(m)&&(m=m.map(v=>v)),h(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],KS(s));const o=f(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&h(e,["video"],zS(l));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function pN(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&h(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],vN(u));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);return g!=null&&h(e,["sessionResumptionUpdate"],g),e}function mN(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],eN(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],tN(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],rf(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function gN(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function n0(n){const e={},t=f(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function yN(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],sN(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],rN(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function _N(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>nN(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function vN(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&h(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(F=>F)),h(e,["promptTokensDetails"],b)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(F=>F)),h(e,["cacheTokensDetails"],b)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(F=>F)),h(e,["responseTokensDetails"],b)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let b=T;Array.isArray(b)&&(b=b.map(F=>F)),h(e,["toolUsePromptTokensDetails"],b)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TN(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function EN(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],SN(s));const o=f(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function SN(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["citations"],s)}return e}function AN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let l=Yn(o);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["contents"],l)}return t}function CN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["tokensInfo"],o)}return e}function IN(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&h(e,["statistics"],wN(s)),e}function wN(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function Ff(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Vx(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function RN(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function bN(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function NN(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],on(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>a0(d))),h(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],Tx(l)),t}function xN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=Yn(o);Array.isArray(u)&&(u=u.map(d=>Ff(d))),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&bN(l),t}function MN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=Yn(o);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&NN(l,t),t}function DN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&h(e,["cachedContentTokenCount"],o),e}function PN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function kN(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Je(n,s)),t}function VN(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Je(n,s)),t}function UN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function LN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function ON(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const F=f(n,["outputMimeType"]);e!==void 0&&F!=null&&h(e,["parameters","outputOptions","mimeType"],F);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","compressionQuality"],B);const G=f(n,["addWatermark"]);e!==void 0&&G!=null&&h(e,["parameters","addWatermark"],G);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&h(e,["labels"],ee);const X=f(n,["editMode"]);e!==void 0&&X!=null&&h(e,["parameters","editMode"],X);const Z=f(n,["baseSteps"]);return e!==void 0&&Z!=null&&h(e,["parameters","editConfig","baseSteps"],Z),t}function qN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>Fx(g))),h(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&ON(u,t),t}function BN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Hf(l))),h(e,["generatedImages"],o)}return e}function FN(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function HN(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&h(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&h(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function GN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let d=mm(n,o);Array.isArray(d)&&(d=d.map(g=>g)),h(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&FN(l,t);const u=f(e,["model"]);return u!==void 0&&h(t,["requests[]","model"],Je(n,u)),t}function zN(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=mm(n,o);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&HN(l,t),t}function KN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function YN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>IN(u))),h(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function JN(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function QN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function WN(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $N(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function XN(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function ZN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],Ff(on(o)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&h(s,["presencePenalty"],b);const F=f(e,["frequencyPenalty"]);F!=null&&h(s,["frequencyPenalty"],F);const B=f(e,["seed"]);B!=null&&h(s,["seed"],B);const G=f(e,["responseMimeType"]);G!=null&&h(s,["responseMimeType"],G);const ee=f(e,["responseSchema"]);ee!=null&&h(s,["responseSchema"],gm(ee));const X=f(e,["responseJsonSchema"]);if(X!=null&&h(s,["responseJsonSchema"],X),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let L=Z;Array.isArray(L)&&(L=L.map(P=>Hx(P))),h(t,["safetySettings"],L)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let L=Ia(ae);Array.isArray(L)&&(L=L.map(P=>Wx(Ca(P)))),h(t,["tools"],L)}const ce=f(e,["toolConfig"]);if(t!==void 0&&ce!=null&&h(t,["toolConfig"],Qx(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=f(e,["cachedContent"]);t!==void 0&&oe!=null&&h(t,["cachedContent"],ps(n,oe));const x=f(e,["responseModalities"]);x!=null&&h(s,["responseModalities"],x);const D=f(e,["mediaResolution"]);D!=null&&h(s,["mediaResolution"],D);const M=f(e,["speechConfig"]);if(M!=null&&h(s,["speechConfig"],ym(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(s,["thinkingConfig"],U);const k=f(e,["imageConfig"]);return k!=null&&h(s,["imageConfig"],Ix(k)),s}function jN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],on(o));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&h(s,["presencePenalty"],b);const F=f(e,["frequencyPenalty"]);F!=null&&h(s,["frequencyPenalty"],F);const B=f(e,["seed"]);B!=null&&h(s,["seed"],B);const G=f(e,["responseMimeType"]);G!=null&&h(s,["responseMimeType"],G);const ee=f(e,["responseSchema"]);ee!=null&&h(s,["responseSchema"],gm(ee));const X=f(e,["responseJsonSchema"]);X!=null&&h(s,["responseJsonSchema"],X);const Z=f(e,["routingConfig"]);Z!=null&&h(s,["routingConfig"],Z);const ae=f(e,["modelSelectionConfig"]);ae!=null&&h(s,["modelConfig"],ae);const ce=f(e,["safetySettings"]);if(t!==void 0&&ce!=null){let W=ce;Array.isArray(W)&&(W=W.map(le=>le)),h(t,["safetySettings"],W)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let W=Ia(oe);Array.isArray(W)&&(W=W.map(le=>a0(Ca(le)))),h(t,["tools"],W)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&h(t,["toolConfig"],x);const D=f(e,["labels"]);t!==void 0&&D!=null&&h(t,["labels"],D);const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&h(t,["cachedContent"],ps(n,M));const U=f(e,["responseModalities"]);U!=null&&h(s,["responseModalities"],U);const k=f(e,["mediaResolution"]);k!=null&&h(s,["mediaResolution"],k);const L=f(e,["speechConfig"]);L!=null&&h(s,["speechConfig"],o0(ym(L)));const P=f(e,["audioTimestamp"]);P!=null&&h(s,["audioTimestamp"],P);const Pe=f(e,["thinkingConfig"]);Pe!=null&&h(s,["thinkingConfig"],Pe);const tt=f(e,["imageConfig"]);return tt!=null&&h(s,["imageConfig"],wx(tt)),s}function jT(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=Yn(o);Array.isArray(u)&&(u=u.map(d=>Ff(d))),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],ZN(n,l,t)),t}function eE(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["contents"]);if(o!=null){let u=Yn(o);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],jN(n,l,t)),t}function tE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>EN(m))),h(e,["candidates"],g)}const o=f(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function nE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),h(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&h(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&h(e,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(e,["usageMetadata"],g),e}function ex(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const g=f(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&h(e,["parameters","includeSafetyAttributes"],g);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=f(n,["imageSize"]);if(e!==void 0&&b!=null&&h(e,["parameters","sampleImageSize"],b),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function tx(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const F=f(n,["outputMimeType"]);e!==void 0&&F!=null&&h(e,["parameters","outputOptions","mimeType"],F);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","compressionQuality"],B);const G=f(n,["addWatermark"]);e!==void 0&&G!=null&&h(e,["parameters","addWatermark"],G);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&h(e,["labels"],ee);const X=f(n,["imageSize"]);e!==void 0&&X!=null&&h(e,["parameters","sampleImageSize"],X);const Z=f(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&h(e,["parameters","enhancePrompt"],Z),t}function nx(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&ex(l,t),t}function ix(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&tx(l,t),t}function sx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>gx(u))),h(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],s0(o)),e}function rx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Hf(u))),h(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],r0(o)),e}function ox(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(n,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],Gf(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(b=>lM(b))),h(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function ax(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&h(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["aspectRatio"]);e!==void 0&&g!=null&&h(e,["parameters","aspectRatio"],g);const m=f(n,["resolution"]);e!==void 0&&m!=null&&h(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&h(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const b=f(n,["enhancePrompt"]);e!==void 0&&b!=null&&h(e,["parameters","enhancePrompt"],b);const F=f(n,["generateAudio"]);e!==void 0&&F!=null&&h(e,["parameters","generateAudio"],F);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&h(e,["instances[0]","lastFrame"],ai(B));const G=f(n,["referenceImages"]);if(e!==void 0&&G!=null){let Z=G;Array.isArray(Z)&&(Z=Z.map(ae=>uM(ae))),h(e,["instances[0]","referenceImages"],Z)}const ee=f(n,["mask"]);e!==void 0&&ee!=null&&h(e,["instances[0]","mask"],aM(ee));const X=f(n,["compressionQuality"]);return e!==void 0&&X!=null&&h(e,["parameters","compressionQuality"],X),t}function lx(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],dx(u)),e}function ux(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],hx(u)),e}function cx(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],Gf(l));const u=f(e,["video"]);u!=null&&h(t,["instances[0]","video"],l0(u));const d=f(e,["source"]);d!=null&&px(d,t);const g=f(e,["config"]);return g!=null&&ox(g,t),t}function fx(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],ai(l));const u=f(e,["video"]);u!=null&&h(t,["instances[0]","video"],u0(u));const d=f(e,["source"]);d!=null&&mx(d,t);const g=f(e,["config"]);return g!=null&&ax(g,t),t}function dx(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>_x(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function hx(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>vx(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function px(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],Gf(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],l0(l)),t}function mx(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],ai(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],u0(l)),t}function gx(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],Rx(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&h(e,["safetyAttributes"],s0(o)),e}function Hf(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],i0(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&h(e,["safetyAttributes"],r0(o));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function yx(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],i0(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["labels"],o)}return e}function _x(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],rM(t)),e}function vx(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],oM(t)),e}function Tx(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const o=f(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&h(e,["responseMimeType"],b);const F=f(n,["responseModalities"]);F!=null&&h(e,["responseModalities"],F);const B=f(n,["responseSchema"]);B!=null&&h(e,["responseSchema"],B);const G=f(n,["routingConfig"]);G!=null&&h(e,["routingConfig"],G);const ee=f(n,["seed"]);ee!=null&&h(e,["seed"],ee);const X=f(n,["speechConfig"]);X!=null&&h(e,["speechConfig"],o0(X));const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const ae=f(n,["temperature"]);ae!=null&&h(e,["temperature"],ae);const ce=f(n,["thinkingConfig"]);ce!=null&&h(e,["thinkingConfig"],ce);const oe=f(n,["topK"]);oe!=null&&h(e,["topK"],oe);const x=f(n,["topP"]);if(x!=null&&h(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ex(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Je(n,s)),t}function Sx(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Je(n,s)),t}function Ax(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Cx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function Ix(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wx(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const o=f(n,["outputMimeType"]);o!=null&&h(e,["imageOutputOptions","mimeType"],o);const l=f(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function Rx(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],pr(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function i0(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],pr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Gf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],pr(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ai(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],pr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function bx(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],WS(n,d)),s}function Nx(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],WS(n,d)),s}function xx(n,e){const t={},s=f(e,["config"]);return s!=null&&bx(n,s,t),t}function Mx(n,e){const t={},s=f(e,["config"]);return s!=null&&Nx(n,s,t),t}function Dx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=$S(o);Array.isArray(l)&&(l=l.map(u=>kp(u))),h(e,["models"],l)}return e}function Px(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=$S(o);Array.isArray(l)&&(l=l.map(u=>Vp(u))),h(e,["models"],l)}return e}function kx(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&h(e,["dilation"],o),e}function kp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);o!=null&&h(e,["description"],o);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const u=f(n,["_self"]);u!=null&&h(e,["tunedModelInfo"],$x(u));const d=f(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const g=f(n,["outputTokenLimit"]);g!=null&&h(e,["outputTokenLimit"],g);const m=f(n,["supportedGenerationMethods"]);m!=null&&h(e,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&h(e,["temperature"],v);const T=f(n,["maxTemperature"]);T!=null&&h(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&h(e,["topP"],S);const b=f(n,["topK"]);b!=null&&h(e,["topK"],b);const F=f(n,["thinking"]);return F!=null&&h(e,["thinking"],F),e}function Vp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);o!=null&&h(e,["description"],o);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>JN(S))),h(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&h(e,["labels"],d);const g=f(n,["_self"]);g!=null&&h(e,["tunedModelInfo"],Xx(g));const m=f(n,["defaultCheckpointId"]);m!=null&&h(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),h(e,["checkpoints"],T)}return e}function Vx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],QN(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],WN(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],TN(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function Ux(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],ai(t)),e}function Lx(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&h(e,["parameters","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&h(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&h(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const b=f(n,["labels"]);return e!==void 0&&b!=null&&h(e,["labels"],b),t}function Ox(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["source"]);o!=null&&Bx(o,t);const l=f(e,["config"]);return l!=null&&Lx(l,t),t}function qx(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Hf(o))),h(e,["generatedImages"],s)}return e}function Bx(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&h(e,["instances[0]","personImage","image"],ai(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Ux(d))),h(e,["instances[0]","productImages"],u)}return t}function Fx(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],ai(t));const s=f(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&h(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],kx(l));const u=f(n,["controlImageConfig"]);u!=null&&h(e,["controlImageConfig"],RN(u));const d=f(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const g=f(n,["subjectImageConfig"]);return g!=null&&h(e,["subjectImageConfig"],g),e}function s0(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function r0(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function Hx(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function Gx(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],ai(t)),e}function zx(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&h(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&h(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const g=f(n,["labels"]);return e!==void 0&&g!=null&&h(e,["labels"],g),t}function Kx(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["source"]);o!=null&&Jx(o,t);const l=f(e,["config"]);return l!=null&&zx(l,t),t}function Yx(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>yx(o))),h(e,["generatedMasks"],s)}return e}function Jx(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],ai(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],Gx(l)),t}function o0(n){const e={},t=f(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Qx(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],$N(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function Wx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],Ax(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],Cx(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function a0(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>XN(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function $x(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function Xx(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function Zx(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function jx(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function eM(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","name"],Je(n,s));const o=f(e,["config"]);return o!=null&&Zx(o,t),t}function tM(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["config"]);return o!=null&&jx(o,t),t}function nM(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const g=f(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const b=f(n,["mode"]);return e!==void 0&&b!=null&&h(e,["parameters","mode"],b),t}function iM(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Je(n,s));const o=f(e,["image"]);o!=null&&h(t,["instances[0]","image"],ai(o));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&nM(u,t),t}function sM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Hf(l))),h(e,["generatedImages"],o)}return e}function rM(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],pr(s));const o=f(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function oM(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],pr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function aM(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],ai(t));const s=f(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function lM(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],Gf(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function uM(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],ai(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function l0(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],pr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["encoding"],o),e}function u0(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],pr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cM="Content-Type",fM="X-Server-Timeout",dM="User-Agent",Up="x-goog-api-client",hM="1.30.0",pM=`google-genai-sdk/${hM}`,mM="v1beta1",gM="v1beta",iE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class yM{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:mM,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:gM,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&_M(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await sE(o),new Mp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await sE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return ua(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:g}=yield ct(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(g,{stream:!0});try{const T=JSON.parse(m);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),b=S.status,F=S.code,B=`got status: ${b}. ${JSON.stringify(T)}`;if(F>=400&&F<600)throw new Bf({message:B,status:F})}}catch(T){if(T.name==="ApiError")throw T}u+=m;let v=u.match(iE);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ct(new Mp(S)),u=u.slice(v[0].length),v=u.match(iE)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=pM+" "+this.clientOptions.userAgentExtra;return e[dM]=t,e[Up]=t,e[cM]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(fM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const g={file:o},m=this.getFileName(e),v=de("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,m,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,s){var o;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),g=(o=s==null?void 0:s.mimeType)!==null&&o!==void 0?o:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};s!=null&&s.customMetadata&&(T.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(T.chunkingConfig=s.chunkingConfig);const S=await this.fetchUploadUrl(m,d,g,v,T,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,o,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function sE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new Bf({message:o,status:t}):new Error(o)}}function _M(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],v=d[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[g]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[g]=m)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vM="mcp_used/unknown";let TM=!1;function c0(n){for(const e of n)if(EM(e)||typeof e=="object"&&"inputSchema"in e)return!0;return TM}function f0(n){var e;const t=(e=n[Up])!==null&&e!==void 0?e:"";n[Up]=(t+` ${vM}`).trimStart()}function EM(n){return n!==null&&typeof n=="object"&&n instanceof vm}function SM(n,e=100){return ua(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield ct(n.listTools({cursor:s}));for(const u of l.tools)yield yield ct(u),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class vm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new vm(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var d=!0,g=(t=void 0,Jl(SM(v))),m;m=await g.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const T=o;u.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),pR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function AM(n,e,t){const s=new oR;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class CM{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=RM(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(Z=>{m=Z}),T=e.callbacks,S=function(){m({})},b=this.apiClient,F={onopen:S,onmessage:Z=>{AM(b,T.onmessage,Z)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(Z){}},B=this.webSocketFactory.create(g,wM(u),F);B.connect(),await v;const X={setup:{model:Je(this.apiClient,e.model)}};return B.send(JSON.stringify(X)),new IM(B,this.apiClient)}}class IM{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=fN(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=cN(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(oa.PLAY)}pause(){this.sendPlaybackControl(oa.PAUSE)}stop(){this.sendPlaybackControl(oa.STOP)}resetContext(){this.sendPlaybackControl(oa.RESET_CONTEXT)}close(){this.conn.close()}}function wM(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function RM(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function NM(n,e,t){const s=new rR;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=pN(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class xM{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new CM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&c0(e.config.tools)&&f0(T);const S=kM(T);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const M=this.apiClient.getApiKey();let U="BidiGenerateContent",k="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",k="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${U}?${k}=${M}`}let b=()=>{};const F=new Promise(M=>{b=M}),B=e.callbacks,G=function(){var M;(M=B==null?void 0:B.onopen)===null||M===void 0||M.call(B),b({})},ee=this.apiClient,X={onopen:G,onmessage:M=>{NM(ee,B.onmessage,M)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(M){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(M){}},Z=this.webSocketFactory.create(v,PM(S),X);Z.connect(),await F;let ae=Je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const M=this.apiClient.getProject(),U=this.apiClient.getLocation();ae=`projects/${M}/locations/${U}/`+ae}let ce={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[gf.AUDIO]}:e.config.responseModalities=[gf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const oe=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],x=[];for(const M of oe)if(this.isCallableTool(M)){const U=M;x.push(await U.tool())}else x.push(M);x.length>0&&(e.config.tools=x);const D={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ce=uN(this.apiClient,D):ce=lN(this.apiClient,D),delete ce.config,Z.send(JSON.stringify(ce)),new DM(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const MM={turnComplete:!0};class DM{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Yn(t.turns),e.isVertexAI()||(s=s.map(o=>Ff(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(bM)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},MM),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:hN(e)}:t={realtimeInput:dN(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function PM(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function kM(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rE=10;function oE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ca(u)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ca(n){return"callTool"in n&&typeof n.callTool=="function"}function VM(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>ca(o)))!==null&&s!==void 0?s:!1}function aE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,o)=>{if(ca(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(o)}),t}function lE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UM extends hs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!VM(t)||oE(t.config))return await this.generateContentInternal(g);const m=aE(t);if(m.length>0){const B=m.map(G=>`tools[${G}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let v,T;const S=Yn(g.contents),b=(l=(o=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:rE;let F=0;for(;F<b&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const B=v.candidates[0].content,G=[];for(const ee of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ca(ee)){const Z=await ee.callTool(v.functionCalls);G.push(...Z)}F++,T={role:"user",parts:G},g.contents=Yn(g.contents),g.contents.push(B),g.contents.push(T),lE(g.config)&&(S.push(B),S.push(T))}return lE(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var s,o,l,u,d;if(this.maybeMoveToResponseJsonSchem(t),oE(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=aE(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(o=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const u=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((o=g==null?void 0:g.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ro(ls.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>ca(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&c0(e.config.tools)){const g=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),f0(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(ca(u)){const d=u,g=await d.tool();for(const m of(o=g.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:rE;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(m,v,T){var S,b;return ua(this,arguments,function*(){for(var F,B,G,ee;d<l;){u&&(d++,u=!1);const ce=yield ct(m.processParamsMaybeAddMcpUsage(T)),oe=yield ct(m.generateContentStreamInternal(ce)),x=[],D=[];try{for(var X=!0,Z=(B=void 0,Jl(oe)),ae;ae=yield ct(Z.next()),F=ae.done,!F;X=!0){ee=ae.value,X=!1;const M=ee;if(yield yield ct(M),M.candidates&&(!((S=M.candidates[0])===null||S===void 0)&&S.content)){D.push(M.candidates[0].content);for(const U of(b=M.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(d<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(U.functionCall.name)){const k=yield ct(v.get(U.functionCall.name).callTool([U.functionCall]));x.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(M){B={error:M}}finally{try{!X&&!F&&(G=Z.return)&&(yield ct(G.call(Z)))}finally{if(B)throw B.error}}if(x.length>0){u=!0;const M=new Bl;M.candidates=[{content:{role:"user",parts:x}}],yield yield ct(M);const U=[];U.push(...D),U.push({role:"user",parts:x});const k=Yn(T.contents).concat(U);T.contents=k}else break}})})(this,g,e)}async generateContentInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=eE(this.apiClient,e);return d=de("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=nE(v),S=new Bl;return Object.assign(S,T),S})}else{const m=jT(this.apiClient,e);return d=de("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=tE(v),S=new Bl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=eE(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(T){return ua(this,arguments,function*(){var S,b,F,B;try{for(var G=!0,ee=Jl(T),X;X=yield ct(ee.next()),S=X.done,!S;G=!0){B=X.value,G=!1;const Z=B,ae=nE(yield ct(Z.json()));ae.sdkHttpResponse={headers:Z.headers};const ce=new Bl;Object.assign(ce,ae),yield yield ct(ce)}}catch(Z){b={error:Z}}finally{try{!G&&!S&&(F=ee.return)&&(yield ct(F.call(ee)))}finally{if(b)throw b.error}}})})}else{const m=jT(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return ua(this,arguments,function*(){var S,b,F,B;try{for(var G=!0,ee=Jl(T),X;X=yield ct(ee.next()),S=X.done,!S;G=!0){B=X.value,G=!1;const Z=B,ae=tE(yield ct(Z.json()));ae.sdkHttpResponse={headers:Z.headers};const ce=new Bl;Object.assign(ce,ae),yield yield ct(ce)}}catch(Z){b={error:Z}}finally{try{!G&&!S&&(F=ee.return)&&(yield ct(F.call(ee)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=zN(this.apiClient,e);return d=de("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=YN(v),S=new LT;return Object.assign(S,T),S})}else{const m=GN(this.apiClient,e);return d=de("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=KN(v),S=new LT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=ix(this.apiClient,e);return d=de("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=rx(v),S=new OT;return Object.assign(S,T),S})}else{const m=nx(this.apiClient,e);return d=de("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=sx(v),S=new OT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=qN(this.apiClient,e);return l=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=BN(g),v=new Qw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=iM(this.apiClient,e);return l=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=sM(g),v=new Ww;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Ox(this.apiClient,e);return l=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=qx(g),v=new $w;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Kx(this.apiClient,e);return l=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=Yx(g),v=new Xw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Sx(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Vp(v))}else{const m=Ex(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>kp(v))}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Mx(this.apiClient,e);return d=de("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Px(v),S=new qT;return Object.assign(S,T),S})}else{const m=xx(this.apiClient,e);return d=de("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Dx(v),S=new qT;return Object.assign(S,T),S})}}async update(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=tM(this.apiClient,e);return d=de("{model}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Vp(v))}else{const m=eM(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>kp(v))}}async delete(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=VN(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=LN(v),S=new BT;return Object.assign(S,T),S})}else{const m=kN(this.apiClient,e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=UN(v),S=new BT;return Object.assign(S,T),S})}}async countTokens(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=MN(this.apiClient,e);return d=de("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=PN(v),S=new FT;return Object.assign(S,T),S})}else{const m=xN(this.apiClient,e);return d=de("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=DN(v),S=new FT;return Object.assign(S,T),S})}}async computeTokens(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=AN(this.apiClient,e);return l=de("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=CN(g),v=new Zw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=fx(this.apiClient,e);return d=de("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const T=ux(v),S=new yf;return Object.assign(S,T),S})}else{const m=cx(this.apiClient,e);return d=de("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const T=lx(v),S=new yf;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LM extends hs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Hw(e);return d=de("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const m=Fw(e);return d=de("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=kw(e);return l=de("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OM(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function qM(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>QM(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function BM(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],JM(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),s}function FM(n,e){const t={},s=f(e,["config"]);return s!=null&&h(t,["config"],BM(n,s,t)),t}function HM(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function GM(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function KM(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function YM(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],_m(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],b);const F=f(n,["systemInstruction"]);e!==void 0&&F!=null&&h(e,["setup","systemInstruction"],qM(on(F)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let oe=Ia(B);Array.isArray(oe)&&(oe=oe.map(x=>$M(Ca(x)))),h(e,["setup","tools"],oe)}const G=f(n,["sessionResumption"]);e!==void 0&&G!=null&&h(e,["setup","sessionResumption"],WM(G));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&h(e,["setup","inputAudioTranscription"],ee);const X=f(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const ce=f(n,["proactivity"]);return e!==void 0&&ce!=null&&h(e,["setup","proactivity"],ce),t}function JM(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Je(n,s));const o=f(e,["config"]);return o!=null&&h(t,["config"],YM(o,t)),t}function QM(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],HM(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],GM(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],OM(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function WM(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $M(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],zM(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],KM(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XM(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function ZM(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=XM(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class jM extends hs{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=FM(this.apiClient,e);l=de("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=ZM(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e1(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function t1(n){const e={},t=f(n,["config"]);return t!=null&&e1(t,e),e}function n1(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function i1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&n1(s,e),e}function s1(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function r1(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),t}function o1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],l1(u)),e}function a1(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&h(e,["fileName"],s);const o=f(n,["config"]);return o!=null&&r1(o,e),e}function l1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function u1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function c1(n){const e={},t=f(n,["config"]);return t!=null&&u1(t,e),e}function f1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function d1(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function h1(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&d1(s,e),e}function p1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m1(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function g1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&m1(s,e),e}function y1(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function _1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function v1(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&_1(s,e),e}function T1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E1 extends hs{constructor(e){super(),this.apiClient=e,this.list=async t=>new ro(ls.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=y1(e);return l=de("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=g1(e);o=de("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=v1(e);return l=de("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=T1(g),v=new jw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S1 extends hs{constructor(e,t=new E1(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new ro(ls.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=t1(e);return l=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=s1(e);return l=de("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=i1(e);o=de("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=c1(e);return l=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=f1(g),v=new eR;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h1(e);return l=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=p1(g),v=new tR;return Object.assign(v,m),v})}}async importFile(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a1(e);return l=de("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=o1(g),v=new hm;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A1(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function C1(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function I1(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&h(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function w1(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec"],uE(b))}else if(o==="PREFERENCE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec"],uE(b))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(d==="PREFERENCE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(g==="PREFERENCE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(m==="PREFERENCE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function R1(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&O1(l);const u=f(n,["config"]);return u!=null&&I1(u,t),t}function b1(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&q1(l,t,e);const u=f(n,["config"]);return u!=null&&w1(u,t,e),t}function N1(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function x1(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function M1(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function D1(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function P1(n,e){const t={},s=f(n,["config"]);return s!=null&&M1(s,t),t}function k1(n,e){const t={},s=f(n,["config"]);return s!=null&&D1(s,t),t}function V1(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>d0(d))),h(t,["tuningJobs"],u)}return t}function U1(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Lp(d))),h(t,["tuningJobs"],u)}return t}function L1(n,e){const t={},s=f(n,["name"]);s!=null&&h(t,["model"],s);const o=f(n,["name"]);return o!=null&&h(t,["endpoint"],o),t}function O1(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(t,["examples","examples"],o)}return t}function q1(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function d0(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&h(t,["name"],o);const l=f(n,["state"]);l!=null&&h(t,["state"],JS(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],L1(S)),t}function Lp(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&h(t,["name"],o);const l=f(n,["state"]);l!=null&&h(t,["state"],JS(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&h(t,["error"],v);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const b=f(n,["tunedModel"]);b!=null&&h(t,["tunedModel"],b);const F=f(n,["preTunedModel"]);F!=null&&h(t,["preTunedModel"],F);const B=f(n,["supervisedTuningSpec"]);B!=null&&h(t,["supervisedTuningSpec"],B);const G=f(n,["preferenceOptimizationSpec"]);G!=null&&h(t,["preferenceOptimizationSpec"],G);const ee=f(n,["tuningDataStats"]);ee!=null&&h(t,["tuningDataStats"],ee);const X=f(n,["encryptionSpec"]);X!=null&&h(t,["encryptionSpec"],X);const Z=f(n,["partnerModelTuningSpec"]);Z!=null&&h(t,["partnerModelTuningSpec"],Z);const ae=f(n,["customBaseModel"]);ae!=null&&h(t,["customBaseModel"],ae);const ce=f(n,["experiment"]);ce!=null&&h(t,["experiment"],ce);const oe=f(n,["labels"]);oe!=null&&h(t,["labels"],oe);const x=f(n,["outputUri"]);x!=null&&h(t,["outputUri"],x);const D=f(n,["pipelineJob"]);D!=null&&h(t,["pipelineJob"],D);const M=f(n,["serviceAccount"]);M!=null&&h(t,["serviceAccount"],M);const U=f(n,["tunedModelDisplayName"]);U!=null&&h(t,["tunedModelDisplayName"],U);const k=f(n,["veoTuningSpec"]);return k!=null&&h(t,["veoTuningSpec"],k),t}function B1(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&h(t,["name"],o);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(n,["done"]);u!=null&&h(t,["done"],u);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function uE(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return o!=null&&h(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F1 extends hs{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new ro(ls.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:xp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=x1(e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Lp(v))}else{const m=N1(e);return d=de("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>d0(v))}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=k1(e);return d=de("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=U1(v),S=new HT;return Object.assign(S,T),S})}else{const m=P1(e);return d=de("tunedModels",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=V1(v),S=new HT;return Object.assign(S,T),S})}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=C1(e);u=de("{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=A1(e);u=de("{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=b1(e,e);return l=de("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>Lp(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=R1(e);return l=de("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>B1(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H1{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const G1=1024*1024*8,z1=3,K1=1e3,Y1=2,vf="x-goog-upload-status";async function J1(n,e,t){var s;const o=await h0(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[vf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function Q1(n,e,t){var s;const o=await h0(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[vf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=FS(l),d=new pm;return Object.assign(d,u),d}async function h0(n,e,t){var s,o;let l=0,u=0,d=new Mp(new Response),g="upload";for(l=n.size;u<l;){const m=Math.min(G1,l-u),v=n.slice(u,u+m);u+m>=l&&(g+=", finalize");let T=0,S=K1;for(;T<z1&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[vf]));)T++,await $1(S),S=S*Y1;if(u+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[vf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function W1(n){return{size:n.size,type:n.type}}function $1(n){return new Promise(e=>setTimeout(e,n))}class X1{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await J1(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Q1(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await W1(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z1{create(e,t,s){return new j1(e,t,s)}}class j1{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cE="x-goog-api-key";class eD{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(cE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(cE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tD="gl-node/";class nD{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=Dw(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new eD(this.apiKey);this.apiClient=new yM({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:tD+"web",uploader:new X1,downloader:new H1}),this.models=new UM(this.apiClient),this.live=new xM(this.apiClient,o,new Z1),this.batches=new ab(this.apiClient),this.chats=new Hb(this.models,this.apiClient),this.caches=new qb(this.apiClient),this.files=new Zb(this.apiClient),this.operations=new LM(this.apiClient),this.authTokens=new jM(this.apiClient),this.tunings=new F1(this.apiClient),this.fileSearchStores=new S1(this.apiClient)}}const C=(n,e,t,s,o)=>({word:n,phonetic:e,vietnamese:t,example:s,type:o}),Ql={c1:[C("Wake up","/wek p/","Thc dy","I usually wake up at 6 AM.","verb"),C("Brush teeth","/br ti/","nh rng","Don't forget to brush your teeth.","verb"),C("Breakfast","/brekfst/","Ba sng","Breakfast is the most important meal.","noun"),C("Commute","/kmjut/","i lm/i li","His commute takes 40 minutes by bus.","verb"),C("Shower","/ar/","Tm vi sen","I take a shower every morning.","noun"),C("Get dressed","/et drest/","Mc qun o","She gets dressed quickly for work.","verb"),C("Routine","/rutin/","Thi quen hng ngy","My morning routine is very strict.","noun"),C("Alarm","/lrm/","ng h bo thc","I set my alarm for 7:00.","noun"),C("Coffee","/kfi/","C ph","I need coffee to start my day.","noun"),C("Lunch break","/lnt brek/","Gi ngh tra","We have a one-hour lunch break.","noun"),C("Groceries","/rosriz/","Hng tp ha","I buy groceries on my way home.","noun"),C("Dinner","/dnr/","Ba ti","We eat dinner together at 7 PM.","noun"),C("Relax","/rlks/","Th gin","I like to relax and watch TV.","verb"),C("Sleep","/slip/","Ng","Try to get 8 hours of sleep.","verb"),C("Exercise","/eksrsaz/","Tp th dc","Morning exercise gives me energy.","noun"),C("Make the bed","/mek  bed/","Dn ging","Making the bed keeps the room tidy.","verb"),C("Check emails","/tek imelz/","Kim tra email","I check emails first thing at work.","verb"),C("Laundry","/lndri/","Git i","I do laundry on weekends.","noun"),C("Chores","/trz/","Vic vt trong nh","Kids should help with household chores.","noun"),C("Nap","/np/","Gic ng ngn","A short nap can refresh you.","noun"),C("Snooze","/snuz/","Ng nng (bo thc)","I hit the snooze button three times.","verb"),C("Skincare","/sknker/","Chm sc da","She has a strict skincare routine.","noun"),C("Meditate","/medtet/","Thin","I meditate for 10 minutes daily.","verb"),C("Journal","/drnl/","Vit nht k","I journal my thoughts every night.","verb"),C("Midnight","/mdnat/","Na m","I rarely stay up past midnight.","noun"),C("Oversleep","/ovrslip/","Ng qun","I overslept and missed the bus.","verb"),C("Iron","/arn/","L (i) qun o","I need to iron my shirt.","verb"),C("Pack lunch","/pk lnt/","Chun b ba tra","I pack lunch to save money.","verb"),C("Traffic jam","/trfk dm/","Tc ng","Stuck in a traffic jam again.","noun"),C("Walk the dog","/wk  d/","Dt ch i do","He walks the dog every evening.","verb"),C("Set alarm","/set lrm/","t bo thc","Did you set the alarm?","verb"),C("Wash dishes","/w dz/","Ra bt","It's your turn to wash dishes.","verb"),C("Take out trash","/tek at tr/"," rc","Please take out the trash.","verb"),C("Mop","/mp/","Lau nh","She mopped the kitchen floor.","verb"),C("Vacuum","/vkjum/","Ht bi","I vacuum the carpets weekly.","verb"),C("Stretch","/stret/","Vn vai/gin c","Stretch before you exercise.","verb")],c2:[C("Sibling","/sbl/","Anh ch em rut","Do you have any siblings?","noun"),C("Spouse","/spas/","V/Chng","Employees and their spouses are invited.","noun"),C("Nephew","/nefju/","Chu trai","My nephew loves playing football.","noun"),C("Niece","/nis/","Chu gi","I bought a doll for my niece.","noun"),C("Generation","/denren/","Th h","There is a gap between generations.","noun"),C("Relative","/reltv/","H hng","All my relatives came to the wedding.","noun"),C("Upbringing","/pbr/","S nui dy","He had a strict upbringing.","noun"),C("Inherit","/nhert/","Tha k","She inherited the house from her grandma.","verb"),C("Gathering","/r/","Bui t hp","We have a family gathering every Sunday.","noun"),C("Bond","/bnd/","S gn kt","The bond between mother and child is strong.","noun"),C("Ancestor","/nsestr/","T tin","They honor their ancestors annually.","noun"),C("Offspring","/fspr/","Con ci","Parents protect their offspring.","noun"),C("Twins","/twnz/","Sinh i","The twins look exactly alike.","noun"),C("Adopt","/dpt/","Nhn nui","They decided to adopt a child.","verb"),C("Extended family","/kstendd fmli/","i gia nh","She lives with her extended family.","noun"),C("Nuclear family","/nuklir fmli/","Gia nh ht nhn","A nuclear family consists of parents and children.","noun"),C("Stepfather","/stepfr/","Cha dng","His stepfather is very kind.","noun"),C("Half-brother","/hf brr/","Anh em cng cha khc m (hoc ngc li)","I have one half-brother.","noun"),C("Orphan","/rfn/","Tr m ci","Batman is a famous orphan.","noun"),C("Guardian","/rdin/","Ngi gim h","Her aunt became her legal guardian.","noun"),C("In-laws","/n lz/","Nh thng gia (bn v/chng)","We are visiting my in-laws.","noun"),C("Mother-in-law","/mr n l/","M v/M chng","My mother-in-law cooks well.","noun"),C("Single parent","/sl pernt/","B/m n thn","Being a single parent is hard.","noun"),C("Engagement","/nedmnt/","nh hn","They announced their engagement.","noun"),C("Marriage","/mrd/","Hn nhn","They have a happy marriage.","noun"),C("Divorce","/dvrs/","Ly hn","The divorce was finalized yesterday.","noun"),C("Upbringing","/pbr/","S dy d","She had a good upbringing.","noun"),C("Childhood","/taldhd/","Tui th","I had a happy childhood.","noun"),C("Breadwinner","/bredwnr/","Tr ct gia nh","He is the main breadwinner.","noun"),C("Household","/hashold/","H gia nh","The whole household was asleep.","noun"),C("Triplets","/trplts/","Sinh ba","Triplets are quite rare.","noun"),C("Genealogy","/dinildi/","Gia ph hc","He is interested in genealogy.","noun"),C("Toddler","/tdlr/","Tr tp i","The toddler is learning to walk.","noun"),C("Adolescent","/dlesnt/","Thanh thiu nin","Adolescent years can be difficult.","noun"),C("Sibling rivalry","/sbl ravlri/","S ganh ua gia anh ch em","Sibling rivalry is normal.","noun")],c3:[C("Ingredient","/nridint/","Nguyn liu","Fresh ingredients make better food.","noun"),C("Recipe","/respi/","Cng thc nu n","Can I have your cookie recipe?","noun"),C("Delicious","/dls/","Ngon","This soup is delicious.","adjective"),C("Appetizer","/ptazr/","Mn khai v","We ordered nachos as an appetizer.","noun"),C("Dessert","/dzrt/","Mn trng ming","Ice cream is my favorite dessert.","noun"),C("Beverage","/bevrd/"," ung","Hot beverages are served here.","noun"),C("Cuisine","/kwzin/","m thc","I love Italian cuisine.","noun"),C("Chef","/ef/","u bp","The chef is preparing the main course.","noun"),C("Spicy","/spasi/","Cay","I can't eat spicy food.","adjective"),C("Salty","/slti/","Mn","This soup is too salty.","adjective"),C("Bitter","/btr/","ng","Dark chocolate tastes bitter.","adjective"),C("Sour","/sar/","Chua","Lemons are very sour.","adjective"),C("Grill","/rl/","Nng (v)","Let's grill some burgers.","verb"),C("Boil","/bl/","Luc/Si","Boil the water for pasta.","verb"),C("Fry","/fra/","Chin/Rn","Fry the eggs in butter.","verb"),C("Stir","/str/","Khuy/o","Stir the sauce gently.","verb"),C("Chop","/tp/","Thi/Cht","Chop the onions finely.","verb"),C("Peel","/pil/","Gt v","Peel the potatoes first.","verb"),C("Bake","/bek/","Nng (l)","I bake bread every Sunday.","verb"),C("Marinate","/mrnet/","p","Marinate the chicken for an hour.","verb"),C("Vegetarian","/vedterin/","Ngi n chay","She is a vegetarian.","noun"),C("Nutrition","/nutrn/","Dinh dng","Good nutrition is vital for health.","noun"),C("Calorie","/klri/","Calo","This burger has high calories.","noun"),C("Fiber","/fabr/","Cht x","Eat more fiber for digestion.","noun"),C("Protein","/protin/","Cht m","Meat is rich in protein.","noun"),C("Dairy","/deri/","Sn phm t sa","I am allergic to dairy.","noun"),C("Leftovers","/leftovrz/"," n tha","We ate leftovers for lunch.","noun"),C("Feast","/fist/","Yn tic","The wedding feast was huge.","noun"),C("Starving","/strv/","i l","I missed lunch and I'm starving.","adjective"),C("Cutlery","/ktlri/","Dao ko ( n)","Put the cutlery on the table.","noun"),C("Napkin","/npkn/","Khn n","Use a napkin to wipe your mouth.","noun"),C("Menu","/menju/","Thc n","Can I see the menu, please?","noun"),C("Waiter","/wetr/","Bi bn","The waiter brought our food.","noun"),C("Bill","/bl/","Ha n","Can we have the bill?","noun"),C("Tip","/tp/","Tin bo","Don't forget to leave a tip.","noun")],c4:[C("Destination","/destnen/","im n","Paris is a popular destination.","noun"),C("Itinerary","/atnreri/","Lch trnh","Our itinerary includes three cities.","noun"),C("Passport","/psprt/","H chiu","Don't lose your passport.","noun"),C("Visa","/viz/","Th thc","I need a visa to enter the USA.","noun"),C("Luggage","/ld/","Hnh l","Check your luggage at the counter.","noun"),C("Accommodation","/kmden/","Ch ","We booked cheap accommodation.","noun"),C("Souvenir","/suvnr/","Qu lu nim","I bought a souvenir for my mom.","noun"),C("Sightseeing","/satsi/","Tham quan","We went sightseeing in London.","noun"),C("Departure","/dprtr/","S khi hnh","The departure time is 10 AM.","noun"),C("Arrival","/ravl/","S n ni","Check the arrival board.","noun"),C("Boarding pass","/brd ps/","Th ln my bay","Show your boarding pass at the gate.","noun"),C("Customs","/kstmz/","Hi quan","It took an hour to clear customs.","noun"),C("Currency","/krnsi/","Tin t","What is the local currency?","noun"),C("Delay","/dle/","S chm tr","The flight had a 2-hour delay.","noun"),C("Reservation","/rezrven/","S t ch","I have a hotel reservation.","noun"),C("Guidebook","/adbk/","Sch hng dn","The guidebook recommends this cafe.","noun"),C("Backpacker","/bkpkr/","Ty ba l (du lch bi)","Many backpackers visit Vietnam.","noun"),C("Resort","/rzrt/","Khu ngh dng","They stayed at a luxury resort.","noun"),C("Cruise","/kruz/","Du thuyn","We went on a Caribbean cruise.","noun"),C("Embassy","/embsi/","i s qun","Contact the embassy if you lose your passport.","noun"),C("Jet lag","/det l/","Lch mi gi","I'm suffering from jet lag.","noun"),C("Take off","/tek f/","Ct cnh","The plane takes off in 10 minutes.","verb"),C("Land","/lnd/","H cnh","We landed safely.","verb"),C("Terminal","/trmnl/","Nh ga (sn bay)","Go to Terminal 2.","noun"),C("Passenger","/psndr/","Hnh khch","Passengers must wear seatbelts.","noun"),C("Explore","/ksplr/","Khm ph","I love to explore new places.","verb"),C("Adventure","/dventr/","Cuc phiu lu","It was an amazing adventure.","noun"),C("Scenery","/sinri/","Phong cnh","The mountain scenery is breathtaking.","noun"),C("Local","/lokl/","Ngi dn a phng","Ask a local for directions.","noun"),C("Expedition","/ekspdn/","Cuc thm him","They planned an expedition to the North Pole.","noun"),C("Voyage","/vd/","Chuyn i bin xa","The voyage lasted three weeks.","noun"),C("Excursion","/kskrn/","Chuyn tham quan ngn","We took an excursion to the caves.","noun"),C("Hostel","/hstl/","Nh ngh gi r","Students often stay in hostels.","noun"),C("Check-in","/tek n/","Lm th tc vo","Check-in is at 2 PM.","noun"),C("Check-out","/tek at/","Lm th tc ra","Check-out is before noon.","noun")],t1:[C("Deadline","/dedlan/","Hn cht","The deadline for the report is tomorrow.","noun"),C("Colleague","/kli/","ng nghip","I'm having lunch with a colleague.","noun"),C("Proposal","/prpozl/","Bn  xut","The manager approved my proposal.","noun"),C("Agenda","/dend/","Chng trnh ngh s","What's on the agenda for the meeting?","noun"),C("Supervisor","/suprvazr/","Ngi gim st","Report any issues to your supervisor.","noun"),C("Promotion","/prmon/","Thng chc","She got a promotion last month.","noun"),C("Resign","/rzan/","T chc","He decided to resign for personal reasons.","verb"),C("Salary","/slri/","Tin lng","The company offers a competitive salary.","noun"),C("Benefits","/benfts/","Phc li","Health insurance is one of the benefits.","noun"),C("Recruit","/rkrut/","Tuyn dng","We need to recruit more engineers.","verb"),C("Applicant","/plknt/","ng vin","There were 50 applicants for the job.","noun"),C("Quarterly","/kwrtrli/","Hng qu","We have quarterly performance reviews.","adjective"),C("Expansion","/kspnn/","S m rng","The company plans expansion into Asia.","noun"),C("Strategy","/strtdi/","Chin lc","We need a new marketing strategy.","noun"),C("Client","/klant/","Khch hng","We are meeting a potential client.","noun"),C("Contract","/kntrkt/","Hp ng","Read the contract carefully before signing.","noun"),C("Negotiate","/noiet/","m phn","We need to negotiate a better price.","verb"),C("Headquarters","/hedkwrtrz/","Tr s chnh","The headquarters are in New York.","noun"),C("Branch","/brnt/","Chi nhnh","They opened a new branch in Hanoi.","noun"),C("Efficiency","/fnsi/","S hiu qu","We must improve our operational efficiency.","noun"),C("Collaborate","/klbret/","Hp tc","We collaborate with international teams.","verb"),C("Reschedule","/riskedul/","Ln lch li","Can we reschedule the meeting?","verb"),C("Briefing","/brif/","Cuc hp vn tt","Attend the morning briefing.","noun"),C("Intern","/ntrn/","Thc tp sinh","The intern is learning quickly.","noun"),C("Executive","/zekjtv/","iu hnh/Qun tr vin","She is a senior executive.","noun"),C("Department","/dprtmnt/","Phng ban","Contact the IT department.","noun"),C("Invoice","/nvs/","Ha n /Chng t","Please send the invoice to accounting.","noun"),C("Budget","/bdt/","Ngn sch","We are over budget this month.","noun"),C("Competitor","/kmpettr/","i th cnh tranh","We must analyze our competitors.","noun"),C("Workflow","/wrkflo/","Quy trnh lm vic","We optimized the workflow.","noun"),C("Feedback","/fidbk/","Phn hi","Customer feedback is important.","noun"),C("Presentation","/preznten/","Bi thuyt trnh","Your presentation was excellent.","noun"),C("Retirement","/rtarmnt/","S ngh hu","He is planning his retirement.","noun"),C("Strike","/strak/","nh cng","The workers are on strike.","noun"),C("Vacancy","/veknsi/","V tr trng","We have a vacancy in sales.","noun"),C("Workload","/wrklod/","Khi lng cng vic","My workload is very heavy.","noun")],t2:[C("Candidate","/knddt/","ng c vin","He is the best candidate.","noun"),C("Resume","/rzum/","S yu l lch (CV)","Send your resume to HR.","noun"),C("Interview","/ntrvju/","Phng vn","I have a job interview tomorrow.","noun"),C("Hire","/har/","Thu/Tuyn","We decided to hire her.","verb"),C("Fire","/far/","Sa thi","He was fired for misconduct.","verb"),C("Training","/tren/","o to","New staff need training.","noun"),C("Payroll","/perol/","Bng lng","Payroll is processed on the 25th.","noun"),C("Bonus","/bons/","Tin thng","We got a Christmas bonus.","noun"),C("Policy","/plsi/","Chnh sch","Read the company policy.","noun"),C("Pension","/penn/","Lng hu","The pension plan is generous.","noun"),C("Shift","/ft/","Ca lm vic","I work the night shift.","noun"),C("Overtime","/ovrtam/","Lm thm gi","I worked 5 hours of overtime.","noun"),C("Evaluation","/vljuen/","S nh gi","Annual performance evaluation.","noun"),C("Qualification","/kwlfken/","Bng cp/Trnh ","She has excellent qualifications.","noun"),C("Background check","/bkrand tek/","Kim tra l lch","We do a background check on everyone.","noun"),C("Orientation","/rinten/","Bui nh hng","New employee orientation is Monday.","noun"),C("Probation","/proben/","Thi gian th vic","He is on 3 months probation.","noun"),C("Dismiss","/dsms/","Sa thi/Gii tn","He was dismissed for stealing.","verb"),C("Layoff","/lef/","Ct gim nhn s","Economic crisis caused layoffs.","noun"),C("Vacancy","/veknsi/","Ch trng","Is there any vacancy?","noun"),C("Apprentice","/prents/","Ngi hc vic","He is an electrician's apprentice.","noun"),C("Compensation","/kmpensen/","S n b/Th lao","Fair compensation for the work.","noun"),C("Diversity","/davrsti/","S a dng","We value workplace diversity.","noun"),C("Harassment","/hrsmnt/","S quy ri","Report any harassment immediately.","noun"),C("Incentive","/nsentv/","S khch l","Bonuses are a good incentive.","noun"),C("Mentor","/mentr/","Ngi c vn","My mentor taught me everything.","noun"),C("Morale","/mrl/","Tinh thn (nhn vin)","Team morale is low.","noun"),C("Productivity","/prodktvti/","Nng sut","Productivity increased by 10%.","noun"),C("Reference","/refrns/","Ngi tham kho (trong CV)","Can you provide a reference?","noun"),C("Retain","/rten/","Gi chn","It is hard to retain good staff.","verb"),C("Strike","/strak/","nh cng","Union called for a strike.","noun"),C("Talent","/tlnt/","Nhn ti","We are looking for top talent.","noun"),C("Turnover","/trnovr/","T l ngh vic (hoc doanh thu)","High staff turnover is bad.","noun"),C("Workforce","/wrkfrs/","Lc lng lao ng","We have a skilled workforce.","noun"),C("Review","/rvju/","nh gi/Xem xt","Performance review meeting.","noun")],t3:[C("Advertising","/dvrtaz/","Qung co","Advertising increases sales.","noun"),C("Brand","/brnd/","Thng hiu","Apple is a famous brand.","noun"),C("Campaign","/kmpen/","Chin dch","We launched a new campaign.","noun"),C("Consumer","/knsumr/","Ngi tiu dng","Understanding consumer behavior.","noun"),C("Demographic","/demrfk/","Nhn khu hc","Targeting a younger demographic.","noun"),C("Market share","/mrkt er/","Th phn","Our market share is growing.","noun"),C("Sponsor","/spnsr/","Nh ti tr","Who is the main sponsor?","noun"),C("Target","/trt/","Mc tiu","We hit our sales target.","noun"),C("Trend","/trend/","Xu hng","Follow the latest trends.","noun"),C("Launch","/lnt/","Ra mt","Product launch is next week.","verb"),C("Promotion","/prmon/","Khuyn mi","Buy 1 Get 1 Free promotion.","noun"),C("Competitor","/kmpettr/","i th","Watch out for competitors.","noun"),C("Distribution","/dstrbjun/","S phn phi","Expand distribution channels.","noun"),C("Logo","/loo/","Biu trng","The logo is very recognizable.","noun"),C("Slogan","/slon/","Khu hiu","Just Do It is a famous slogan.","noun"),C("Survey","/srve/","Kho st","Fill out a customer survey.","noun"),C("Segment","/semnt/","Phn khc","Luxury market segment.","noun"),C("Niche","/ni/","Th trng ngch","We found a profitable niche.","noun"),C("Viral","/varl/","Lan truyn nhanh","The video went viral.","adjective"),C("Endorse","/ndrs/","i din/Bo chng","Celebrities endorse products.","verb"),C("Flyer","/flar/","T ri","Hand out flyers on the street.","noun"),C("Brochure","/bror/","T gp qung co","Read the travel brochure.","noun"),C("Billboard","/blbrd/","Bin qung co ln","I saw it on a billboard.","noun"),C("Commercial","/kmrl/","Qung co (TV/Radio)","Super Bowl commercials are expensive.","noun"),C("Public relations","/pblk rlenz/","Quan h cng chng (PR)","Good PR improves image.","noun"),C("Strategy","/strtdi/","Chin lc","Marketing strategy.","noun"),C("Loyalty","/llti/","S trung thnh","Brand loyalty is valuable.","noun"),C("Merchandise","/mrtndas/","Hng ha","Display the merchandise well.","noun"),C("Retail","/ritel/","Bn l","Retail price is $50.","noun"),C("Wholesale","/holsel/","Bn bun","Wholesale prices are lower.","noun"),C("Premium","/primim/","Cao cp","Premium quality product.","adjective"),C("Discount","/dskant/","Gim gi","Get a 20% discount.","noun"),C("Coupon","/kupn/","Phiu gim gi","Use this coupon at checkout.","noun"),C("Feedback","/fidbk/","Phn hi","We value your feedback.","noun"),C("Influencer","/nflunsr/","Ngi c nh hng","Hire an influencer.","noun")],i1:[C("Pollution","/plun/","S  nhim","Air pollution is a major problem.","noun"),C("Conservation","/knsrven/","S bo tn","Wildlife conservation is crucial.","noun"),C("Renewable","/rnubl/","C th ti to","Solar power is a renewable energy source.","adjective"),C("Sustainable","/sstenbl/","Bn vng","We need sustainable development goals.","adjective"),C("Extinction","/kstkn/","Tuyt chng","Many species face extinction.","noun"),C("Habitat","/hbtt/","Mi trng sng","Deforestation destroys natural habitats.","noun"),C("Global warming","/lobl wrm/","S nng ln ton cu","Global warming affects sea levels.","noun"),C("Biodiversity","/baodavrsti/","a dng sinh hc","The rainforest has rich biodiversity.","noun"),C("Emission","/imn/","Kh thi","We must reduce carbon emissions.","noun"),C("Recycle","/risakl/","Ti ch","It is important to recycle plastic.","verb"),C("Contaminate","/kntmnet/","Lm  nhim","Factory waste contaminated the river.","verb"),C("Drought","/drat/","Hn hn","The drought caused crop failure.","noun"),C("Ecosystem","/ikosstm/","H sinh thi","Oil spills damage the marine ecosystem.","noun"),C("Deforestation","/difrsten/","Nn ph rng","Deforestation leads to soil erosion.","noun"),C("Climate change","/klamt tend/","Bin i kh hu","Climate change causes extreme weather.","noun"),C("Fossil fuel","/fsl fjul/","Nhin liu ha thch","Burning fossil fuels releases CO2.","noun"),C("Greenhouse effect","/rinhas fekt/","Hiu ng nh knh","The greenhouse effect warms the Earth.","noun"),C("Ozone layer","/ozon ler/","Tng ozone","The ozone layer protects us from UV rays.","noun"),C("Waste","/west/","Rc thi","Reduce plastic waste.","noun"),C("Landfill","/lndfl/","Bi rc","Most trash ends up in landfills.","noun"),C("Organic","/rnk/","Hu c","Buy organic vegetables.","adjective"),C("Solar panel","/solr pnl/","Tm pin nng lng mt tri","Install solar panels on the roof.","noun"),C("Wind turbine","/wnd trban/","Tuabin gi","Wind turbines generate electricity.","noun"),C("Carbon footprint","/krbn ftprnt/","Du chn carbon","Reduce your carbon footprint.","noun"),C("Endangered","/ndendrd/","C nguy c tuyt chng","Pandas are endangered animals.","adjective"),C("Poaching","/pot/","Sn trm","Poaching threatens elephants.","noun"),C("Erosion","/ron/","S xi mn","Soil erosion destroys farmland.","noun"),C("Glacier","/ler/","Sng bng","Glaciers are melting fast.","noun"),C("Alternative energy","/ltrntv enrdi/","Nng lng thay th","We need alternative energy sources.","noun"),C("Disposable","/dspozbl/","Dng mt ln","Avoid disposable plastic cups.","adjective"),C("Eco-friendly","/iko frendli/","Thn thin mi trng","Use eco-friendly bags.","adjective"),C("Preserve","/przrv/","Bo tn/Gn gi","Preserve nature for future generations.","verb"),C("Natural resources","/ntrl rsrsz/","Ti nguyn thin nhin","Conserve natural resources.","noun"),C("Atmosphere","/tmsfr/","Bu kh quyn","Pollutants enter the atmosphere.","noun"),C("Radiation","/redien/","Bc x","Nuclear radiation is dangerous.","noun")],i2:[C("Curriculum","/krkjlm/","Chng trnh ging dy","The school curriculum needs updating.","noun"),C("Dissertation","/dsrten/","Lun vn","He is writing his doctoral dissertation.","noun"),C("Tuition","/tun/","Hc ph","University tuition is expensive.","noun"),C("Scholarship","/sklrp/","Hc bng","She won a full scholarship.","noun"),C("Literacy","/ltrsi/","Trnh  hc vn/Bit ch","Adult literacy rates are rising.","noun"),C("Lecture","/lektr/","Bi ging","The professor gave an interesting lecture.","noun"),C("Seminar","/semnr/","Hi tho","Attend the research seminar.","noun"),C("Assignments","/sanmnts/","Bi tp v nh","I have three assignments due.","noun"),C("Deadline","/dedlan/","Hn cht","Don't miss the deadline.","noun"),C("Plagiarism","/pledrzm/","o vn","Plagiarism leads to expulsion.","noun"),C("Graduate","/rdut/","Tt nghip","He will graduate next year.","verb"),C("Degree","/dri/","Bng cp","She has a master's degree.","noun"),C("Bachelor","/btlr/","C nhn","Bachelor of Arts.","noun"),C("Master","/mstr/","Thc s","Master of Science.","noun"),C("PhD","/pi et di/","Tin s","He is studying for a PhD.","noun"),C("Campus","/kmps/","Khun vin trng","The campus is very large.","noun"),C("Faculty","/fklti/","Khoa (trng H)","Faculty of Engineering.","noun"),C("Dormitory","/drmtri/","K tc x","Living in a dormitory is fun.","noun"),C("Enroll","/nrol/","ng k nhp hc","Enroll in the course early.","verb"),C("Exam","/zm/","K thi","Final exams are stressful.","noun"),C("Grade","/red/","im s","He got a good grade.","noun"),C("Coursework","/krswrk/"," n mn hc","Coursework counts for 50%.","noun"),C("Qualification","/kwlfken/","Chng ch/Bng cp","Teaching qualifications.","noun"),C("Illiterate","/ltrt/","M ch","Helping illiterate adults learn to read.","adjective"),C("Concentrate","/knsntret/","Tp trung","I can't concentrate with this noise.","verb"),C("Revise","/rvaz/","n tp","Revise for the test.","verb"),C("Tutor","/tutr/","Gia s","She hired a math tutor.","noun"),C("Vocational","/vokenl/","Hc ngh","Vocational training school.","adjective"),C("Distance learning","/dstns lrn/","Hc t xa","Distance learning is popular now.","noun"),C("Semester","/smestr/","Hc k","The spring semester starts in January.","noun"),C("Major","/medr/","Chuyn ngnh","What is your major?","noun"),C("Minor","/manr/","Ngnh ph","I have a minor in history.","noun"),C("Drop out","/drp at/","B hc","He dropped out of college.","verb"),C("Knowledge","/nld/","Kin thc","Gain new knowledge.","noun"),C("Research","/rsrt/","Nghin cu","Conduct scientific research.","noun")],te1:[C("Algorithm","/lrm/","Thut ton","Google uses complex search algorithms.","noun"),C("Database","/detbes/","C s d liu","All user info is stored in the database.","noun"),C("Interface","/ntrfes/","Giao din","The user interface is very intuitive.","noun"),C("Bug","/b/","Li phn mm","I spent hours fixing a bug.","noun"),C("Deploy","/dpl/","Trin khai","We will deploy the update tonight.","verb"),C("Encryption","/nkrpn/","M ha","Encryption keeps data safe.","noun"),C("Framework","/fremwrk/","Khung lm vic","React is a popular JS framework.","noun"),C("Variable","/veribl/","Bin s","Define the variable before using it.","noun"),C("Backend","/bkend/","Hu phng (Server)","He specializes in backend development.","noun"),C("Frontend","/frntend/","Tin phng (UI)","I enjoy frontend design.","noun"),C("Cloud computing","/klad kmpjut/","in ton m my","AWS is a cloud computing service.","noun"),C("Open-source","/opn srs/","M ngun m","Linux is an open-source OS.","adjective"),C("Integration","/ntren/","S tch hp","Seamless integration with third-party apps.","noun"),C("Scalability","/skelblti/","Kh nng m rng","Scalability is key for growing apps.","noun"),C("Debugging","/dib/","G li","Debugging took longer than expected.","noun"),C("Repository","/rpztri/","Kho lu tr (code)","Push the code to the repository.","noun"),C("Compile","/kmpal/","Bin dch","Compile the source code.","verb"),C("Latency","/letnsi/"," tr","Low latency is good for gaming.","noun"),C("Bandwidth","/bndwd/","Bng thng","High bandwidth connection.","noun"),C("Protocol","/protkl/","Giao thc","HTTP is a web protocol.","noun"),C("Authentication","/entken/","Xc thc","Two-factor authentication.","noun"),C("Authorization","/rzen/","Cp quyn","Authorization failed.","noun"),C("Cache","/k/","B nh m","Clear the browser cache.","noun"),C("Server","/srvr/","My ch","The server is down.","noun"),C("Domain","/domen/","Tn min","Buy a new domain name.","noun"),C("Hosting","/host/","Lu tr web","Web hosting service.","noun"),C("Version control","/vrn kntrol/","Qun l phin bn","Git is a version control system.","noun"),C("Agile","/dl/","Linh hot (phng php)","Agile software development.","adjective"),C("Scrum","/skrm/","Scrum (quy trnh)","Daily scrum meeting.","noun"),C("Sprint","/sprnt/","Giai on nc rt","Two-week sprint cycle.","noun"),C("Stack","/stk/","Ngn xp / B cng ngh","Full stack developer.","noun"),C("Array","/re/","Mng","Sort the array.","noun"),C("Loop","/lup/","Vng lp","Infinite loop error.","noun"),C("Function","/fkn/","Hm","Call the function.","noun"),C("Parameter","/prmtr/","Tham s","Pass parameters to the function.","noun")],te2:[C("Malware","/mlwer/","Phn mm c hi","Scan your PC for malware.","noun"),C("Firewall","/farwl/","Tng la","The firewall blocks attacks.","noun"),C("Phishing","/f/","La o qua mng","Don't click on phishing emails.","noun"),C("Hacker","/hkr/","Tin tc","Hackers stole the data.","noun"),C("Vulnerability","/vlnrblti/","L hng bo mt","Patch the system vulnerability.","noun"),C("Encrypted","/nkrptd/"," m ha","The message is encrypted.","adjective"),C("Breach","/brit/","S vi phm/Xm nhp","Data breach reported.","noun"),C("Ransomware","/rnsmwer/","M c tng tin","Ransomware locked the files.","noun"),C("Spyware","/spawer/","Phn mm gin ip","Spyware tracks your activity.","noun"),C("Authentication","/entken/","Xc thc","Multi-factor authentication.","noun"),C("Biometric","/baometrk/","Sinh trc hc","Biometric scan required.","adjective"),C("Token","/tokn/","M thng bo (bo mt)","Security token.","noun"),C("VPN","/vi pi en/","Mng ring o","Use a VPN for privacy.","noun"),C("Trojan","/trodn/","M c Trojan","Trojan horse virus.","noun"),C("Worm","/wrm/","Su my tnh","The worm spread through the network.","noun"),C("Threat","/ret/","Mi e da","Cyber security threats.","noun"),C("Exploit","/eksplt/","Khai thc l hng","Zero-day exploit.","noun"),C("Patch","/pt/","Bn v li","Install the security patch.","noun"),C("Backup","/bkp/","Sao lu","Perform a daily backup.","noun"),C("Recovery","/rkvri/","Khi phc","Disaster recovery plan.","noun"),C("Privacy","/pravsi/","S ring t","Protect user privacy.","noun"),C("Identity theft","/adentti eft/","Trm cp danh tnh","Prevent identity theft.","noun"),C("Botnet","/btnet/","Mng my tnh ma","The botnet attacked the server.","noun"),C("DDoS","/di ds/","Tn cng t chi dch v","DDoS attack took down the site.","noun"),C("Keylogger","/kilr/","Phn mm ghi phm","Keyloggers steal passwords.","noun"),C("Audit","/dt/","Kim ton/Kim tra","Security audit.","noun"),C("Compliance","/kmplans/","S tun th","Regulatory compliance.","noun"),C("Incident","/nsdnt/","S c","Report the security incident.","noun"),C("Forensics","/frensks/","Php y (k thut s)","Digital forensics investigation.","noun"),C("Alert","/lrt/","Cnh bo","Security alert triggered.","noun"),C("Credentials","/krdenlz/","Thng tin ng nhp","Do not share credentials.","noun"),C("Whitelist","/watlst/","Danh sch trng (cho php)","Add IP to whitelist.","noun"),C("Blacklist","/blklst/","Danh sch en (chn)","Blacklist suspicious IPs.","noun"),C("Sandbox","/sndbks/","Mi trng th nghim an ton","Run the virus in a sandbox.","noun"),C("Protocol","/protkl/","Giao thc","Secure protocol.","noun")],m1:[C("Skull","/skl/","Hp s","The skull protects the brain.","noun"),C("Spine","/span/","Ct sng","He injured his spine.","noun"),C("Rib","/rb/","Xng sn","Broken rib.","noun"),C("Lung","/l/","Phi","Smoking damages the lungs.","noun"),C("Heart","/hrt/","Tim","The heart pumps blood.","noun"),C("Liver","/lvr/","Gan","The liver filters toxins.","noun"),C("Kidney","/kdni/","Thn","Kidney stones are painful.","noun"),C("Stomach","/stmk/","D dy","My stomach hurts.","noun"),C("Intestine","/ntestn/","Rut","Small and large intestines.","noun"),C("Muscle","/msl/","C bp","Build muscle at the gym.","noun"),C("Vein","/ven/","Tnh mch","Veins carry blood to the heart.","noun"),C("Artery","/rtri/","ng mch","Arteries carry oxygenated blood.","noun"),C("Nerve","/nrv/","Dy thn kinh","Nerve damage.","noun"),C("Joint","/dnt/","Khp","Knee joint pain.","noun"),C("Tissue","/tu/","M","Scar tissue.","noun"),C("Skeleton","/skeltn/","B xng","Human skeleton.","noun"),C("Jaw","/d/","Hm","Clench your jaw.","noun"),C("Throat","/rot/","C hng","Sore throat.","noun"),C("Elbow","/elbo/","Khuu tay","Tennis elbow.","noun"),C("Wrist","/rst/","C tay","Sprained wrist.","noun"),C("Ankle","/kl/","Mt c chn","Twisted ankle.","noun"),C("Thigh","/a/","i","Thigh muscle.","noun"),C("Calf","/kf/","Bp chn","Calf cramp.","noun"),C("Heel","/hil/","Gt chn","Achilles heel.","noun"),C("Organ","/rn/","C quan (ni tng)","Organ donor.","noun"),C("Blood cell","/bld sel/","T bo mu","Red blood cells.","noun"),C("Brain","/bren/","No","The brain controls the body.","noun"),C("Pancreas","/pkris/","Ty","Pancreas produces insulin.","noun"),C("Bladder","/bldr/","Bng quang","Full bladder.","noun"),C("Thyroid","/ard/","Tuyn gip","Thyroid problems.","noun"),C("Ligament","/lmnt/","Dy chng","Torn ligament.","noun"),C("Tendon","/tendn/","Gn","Achilles tendon.","noun"),C("Cartilage","/krtld/","Sn","Cartilage damage.","noun"),C("Skin","/skn/","Da","Skin is the largest organ.","noun"),C("Pulse","/pls/","Mch","Check the pulse.","noun")],m2:[C("Surgeon","/srdn/","Bc s phu thut","The surgeon performed the operation.","noun"),C("Nurse","/nrs/","Y t","The nurse checked my blood pressure.","noun"),C("Patient","/pent/","Bnh nhn","The patient is recovering.","noun"),C("Diagnosis","/danoss/","Chn on","Early diagnosis is important.","noun"),C("Prescription","/prskrpn/","n thuc","Pick up the prescription.","noun"),C("Symptom","/smptm/","Triu chng","Flu symptoms include fever.","noun"),C("Treatment","/tritmnt/","iu tr","Cancer treatment.","noun"),C("Emergency","/imrdnsi/","Khn cp","Call emergency services.","noun"),C("Ambulance","/mbjlns/","Xe cu thng","The ambulance arrived quickly.","noun"),C("Ward","/wrd/","Phng bnh","Maternity ward.","noun"),C("Clinic","/klnk/","Phng khm","Dental clinic.","noun"),C("Pharmacy","/frmsi/","Nh thuc","Go to the pharmacy.","noun"),C("Vaccine","/vksin/","Vc xin","Flu vaccine.","noun"),C("Antibiotic","/ntibatk/","Thuc khng sinh","Take antibiotics for infection.","noun"),C("Anesthesia","/nsi/","Gy m/t","Under general anesthesia.","noun"),C("Operation","/pren/","Ca phu thut","Minor operation.","noun"),C("Recovery","/rkvri/","S hi phc","Speedy recovery.","noun"),C("Intensive care","/ntensv ker/","Chm sc c bit (ICU)","He is in intensive care.","noun"),C("Appointment","/pntmnt/","Cuc hn","Doctor's appointment.","noun"),C("Infection","/nfekn/","S nhim trng","Prevent infection.","noun"),C("Virus","/vars/","Vi rt","Viral infection.","noun"),C("Bacteria","/bktri/","Vi khun","Kills 99% of bacteria.","noun"),C("Allergy","/lrdi/","D ng","Peanut allergy.","noun"),C("Bandage","/bndd/","Bng gc","Wrap the wound in a bandage.","noun"),C("Cast","/kst/","B bt","He has a cast on his leg.","noun"),C("Crutches","/krtz/","Nng","Walking on crutches.","noun"),C("X-ray","/eks re/","Chp X-quang","Take an X-ray.","noun"),C("MRI","/em r a/","Chp cng hng t","MRI scan.","noun"),C("Blood pressure","/bld prer/","Huyt p","High blood pressure.","noun"),C("Stethoscope","/steskop/","ng nghe","The doctor used a stethoscope.","noun"),C("Thermometer","/rmmtr/","Nhit k","Check temperature with a thermometer.","noun"),C("Syringe","/srnd/","ng tim","Needle and syringe.","noun"),C("Dose","/dos/","Liu lng","Daily dose.","noun"),C("Side effect","/sad fekt/","Tc dng ph","Drowsiness is a side effect.","noun"),C("Specialist","/spelst/","Bc s chuyn khoa","Refer to a specialist.","noun")]},fE=n=>[C("Concept","/knsept/","Khi nim",`Understanding the basic concept of ${n}.`,"noun"),C("Theory","/ri/","L thuyt","In theory, this should work.","noun"),C("Practice","/prkts/","Thc hnh","Practice makes perfect.","noun"),C("Mastery","/mstri/","S thnh tho","He achieved mastery of the subject.","noun"),C("Knowledge","/nld/","Kin thc","Knowledge is power.","noun")],iD="PLACEHOLDER_API_KEY",Op=async(n,e,t=[])=>{try{const s=new nD({apiKey:iD}),o="gemini-2.5-flash";let l=`Generate ${e} English vocabulary words related to the topic: "${n}". 
    For each word, provide:
    1. The word itself.
    2. Phonetic transcription (IPA).
    3. Vietnamese translation (meaning).
    4. A short example sentence in English.
    5. Part of speech (noun, verb, etc.).
    
    Ensure the words vary in difficulty but are relevant to the topic.`;t.length>0&&(l+=`

IMPORTANT: Do NOT include the following words as they are already learned: ${t.join(", ")}.`);const d=(await s.models.generateContent({model:o,contents:l,config:{responseMimeType:"application/json",responseSchema:{type:fn.ARRAY,items:{type:fn.OBJECT,properties:{word:{type:fn.STRING},phonetic:{type:fn.STRING},vietnamese:{type:fn.STRING},example:{type:fn.STRING},type:{type:fn.STRING}},required:["word","phonetic","vietnamese","example","type"]}}}})).text;return d?JSON.parse(d):fE(n)}catch(s){return console.error("Error generating vocabulary:",s),fE(n)}},sD=async(n,e,t,s=[])=>Ql[n]?(console.log(`[Cache Hit] Loading fixed lesson for: ${e}`),{words:Ql[n],isStatic:!0}):(console.log(`[Cache Miss] Generating AI lesson for: ${e}`),{words:await Op(e,t,s),isStatic:!1}),rD=()=>{};var dE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},oD=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],d=n[t++],g=((o&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},m0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,d=u?n[o+1]:0,g=o+2<n.length,m=g?n[o+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,b=m&63;g||(b=64,u||(S=64)),s.push(t[v],t[T],t[S],t[b])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(p0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):oD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||m==null||T==null)throw new aD;const S=l<<2|d>>4;if(s.push(S),m!==64){const b=d<<4&240|m>>2;if(s.push(b),T!==64){const F=m<<6&192|T;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class aD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lD=function(n){const e=p0(n);return m0.encodeByteArray(e,!0)},Tf=function(n){return lD(n).replace(/\./g,"")},g0=function(n){try{return m0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=()=>uD().__FIREBASE_DEFAULTS__,fD=()=>{if(typeof process>"u"||typeof dE>"u")return;const n=dE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},dD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&g0(n[1]);return e&&JSON.parse(e)},zf=()=>{try{return rD()||cD()||fD()||dD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},y0=n=>{var e,t;return(t=(e=zf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},hD=n=>{const e=y0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},_0=()=>{var n;return(n=zf())==null?void 0:n.config},v0=n=>{var e;return(e=zf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function T0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Tf(JSON.stringify(t)),Tf(JSON.stringify(u)),""].join(".")}const Wl={};function gD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?n.emulator.push(e):n.prod.push(e);return n}function yD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let hE=!1;function E0(n,e){if(typeof window>"u"||typeof document>"u"||!Ra(window.location.host)||Wl[n]===e||Wl[n]||hE)return;Wl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=gD().prod.length>0;function u(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,b){S.setAttribute("width","24"),S.setAttribute("id",b),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{hE=!0,u()},S}function v(S,b){S.setAttribute("id",b),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=yD(s),b=t("text"),F=document.getElementById(b)||document.createElement("span"),B=t("learnmore"),G=document.getElementById(B)||document.createElement("a"),ee=t("preprendIcon"),X=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;d(Z),v(G,B);const ae=m();g(X,ee),Z.append(X,F,G,ae),document.body.appendChild(Z)}l?(F.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _D(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function vD(){var e;const n=(e=zf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ED(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function SD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AD(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function CD(){return!vD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ID(){try{return typeof indexedDB=="object"}catch{return!1}}function wD(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="FirebaseError";class ms extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=RD,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?bD(l,s):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new ms(o,d,s)}}function bD(n,e){return n.replace(ND,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const ND=/\{\$([^}]+)}/g;function xD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ar(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],u=e[o];if(pE(l)&&pE(u)){if(!ar(l,u))return!1}else if(l!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function pE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Fl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Hl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function MD(n,e){const t=new DD(n,e);return t.subscribe.bind(t)}class DD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");PD(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=mp),o.error===void 0&&(o.error=mp),o.complete===void 0&&(o.complete=mp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(n){return n&&n._delegate?n._delegate:n}class jr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new pD;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UD(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wr){return this.instances.has(e)}getOptions(e=Wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&u.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:VD(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Wr){return this.component?this.component.multipleInstances?e:Wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VD(n){return n===Wr?void 0:n}function UD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const OD={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},qD=qe.INFO,BD={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},FD=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=BD[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tm{constructor(e){this.name=e,this._logLevel=qD,this._logHandler=FD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const HD=(n,e)=>e.some(t=>n instanceof t);let mE,gE;function GD(){return mE||(mE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zD(){return gE||(gE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S0=new WeakMap,qp=new WeakMap,A0=new WeakMap,gp=new WeakMap,Em=new WeakMap;function KD(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(nr(n.result)),o()},u=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&S0.set(t,n)}).catch(()=>{}),Em.set(e,n),e}function YD(n){if(qp.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});qp.set(n,e)}let Bp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||A0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function JD(n){Bp=n(Bp)}function QD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(yp(this),e,...t);return A0.set(s,e.sort?e.sort():[e]),nr(s)}:zD().includes(n)?function(...e){return n.apply(yp(this),e),nr(S0.get(this))}:function(...e){return nr(n.apply(yp(this),e))}}function WD(n){return typeof n=="function"?QD(n):(n instanceof IDBTransaction&&YD(n),HD(n,GD())?new Proxy(n,Bp):n)}function nr(n){if(n instanceof IDBRequest)return KD(n);if(gp.has(n))return gp.get(n);const e=WD(n);return e!==n&&(gp.set(n,e),Em.set(e,n)),e}const yp=n=>Em.get(n);function $D(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),d=nr(u);return s&&u.addEventListener("upgradeneeded",g=>{s(nr(u.result),g.oldVersion,g.newVersion,nr(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const XD=["get","getKey","getAll","getAllKeys","count"],ZD=["put","add","delete","clear"],_p=new Map;function yE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_p.get(e))return _p.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=ZD.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||XD.includes(t)))return;const l=async function(u,...d){const g=this.transaction(u,o?"readwrite":"readonly");let m=g.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&g.done]))[0]};return _p.set(e,l),l}JD(n=>({...n,get:(e,t,s)=>yE(e,t)||n.get(e,t,s),has:(e,t)=>!!yE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eP(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function eP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fp="@firebase/app",_E="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Tm("@firebase/app"),tP="@firebase/app-compat",nP="@firebase/analytics-compat",iP="@firebase/analytics",sP="@firebase/app-check-compat",rP="@firebase/app-check",oP="@firebase/auth",aP="@firebase/auth-compat",lP="@firebase/database",uP="@firebase/data-connect",cP="@firebase/database-compat",fP="@firebase/functions",dP="@firebase/functions-compat",hP="@firebase/installations",pP="@firebase/installations-compat",mP="@firebase/messaging",gP="@firebase/messaging-compat",yP="@firebase/performance",_P="@firebase/performance-compat",vP="@firebase/remote-config",TP="@firebase/remote-config-compat",EP="@firebase/storage",SP="@firebase/storage-compat",AP="@firebase/firestore",CP="@firebase/ai",IP="@firebase/firestore-compat",wP="firebase",RP="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="[DEFAULT]",bP={[Fp]:"fire-core",[tP]:"fire-core-compat",[iP]:"fire-analytics",[nP]:"fire-analytics-compat",[rP]:"fire-app-check",[sP]:"fire-app-check-compat",[oP]:"fire-auth",[aP]:"fire-auth-compat",[lP]:"fire-rtdb",[uP]:"fire-data-connect",[cP]:"fire-rtdb-compat",[fP]:"fire-fn",[dP]:"fire-fn-compat",[hP]:"fire-iid",[pP]:"fire-iid-compat",[mP]:"fire-fcm",[gP]:"fire-fcm-compat",[yP]:"fire-perf",[_P]:"fire-perf-compat",[vP]:"fire-rc",[TP]:"fire-rc-compat",[EP]:"fire-gcs",[SP]:"fire-gcs-compat",[AP]:"fire-fst",[IP]:"fire-fst-compat",[CP]:"fire-vertex","fire-js":"fire-js",[wP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=new Map,NP=new Map,Gp=new Map;function vE(n,e){try{n.container.addComponent(e)}catch(t){us.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ma(n){const e=n.name;if(Gp.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;Gp.set(e,n);for(const t of Ef.values())vE(t,n);for(const t of NP.values())vE(t,n);return!0}function Sm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new cu("app","Firebase",xP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=RP;function C0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Hp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ir.create("bad-app-name",{appName:String(o)});if(t||(t=_0()),!t)throw ir.create("no-options");const l=Ef.get(o);if(l){if(ar(t,l.options)&&ar(s,l.config))return l;throw ir.create("duplicate-app",{appName:o})}const u=new LD(o);for(const g of Gp.values())u.addComponent(g);const d=new MP(t,s,u);return Ef.set(o,d),d}function I0(n=Hp){const e=Ef.get(n);if(!e&&n===Hp&&_0())return C0();if(!e)throw ir.create("no-app",{appName:n});return e}function sr(n,e,t){let s=bP[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(u.join(" "));return}ma(new jr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="firebase-heartbeat-database",PP=1,nu="firebase-heartbeat-store";let vp=null;function w0(){return vp||(vp=$D(DP,PP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ir.create("idb-open",{originalErrorMessage:n.message})})),vp}async function kP(n){try{const t=(await w0()).transaction(nu),s=await t.objectStore(nu).get(R0(n));return await t.done,s}catch(e){if(e instanceof ms)us.warn(e.message);else{const t=ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});us.warn(t.message)}}}async function TE(n,e){try{const s=(await w0()).transaction(nu,"readwrite");await s.objectStore(nu).put(e,R0(n)),await s.done}catch(t){if(t instanceof ms)us.warn(t.message);else{const s=ir.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});us.warn(s.message)}}}function R0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=1024,UP=30;class LP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qP(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=EE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>UP){const u=BP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){us.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=EE(),{heartbeatsToSend:s,unsentEntries:o}=OP(this._heartbeatsCache.heartbeats),l=Tf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return us.warn(t),""}}}function EE(){return new Date().toISOString().substring(0,10)}function OP(n,e=VP){const t=[];let s=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),SE(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),SE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class qP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ID()?wD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return TE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return TE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function SE(n){return Tf(JSON.stringify({version:2,heartbeats:n})).length}function BP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n){ma(new jr("platform-logger",e=>new jD(e),"PRIVATE")),ma(new jr("heartbeat",e=>new LP(e),"PRIVATE")),sr(Fp,_E,n),sr(Fp,_E,"esm2020"),sr("fire-js","")}FP("");function b0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HP=b0,N0=new cu("auth","Firebase",b0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Tm("@firebase/auth");function GP(n,...e){Sf.logLevel<=qe.WARN&&Sf.warn(`Auth (${ba}): ${n}`,...e)}function of(n,...e){Sf.logLevel<=qe.ERROR&&Sf.error(`Auth (${ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(n,...e){throw Am(n,...e)}function Mi(n,...e){return Am(n,...e)}function x0(n,e,t){const s={...HP(),[e]:t};return new cu("auth","Firebase",s).create(e,{appName:n.name})}function as(n){return x0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Am(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return N0.create(n,...e)}function Se(n,e,...t){if(!n)throw Am(e,...t)}function rs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw of(e),new Error(e)}function cs(n,e){n||rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function zP(){return AE()==="http:"||AE()==="https:"}function AE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zP()||ED()||"connection"in navigator)?navigator.onLine:!0}function YP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t){this.shortDelay=e,this.longDelay=t,cs(t>e,"Short delay should be less than long delay!"),this.isMobile=_D()||SD()}get(){return KP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(n,e){cs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WP=new du(3e4,6e4);function mr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function gs(n,e,t,s,o={}){return D0(n,o,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const d=fu({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:g,...l};return TD()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Ra(n.emulatorConfig.host)&&(m.credentials="include"),M0.fetch()(await P0(n,n.config.apiHost,t,d),m)})}async function D0(n,e,t){n._canInitEmulator=!1;const s={...JP,...e};try{const o=new XP(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Xc(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[g,m]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xc(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Xc(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw Xc(n,"user-disabled",u);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw x0(n,v,m);oi(n,v)}}catch(o){if(o instanceof ms)throw o;oi(n,"network-request-failed",{message:String(o)})}}async function hu(n,e,t,s,o={}){const l=await gs(n,e,t,s,o);return"mfaPendingCredential"in l&&oi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function P0(n,e,t,s){const o=`${e}${t}?${s}`,l=n,u=l.config.emulator?Cm(n.config,o):`${n.config.apiScheme}://${o}`;return QP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function $P(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Mi(this.auth,"network-request-failed")),WP.get())})}}function Xc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Mi(n,e,s);return o.customData._tokenResponse=t,o}function CE(n){return n!==void 0&&n.enterprise!==void 0}class ZP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $P(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jP(n,e){return gs(n,"GET","/v2/recaptchaConfig",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(n,e){return gs(n,"POST","/v1/accounts:delete",e)}async function Af(n,e){return gs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tk(n,e=!1){const t=jt(n),s=await t.getIdToken(e),o=Im(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:$l(Tp(o.auth_time)),issuedAtTime:$l(Tp(o.iat)),expirationTime:$l(Tp(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Tp(n){return Number(n)*1e3}function Im(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return of("JWT malformed, contained fewer than 3 sections"),null;try{const o=g0(t);return o?JSON.parse(o):(of("Failed to decode base64 JWT payload"),null)}catch(o){return of("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function IE(n){const e=Im(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ms&&nk(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function nk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$l(this.lastLoginAt),this.creationTime=$l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(n){var T;const e=n.auth,t=await n.getIdToken(),s=await ga(n,Af(e,{idToken:t}));Se(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?k0(o.providerUserInfo):[],u=rk(n.providerData,l),d=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),m=d?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Kp(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function sk(n){const e=jt(n);await Cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rk(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function k0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(n,e){const t=await D0(n,{},async()=>{const s=fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await P0(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:s};return n.emulatorConfig&&Ra(n.emulatorConfig.host)&&(g.credentials="include"),M0.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ak(n,e){return gs(n,"POST","/v2/accounts:revokeToken",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=IE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await ok(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,u=new fa;return s&&(Se(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fa,this.toJSON())}_performRefresh(){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ri{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new ik(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Kp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ga(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tk(this,e)}reload(){return sk(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Cf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(as(this.auth));const e=await this.getIdToken();return await ga(this,ek(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,g=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:b,providerData:F,stsTokenManager:B}=t;Se(T&&B,e,"internal-error");const G=fa.fromJSON(this.name,B);Se(typeof T=="string",e,"internal-error"),$s(s,e.name),$s(o,e.name),Se(typeof S=="boolean",e,"internal-error"),Se(typeof b=="boolean",e,"internal-error"),$s(l,e.name),$s(u,e.name),$s(d,e.name),$s(g,e.name),$s(m,e.name),$s(v,e.name);const ee=new ri({uid:T,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:b,photoURL:u,phoneNumber:l,tenantId:d,stsTokenManager:G,createdAt:m,lastLoginAt:v});return F&&Array.isArray(F)&&(ee.providerData=F.map(X=>({...X}))),g&&(ee._redirectEventId=g),ee}static async _fromIdTokenResponse(e,t,s=!1){const o=new fa;o.updateFromServerResponse(t);const l=new ri({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Cf(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?k0(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new fa;d.updateFromIdToken(s);const g=new ri({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Kp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,m),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new Map;function os(n){cs(n instanceof Function,"Expected a class definition");let e=wE.get(n);return e?(cs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}V0.type="NONE";const RE=V0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(n,e,t){return`firebase:${n}:${e}:${t}`}class da{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=af(this.userKey,o.apiKey,l),this.fullPersistenceKey=af("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Af(this.auth,{idToken:e}).catch(()=>{});return t?ri._fromGetAccountInfoResponse(this.auth,t,e):null}return ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new da(os(RE),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||os(RE);const u=af(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let T;if(typeof v=="string"){const S=await Af(e,{idToken:v}).catch(()=>{});if(!S)break;T=await ri._fromGetAccountInfoResponse(e,S,v)}else T=ri._fromJSON(e,v);m!==l&&(d=T),l=m;break}}catch{}const g=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new da(l,e,s):(l=g[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new da(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(F0(e))return"Blackberry";if(H0(e))return"Webos";if(L0(e))return"Safari";if((e.includes("chrome/")||O0(e))&&!e.includes("edge/"))return"Chrome";if(B0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function U0(n=an()){return/firefox\//i.test(n)}function L0(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O0(n=an()){return/crios\//i.test(n)}function q0(n=an()){return/iemobile/i.test(n)}function B0(n=an()){return/android/i.test(n)}function F0(n=an()){return/blackberry/i.test(n)}function H0(n=an()){return/webos/i.test(n)}function wm(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lk(n=an()){var e;return wm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function uk(){return AD()&&document.documentMode===10}function G0(n=an()){return wm(n)||B0(n)||H0(n)||F0(n)||/windows phone/i.test(n)||q0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(n,e=[]){let t;switch(n){case"Browser":t=bE(an());break;case"Worker":t=`${bE(an())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ba}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,d)=>{try{const g=e(l);u(g)}catch(g){d(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(n,e={}){return gs(n,"GET","/v2/passwordPolicy",mr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=6;class hk{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??dk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NE(this),this.idTokenSubscription=new NE(this),this.beforeStateQueue=new ck(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=os(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await da.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Af(this,{idToken:e}),s=await ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(zn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(as(this));const t=e?jt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(as(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(as(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fk(this),t=new hk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await ak(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&os(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await da.create(this,[os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&GP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function oo(n){return jt(n)}class NE{constructor(e){this.auth=e,this.observer=null,this.addObserver=MD(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mk(n){Kf=n}function K0(n){return Kf.loadJS(n)}function gk(){return Kf.recaptchaEnterpriseScript}function yk(){return Kf.gapiScript}function _k(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class vk{constructor(){this.enterprise=new Tk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Tk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ek="recaptcha-enterprise",Y0="NO_RECAPTCHA";class Sk{constructor(e){this.type=Ek,this.auth=oo(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{jP(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new ZP(g);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(g=>{d(g)})})}function o(l,u,d){const g=window.grecaptcha;CE(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(Y0)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vk().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(d=>{if(!t&&CE(window.grecaptcha))o(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=gk();g.length!==0&&(g+=d),K0(g).then(()=>{o(d,l,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function xE(n,e,t,s=!1,o=!1){const l=new Sk(n);let u;if(o)u=Y0;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Yp(n,e,t,s,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await xE(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await xE(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n,e){const t=Sm(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ar(l,e??{}))return o;oi(o,"already-initialized")}return t.initialize({options:e})}function Ck(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(os);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Ik(n,e,t){const s=oo(n);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=J0(e),{host:u,port:d}=wk(e),g=d===null?"":`:${d}`,m={url:`${l}//${u}${g}/`},v=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(ar(m,s.config.emulator)&&ar(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Ra(u)?(T0(`${l}//${u}${g}`),E0("Auth",!0)):Rk()}function J0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wk(n){const e=J0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:ME(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:ME(u)}}}function ME(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Rk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rs("not implemented")}_getIdTokenResponse(e){return rs("not implemented")}_linkToIdToken(e,t){return rs("not implemented")}_getReauthenticationResolver(e){return rs("not implemented")}}async function bk(n,e){return gs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(n,e){return hu(n,"POST","/v1/accounts:signInWithPassword",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(n,e){return hu(n,"POST","/v1/accounts:signInWithEmailLink",mr(n,e))}async function Mk(n,e){return hu(n,"POST","/v1/accounts:signInWithEmailLink",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Rm{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new iu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new iu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,t,"signInWithPassword",Nk);case"emailLink":return xk(e,{email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,s,"signUpPassword",bk);case"emailLink":return Mk(e,{idToken:t,email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(n,e){return hu(n,"POST","/v1/accounts:signInWithIdp",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="http://localhost";class eo extends Rm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const u=new eo(s,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ha(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ha(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ha(e,t)}buildRequest(){const e={requestUri:Dk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kk(n){const e=Fl(Hl(n)).link,t=e?Fl(Hl(e)).deep_link_id:null,s=Fl(Hl(n)).deep_link_id;return(s?Fl(Hl(s)).link:null)||s||t||e||n}class bm{constructor(e){const t=Fl(Hl(e)),s=t.apiKey??null,o=t.oobCode??null,l=Pk(t.mode??null);Se(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=kk(e);try{return new bm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.providerId=Na.PROVIDER_ID}static credential(e,t){return iu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=bm.parseLink(t);return Se(s,"argument-error"),iu._fromEmailAndCode(e,s.code,s.tenantId)}}Na.PROVIDER_ID="password";Na.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends Q0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends pu{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eo._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Zs.credential(t,s)}catch{return null}}}Zs.GOOGLE_SIGN_IN_METHOD="google.com";Zs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends pu{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends pu{constructor(){super("twitter.com")}static credential(e,t){return eo._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return er.credential(t,s)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(n,e){return hu(n,"POST","/v1/accounts:signUp",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await ri._fromIdTokenResponse(e,s,o),u=DE(s);return new to({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=DE(s);return new to({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function DE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends ms{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,If.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new If(e,t,s,o)}}function W0(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(n,l,e,s):l})}async function Uk(n,e,t=!1){const s=await ga(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return to._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(n,e,t=!1){const{auth:s}=n;if(zn(s.app))return Promise.reject(as(s));const o="reauthenticate";try{const l=await ga(n,W0(s,o,e,n),t);Se(l.idToken,s,"internal-error");const u=Im(l.idToken);Se(u,s,"internal-error");const{sub:d}=u;return Se(n.uid===d,s,"user-mismatch"),to._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&oi(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(n,e,t=!1){if(zn(n.app))return Promise.reject(as(n));const s="signIn",o=await W0(n,s,e),l=await to._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function Ok(n,e){return $0(oo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X0(n){const e=oo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qk(n,e,t){if(zn(n.app))return Promise.reject(as(n));const s=oo(n),u=await Yp(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vk).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&X0(n),g}),d=await to._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(d.user),d}function Bk(n,e,t){return zn(n.app)?Promise.reject(as(n)):Ok(jt(n),Na.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&X0(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(n,e){return gs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=jt(n),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await ga(s,Fk(s.auth,l));s.displayName=u.displayName||null,s.photoURL=u.photoUrl||null;const d=s.providerData.find(({providerId:g})=>g==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),await s._updateTokensIfNecessary(u)}function Gk(n,e,t,s){return jt(n).onIdTokenChanged(e,t,s)}function zk(n,e,t){return jt(n).beforeAuthStateChanged(e,t)}function Kk(n,e,t,s){return jt(n).onAuthStateChanged(e,t,s)}function Yk(n){return jt(n).signOut()}const wf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wf,"1"),this.storage.removeItem(wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=1e3,Qk=10;class j0 extends Z0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,g)=>{this.notifyListeners(u,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);uk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Qk):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},Jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}j0.type="LOCAL";const Wk=j0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends Z0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}eA.type="SESSION";const tA=eA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Yf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,l)),g=await $k(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((d,g)=>{const m=Nm("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function Zk(n){Di().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function jk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function tV(){return nA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="firebaseLocalStorageDb",nV=1,Rf="firebaseLocalStorage",sA="fbase_key";class mu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jf(n,e){return n.transaction([Rf],e?"readwrite":"readonly").objectStore(Rf)}function iV(){const n=indexedDB.deleteDatabase(iA);return new mu(n).toPromise()}function Jp(){const n=indexedDB.open(iA,nV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Rf,{keyPath:sA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Rf)?e(s):(s.close(),await iV(),e(await Jp()))})})}async function PE(n,e,t){const s=Jf(n,!0).put({[sA]:e,value:t});return new mu(s).toPromise()}async function sV(n,e){const t=Jf(n,!1).get(e),s=await new mu(t).toPromise();return s===void 0?null:s.value}function kE(n,e){const t=Jf(n,!0).delete(e);return new mu(t).toPromise()}const rV=800,oV=3;class rA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>oV)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yf._getInstance(tV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await jk(),!this.activeServiceWorker)return;this.sender=new Xk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await PE(e,wf,"1"),await kE(e,wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>PE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>sV(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Jf(o,!1).getAll();return new mu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rA.type="LOCAL";const aV=rA;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(n,e){return e?os(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends Rm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ha(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ha(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uV(n){return $0(n.auth,new xm(n),n.bypassAuthState)}function cV(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),Lk(t,new xm(n),n.bypassAuthState)}async function fV(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),Uk(t,new xm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uV;case"linkViaPopup":case"linkViaRedirect":return fV;case"reauthViaPopup":case"reauthViaRedirect":return cV;default:oi(this.auth,"internal-error")}}resolve(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=new du(2e3,1e4);class aa extends oA{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,aa.currentPopupAction&&aa.currentPopupAction.cancel(),aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){cs(this.filter.length===1,"Popup operations only handle one event");const e=Nm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dV.get())};e()}}aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV="pendingRedirect",lf=new Map;class pV extends oA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=lf.get(this.auth._key());if(!e){try{const s=await mV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}lf.set(this.auth._key(),e)}return this.bypassAuthState||lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mV(n,e){const t=_V(e),s=yV(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function gV(n,e){lf.set(n._key(),e)}function yV(n){return os(n._redirectPersistence)}function _V(n){return af(hV,n.config.apiKey,n.name)}async function vV(n,e,t=!1){if(zn(n.app))return Promise.reject(as(n));const s=oo(n),o=lV(s,e),u=await new pV(s,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=600*1e3;class EV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!aA(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Mi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TV&&this.cachedEventUids.clear(),this.cachedEventUids.has(VE(e))}saveEventToCache(e){this.cachedEventUids.add(VE(e)),this.lastProcessedEventTime=Date.now()}}function VE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AV(n,e={}){return gs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IV=/^https?/;async function wV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await AV(n);for(const t of e)try{if(RV(t))return}catch{}oi(n,"unauthorized-domain")}function RV(n){const e=zp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!IV.test(t))return!1;if(CV.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new du(3e4,6e4);function UE(){const n=Di().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NV(n){return new Promise((e,t)=>{var o,l,u;function s(){UE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{UE(),t(Mi(n,"network-request-failed"))},timeout:bV.get()})}if((l=(o=Di().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Di().gapi)!=null&&u.load)s();else{const d=_k("iframefcb");return Di()[d]=()=>{gapi.load?s():t(Mi(n,"network-request-failed"))},K0(`${yk()}?onload=${d}`).catch(g=>t(g))}}).catch(e=>{throw uf=null,e})}let uf=null;function xV(n){return uf=uf||NV(n),uf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=new du(5e3,15e3),DV="__/auth/iframe",PV="emulator/auth/iframe",kV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UV(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Cm(e,PV):`https://${n.config.authDomain}/${DV}`,s={apiKey:e.apiKey,appName:n.name,v:ba},o=VV.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${fu(s).slice(1)}`}async function LV(n){const e=await xV(n),t=Di().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:UV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kV,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const u=Mi(n,"network-request-failed"),d=Di().setTimeout(()=>{l(u)},MV.get());function g(){Di().clearTimeout(d),o(s)}s.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qV=500,BV=600,FV="_blank",HV="http://localhost";class LE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GV(n,e,t,s=qV,o=BV){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const g={...OV,width:s.toString(),height:o.toString(),top:l,left:u},m=an().toLowerCase();t&&(d=O0(m)?FV:t),U0(m)&&(e=e||HV,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[b,F])=>`${S}${b}=${F},`,"");if(lk(m)&&d!=="_self")return zV(e||"",d),new LE(null);const T=window.open(e||"",d,v);Se(T,n,"popup-blocked");try{T.focus()}catch{}return new LE(T)}function zV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV="__/auth/handler",YV="emulator/auth/handler",JV=encodeURIComponent("fac");async function OE(n,e,t,s,o,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ba,eventId:o};if(e instanceof Q0){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",xD(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof pu){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const g=await n._getAppCheckToken(),m=g?`#${JV}=${encodeURIComponent(g)}`:"";return`${QV(n)}?${fu(d).slice(1)}${m}`}function QV({config:n}){return n.emulator?Cm(n,YV):`https://${n.authDomain}/${KV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="webStorageSupport";class WV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tA,this._completeRedirectFn=vV,this._overrideRedirectResult=gV}async _openPopup(e,t,s,o){var u;cs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await OE(e,t,s,zp(),o);return GV(e,l,Nm())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await OE(e,t,s,zp(),o);return Zk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(cs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await LV(e),s=new EV(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ep,{type:Ep},o=>{var u;const l=(u=o==null?void 0:o[0])==null?void 0:u[Ep];l!==void 0&&t(!!l),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return G0()||L0()||wm()}}const $V=WV;var qE="@firebase/auth",BE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jV(n){ma(new jr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=s.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z0(n)},m=new pk(s,o,l,g);return Ck(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ma(new jr("auth-internal",e=>{const t=oo(e.getProvider("auth").getImmediate());return(s=>new XV(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(qE,BE,ZV(n)),sr(qE,BE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=300,t2=v0("authIdTokenMaxAge")||e2;let FE=null;const n2=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>t2)return;const o=t==null?void 0:t.token;FE!==o&&(FE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function i2(n=I0()){const e=Sm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Ak(n,{popupRedirectResolver:$V,persistence:[aV,Wk,tA]}),s=v0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=n2(l.toString());zk(t,u,()=>u(t.currentUser)),Gk(t,d=>u(d))}}const o=y0("auth");return o&&Ik(t,`http://${o}`),t}function s2(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}mk({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Mi("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",s2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jV("Browser");var HE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rr,lA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,D){function M(){}M.prototype=D.prototype,x.F=D.prototype,x.prototype=new M,x.prototype.constructor=x,x.D=function(U,k,L){for(var P=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)P[Pe-2]=arguments[Pe];return D.prototype[k].apply(U,P)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,D,M){M||(M=0);const U=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)U[k]=D.charCodeAt(M++)|D.charCodeAt(M++)<<8|D.charCodeAt(M++)<<16|D.charCodeAt(M++)<<24;else for(k=0;k<16;++k)U[k]=D[M++]|D[M++]<<8|D[M++]<<16|D[M++]<<24;D=x.g[0],M=x.g[1],k=x.g[2];let L=x.g[3],P;P=D+(L^M&(k^L))+U[0]+3614090360&4294967295,D=M+(P<<7&4294967295|P>>>25),P=L+(k^D&(M^k))+U[1]+3905402710&4294967295,L=D+(P<<12&4294967295|P>>>20),P=k+(M^L&(D^M))+U[2]+606105819&4294967295,k=L+(P<<17&4294967295|P>>>15),P=M+(D^k&(L^D))+U[3]+3250441966&4294967295,M=k+(P<<22&4294967295|P>>>10),P=D+(L^M&(k^L))+U[4]+4118548399&4294967295,D=M+(P<<7&4294967295|P>>>25),P=L+(k^D&(M^k))+U[5]+1200080426&4294967295,L=D+(P<<12&4294967295|P>>>20),P=k+(M^L&(D^M))+U[6]+2821735955&4294967295,k=L+(P<<17&4294967295|P>>>15),P=M+(D^k&(L^D))+U[7]+4249261313&4294967295,M=k+(P<<22&4294967295|P>>>10),P=D+(L^M&(k^L))+U[8]+1770035416&4294967295,D=M+(P<<7&4294967295|P>>>25),P=L+(k^D&(M^k))+U[9]+2336552879&4294967295,L=D+(P<<12&4294967295|P>>>20),P=k+(M^L&(D^M))+U[10]+4294925233&4294967295,k=L+(P<<17&4294967295|P>>>15),P=M+(D^k&(L^D))+U[11]+2304563134&4294967295,M=k+(P<<22&4294967295|P>>>10),P=D+(L^M&(k^L))+U[12]+1804603682&4294967295,D=M+(P<<7&4294967295|P>>>25),P=L+(k^D&(M^k))+U[13]+4254626195&4294967295,L=D+(P<<12&4294967295|P>>>20),P=k+(M^L&(D^M))+U[14]+2792965006&4294967295,k=L+(P<<17&4294967295|P>>>15),P=M+(D^k&(L^D))+U[15]+1236535329&4294967295,M=k+(P<<22&4294967295|P>>>10),P=D+(k^L&(M^k))+U[1]+4129170786&4294967295,D=M+(P<<5&4294967295|P>>>27),P=L+(M^k&(D^M))+U[6]+3225465664&4294967295,L=D+(P<<9&4294967295|P>>>23),P=k+(D^M&(L^D))+U[11]+643717713&4294967295,k=L+(P<<14&4294967295|P>>>18),P=M+(L^D&(k^L))+U[0]+3921069994&4294967295,M=k+(P<<20&4294967295|P>>>12),P=D+(k^L&(M^k))+U[5]+3593408605&4294967295,D=M+(P<<5&4294967295|P>>>27),P=L+(M^k&(D^M))+U[10]+38016083&4294967295,L=D+(P<<9&4294967295|P>>>23),P=k+(D^M&(L^D))+U[15]+3634488961&4294967295,k=L+(P<<14&4294967295|P>>>18),P=M+(L^D&(k^L))+U[4]+3889429448&4294967295,M=k+(P<<20&4294967295|P>>>12),P=D+(k^L&(M^k))+U[9]+568446438&4294967295,D=M+(P<<5&4294967295|P>>>27),P=L+(M^k&(D^M))+U[14]+3275163606&4294967295,L=D+(P<<9&4294967295|P>>>23),P=k+(D^M&(L^D))+U[3]+4107603335&4294967295,k=L+(P<<14&4294967295|P>>>18),P=M+(L^D&(k^L))+U[8]+1163531501&4294967295,M=k+(P<<20&4294967295|P>>>12),P=D+(k^L&(M^k))+U[13]+2850285829&4294967295,D=M+(P<<5&4294967295|P>>>27),P=L+(M^k&(D^M))+U[2]+4243563512&4294967295,L=D+(P<<9&4294967295|P>>>23),P=k+(D^M&(L^D))+U[7]+1735328473&4294967295,k=L+(P<<14&4294967295|P>>>18),P=M+(L^D&(k^L))+U[12]+2368359562&4294967295,M=k+(P<<20&4294967295|P>>>12),P=D+(M^k^L)+U[5]+4294588738&4294967295,D=M+(P<<4&4294967295|P>>>28),P=L+(D^M^k)+U[8]+2272392833&4294967295,L=D+(P<<11&4294967295|P>>>21),P=k+(L^D^M)+U[11]+1839030562&4294967295,k=L+(P<<16&4294967295|P>>>16),P=M+(k^L^D)+U[14]+4259657740&4294967295,M=k+(P<<23&4294967295|P>>>9),P=D+(M^k^L)+U[1]+2763975236&4294967295,D=M+(P<<4&4294967295|P>>>28),P=L+(D^M^k)+U[4]+1272893353&4294967295,L=D+(P<<11&4294967295|P>>>21),P=k+(L^D^M)+U[7]+4139469664&4294967295,k=L+(P<<16&4294967295|P>>>16),P=M+(k^L^D)+U[10]+3200236656&4294967295,M=k+(P<<23&4294967295|P>>>9),P=D+(M^k^L)+U[13]+681279174&4294967295,D=M+(P<<4&4294967295|P>>>28),P=L+(D^M^k)+U[0]+3936430074&4294967295,L=D+(P<<11&4294967295|P>>>21),P=k+(L^D^M)+U[3]+3572445317&4294967295,k=L+(P<<16&4294967295|P>>>16),P=M+(k^L^D)+U[6]+76029189&4294967295,M=k+(P<<23&4294967295|P>>>9),P=D+(M^k^L)+U[9]+3654602809&4294967295,D=M+(P<<4&4294967295|P>>>28),P=L+(D^M^k)+U[12]+3873151461&4294967295,L=D+(P<<11&4294967295|P>>>21),P=k+(L^D^M)+U[15]+530742520&4294967295,k=L+(P<<16&4294967295|P>>>16),P=M+(k^L^D)+U[2]+3299628645&4294967295,M=k+(P<<23&4294967295|P>>>9),P=D+(k^(M|~L))+U[0]+4096336452&4294967295,D=M+(P<<6&4294967295|P>>>26),P=L+(M^(D|~k))+U[7]+1126891415&4294967295,L=D+(P<<10&4294967295|P>>>22),P=k+(D^(L|~M))+U[14]+2878612391&4294967295,k=L+(P<<15&4294967295|P>>>17),P=M+(L^(k|~D))+U[5]+4237533241&4294967295,M=k+(P<<21&4294967295|P>>>11),P=D+(k^(M|~L))+U[12]+1700485571&4294967295,D=M+(P<<6&4294967295|P>>>26),P=L+(M^(D|~k))+U[3]+2399980690&4294967295,L=D+(P<<10&4294967295|P>>>22),P=k+(D^(L|~M))+U[10]+4293915773&4294967295,k=L+(P<<15&4294967295|P>>>17),P=M+(L^(k|~D))+U[1]+2240044497&4294967295,M=k+(P<<21&4294967295|P>>>11),P=D+(k^(M|~L))+U[8]+1873313359&4294967295,D=M+(P<<6&4294967295|P>>>26),P=L+(M^(D|~k))+U[15]+4264355552&4294967295,L=D+(P<<10&4294967295|P>>>22),P=k+(D^(L|~M))+U[6]+2734768916&4294967295,k=L+(P<<15&4294967295|P>>>17),P=M+(L^(k|~D))+U[13]+1309151649&4294967295,M=k+(P<<21&4294967295|P>>>11),P=D+(k^(M|~L))+U[4]+4149444226&4294967295,D=M+(P<<6&4294967295|P>>>26),P=L+(M^(D|~k))+U[11]+3174756917&4294967295,L=D+(P<<10&4294967295|P>>>22),P=k+(D^(L|~M))+U[2]+718787259&4294967295,k=L+(P<<15&4294967295|P>>>17),P=M+(L^(k|~D))+U[9]+3951481745&4294967295,x.g[0]=x.g[0]+D&4294967295,x.g[1]=x.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+L&4294967295}s.prototype.v=function(x,D){D===void 0&&(D=x.length);const M=D-this.blockSize,U=this.C;let k=this.h,L=0;for(;L<D;){if(k==0)for(;L<=M;)o(this,x,L),L+=this.blockSize;if(typeof x=="string"){for(;L<D;)if(U[k++]=x.charCodeAt(L++),k==this.blockSize){o(this,U),k=0;break}}else for(;L<D;)if(U[k++]=x[L++],k==this.blockSize){o(this,U),k=0;break}}this.h=k,this.o+=D},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var D=1;D<x.length-8;++D)x[D]=0;D=this.o*8;for(var M=x.length-8;M<x.length;++M)x[M]=D&255,D/=256;for(this.v(x),x=Array(16),D=0,M=0;M<4;++M)for(let U=0;U<32;U+=8)x[D++]=this.g[M]>>>U&255;return x};function l(x,D){var M=d;return Object.prototype.hasOwnProperty.call(M,x)?M[x]:M[x]=D(x)}function u(x,D){this.h=D;const M=[];let U=!0;for(let k=x.length-1;k>=0;k--){const L=x[k]|0;U&&L==D||(M[k]=L,U=!1)}this.g=M}var d={};function g(x){return-128<=x&&x<128?l(x,function(D){return new u([D|0],D<0?-1:0)}):new u([x|0],x<0?-1:0)}function m(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return G(m(-x));const D=[];let M=1;for(let U=0;x>=M;U++)D[U]=x/M|0,M*=4294967296;return new u(D,0)}function v(x,D){if(x.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(x.charAt(0)=="-")return G(v(x.substring(1),D));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=m(Math.pow(D,8));let U=T;for(let L=0;L<x.length;L+=8){var k=Math.min(8,x.length-L);const P=parseInt(x.substring(L,L+k),D);k<8?(k=m(Math.pow(D,k)),U=U.j(k).add(m(P))):(U=U.j(M),U=U.add(m(P)))}return U}var T=g(0),S=g(1),b=g(16777216);n=u.prototype,n.m=function(){if(B(this))return-G(this).m();let x=0,D=1;for(let M=0;M<this.g.length;M++){const U=this.i(M);x+=(U>=0?U:4294967296+U)*D,D*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(F(this))return"0";if(B(this))return"-"+G(this).toString(x);const D=m(Math.pow(x,6));var M=this;let U="";for(;;){const k=ae(M,D).g;M=ee(M,k.j(D));let L=((M.g.length>0?M.g[0]:M.h)>>>0).toString(x);if(M=k,F(M))return L+U;for(;L.length<6;)L="0"+L;U=L+U}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function F(x){if(x.h!=0)return!1;for(let D=0;D<x.g.length;D++)if(x.g[D]!=0)return!1;return!0}function B(x){return x.h==-1}n.l=function(x){return x=ee(this,x),B(x)?-1:F(x)?0:1};function G(x){const D=x.g.length,M=[];for(let U=0;U<D;U++)M[U]=~x.g[U];return new u(M,~x.h).add(S)}n.abs=function(){return B(this)?G(this):this},n.add=function(x){const D=Math.max(this.g.length,x.g.length),M=[];let U=0;for(let k=0;k<=D;k++){let L=U+(this.i(k)&65535)+(x.i(k)&65535),P=(L>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);U=P>>>16,L&=65535,P&=65535,M[k]=P<<16|L}return new u(M,M[M.length-1]&-2147483648?-1:0)};function ee(x,D){return x.add(G(D))}n.j=function(x){if(F(this)||F(x))return T;if(B(this))return B(x)?G(this).j(G(x)):G(G(this).j(x));if(B(x))return G(this.j(G(x)));if(this.l(b)<0&&x.l(b)<0)return m(this.m()*x.m());const D=this.g.length+x.g.length,M=[];for(var U=0;U<2*D;U++)M[U]=0;for(U=0;U<this.g.length;U++)for(let k=0;k<x.g.length;k++){const L=this.i(U)>>>16,P=this.i(U)&65535,Pe=x.i(k)>>>16,tt=x.i(k)&65535;M[2*U+2*k]+=P*tt,X(M,2*U+2*k),M[2*U+2*k+1]+=L*tt,X(M,2*U+2*k+1),M[2*U+2*k+1]+=P*Pe,X(M,2*U+2*k+1),M[2*U+2*k+2]+=L*Pe,X(M,2*U+2*k+2)}for(x=0;x<D;x++)M[x]=M[2*x+1]<<16|M[2*x];for(x=D;x<2*D;x++)M[x]=0;return new u(M,0)};function X(x,D){for(;(x[D]&65535)!=x[D];)x[D+1]+=x[D]>>>16,x[D]&=65535,D++}function Z(x,D){this.g=x,this.h=D}function ae(x,D){if(F(D))throw Error("division by zero");if(F(x))return new Z(T,T);if(B(x))return D=ae(G(x),D),new Z(G(D.g),G(D.h));if(B(D))return D=ae(x,G(D)),new Z(G(D.g),D.h);if(x.g.length>30){if(B(x)||B(D))throw Error("slowDivide_ only works with positive integers.");for(var M=S,U=D;U.l(x)<=0;)M=ce(M),U=ce(U);var k=oe(M,1),L=oe(U,1);for(U=oe(U,2),M=oe(M,2);!F(U);){var P=L.add(U);P.l(x)<=0&&(k=k.add(M),L=P),U=oe(U,1),M=oe(M,1)}return D=ee(x,k.j(D)),new Z(k,D)}for(k=T;x.l(D)>=0;){for(M=Math.max(1,Math.floor(x.m()/D.m())),U=Math.ceil(Math.log(M)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),L=m(M),P=L.j(D);B(P)||P.l(x)>0;)M-=U,L=m(M),P=L.j(D);F(L)&&(L=S),k=k.add(L),x=ee(x,P)}return new Z(k,x)}n.B=function(x){return ae(this,x).h},n.and=function(x){const D=Math.max(this.g.length,x.g.length),M=[];for(let U=0;U<D;U++)M[U]=this.i(U)&x.i(U);return new u(M,this.h&x.h)},n.or=function(x){const D=Math.max(this.g.length,x.g.length),M=[];for(let U=0;U<D;U++)M[U]=this.i(U)|x.i(U);return new u(M,this.h|x.h)},n.xor=function(x){const D=Math.max(this.g.length,x.g.length),M=[];for(let U=0;U<D;U++)M[U]=this.i(U)^x.i(U);return new u(M,this.h^x.h)};function ce(x){const D=x.g.length+1,M=[];for(let U=0;U<D;U++)M[U]=x.i(U)<<1|x.i(U-1)>>>31;return new u(M,x.h)}function oe(x,D){const M=D>>5;D%=32;const U=x.g.length-M,k=[];for(let L=0;L<U;L++)k[L]=D>0?x.i(L+M)>>>D|x.i(L+M+1)<<32-D:x.i(L+M);return new u(k,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,lA=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,rr=u}).apply(typeof HE<"u"?HE:typeof self<"u"?self:typeof window<"u"?window:{});var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uA,Gl,cA,cf,Qp,fA,dA,hA;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zc=="object"&&Zc];for(var E=0;E<p.length;++E){var I=p[E];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var s=t(this);function o(p,E){if(E)e:{var I=s;p=p.split(".");for(var R=0;R<p.length-1;R++){var z=p[R];if(!(z in I))break e;I=I[z]}p=p[p.length-1],R=I[p],E=E(R),E!=R&&E!=null&&e(I,p,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(p){return p||function(E){var I=[],R;for(R in E)Object.prototype.hasOwnProperty.call(E,R)&&I.push([R,E[R]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function g(p,E,I){return p.call.apply(p.bind,arguments)}function m(p,E,I){return m=g,m.apply(null,arguments)}function v(p,E){var I=Array.prototype.slice.call(arguments,1);return function(){var R=I.slice();return R.push.apply(R,arguments),p.apply(this,R)}}function T(p,E){function I(){}I.prototype=E.prototype,p.Z=E.prototype,p.prototype=new I,p.prototype.constructor=p,p.Ob=function(R,z,Q){for(var ue=Array(arguments.length-2),be=2;be<arguments.length;be++)ue[be-2]=arguments[be];return E.prototype[z].apply(R,ue)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function b(p){const E=p.length;if(E>0){const I=Array(E);for(let R=0;R<E;R++)I[R]=p[R];return I}return[]}function F(p,E){for(let R=1;R<arguments.length;R++){const z=arguments[R];var I=typeof z;if(I=I!="object"?I:z?Array.isArray(z)?"array":I:"null",I=="array"||I=="object"&&typeof z.length=="number"){I=p.length||0;const Q=z.length||0;p.length=I+Q;for(let ue=0;ue<Q;ue++)p[I+ue]=z[ue]}else p.push(z)}}class B{constructor(E,I){this.i=E,this.j=I,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function G(p){u.setTimeout(()=>{throw p},0)}function ee(){var p=x;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class X{constructor(){this.h=this.g=null}add(E,I){const R=Z.get();R.set(E,I),this.h?this.h.next=R:this.g=R,this.h=R}}var Z=new B(()=>new ae,p=>p.reset());class ae{constructor(){this.next=this.g=this.h=null}set(E,I){this.h=E,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,oe=!1,x=new X,D=()=>{const p=Promise.resolve(void 0);ce=()=>{p.then(M)}};function M(){for(var p;p=ee();){try{p.h.call(p.g)}catch(I){G(I)}var E=Z;E.j(p),E.h<100&&(E.h++,p.next=E.g,E.g=p)}oe=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};u.addEventListener("test",I,E),u.removeEventListener("test",I,E)}catch{}return p})();function P(p){return/^[\s\xa0]*$/.test(p)}function Pe(p,E){k.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,E)}T(Pe,k),Pe.prototype.init=function(p,E){const I=this.type=p.type,R=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget,E||(I=="mouseover"?E=p.fromElement:I=="mouseout"&&(E=p.toElement)),this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var tt="closure_listenable_"+(Math.random()*1e6|0),W=0;function le(p,E,I,R,z){this.listener=p,this.proxy=null,this.src=E,this.type=I,this.capture=!!R,this.ha=z,this.key=++W,this.da=this.fa=!1}function _e(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function De(p,E,I){for(const R in p)E.call(I,p[R],R,p)}function Xe(p,E){for(const I in p)E.call(void 0,p[I],I,p)}function q(p){const E={};for(const I in p)E[I]=p[I];return E}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(p,E){let I,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(I in R)p[I]=R[I];for(let Q=0;Q<ie.length;Q++)I=ie[Q],Object.prototype.hasOwnProperty.call(R,I)&&(p[I]=R[I])}}function pe(p){this.src=p,this.g={},this.h=0}pe.prototype.add=function(p,E,I,R,z){const Q=p.toString();p=this.g[Q],p||(p=this.g[Q]=[],this.h++);const ue=xe(p,E,R,z);return ue>-1?(E=p[ue],I||(E.fa=!1)):(E=new le(E,this.src,Q,!!R,z),E.fa=I,p.push(E)),E};function Ce(p,E){const I=E.type;if(I in p.g){var R=p.g[I],z=Array.prototype.indexOf.call(R,E,void 0),Q;(Q=z>=0)&&Array.prototype.splice.call(R,z,1),Q&&(_e(E),p.g[I].length==0&&(delete p.g[I],p.h--))}}function xe(p,E,I,R){for(let z=0;z<p.length;++z){const Q=p[z];if(!Q.da&&Q.listener==E&&Q.capture==!!I&&Q.ha==R)return z}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Vt={};function dt(p,E,I,R,z){if(Array.isArray(E)){for(let Q=0;Q<E.length;Q++)dt(p,E[Q],I,R,z);return null}return I=Ua(I),p&&p[tt]?p.J(E,I,d(R)?!!R.capture:!1,z):_r(p,E,I,!1,R,z)}function _r(p,E,I,R,z,Q){if(!E)throw Error("Invalid event type");const ue=d(z)?!!z.capture:!!z;let be=vr(p);if(be||(p[Ge]=be=new pe(p)),I=be.add(E,I,R,ue,Q),I.proxy)return I;if(R=fo(),I.proxy=R,R.src=p,R.listener=I,p.addEventListener)L||(z=ue),z===void 0&&(z=!1),p.addEventListener(E.toString(),R,z);else if(p.attachEvent)p.attachEvent(li(E.toString()),R);else if(p.addListener&&p.removeListener)p.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return I}function fo(){function p(I){return E.call(p.src,p.listener,I)}const E=ka;return p}function ho(p,E,I,R,z){if(Array.isArray(E))for(var Q=0;Q<E.length;Q++)ho(p,E[Q],I,R,z);else R=d(R)?!!R.capture:!!R,I=Ua(I),p&&p[tt]?(p=p.i,Q=String(E).toString(),Q in p.g&&(E=p.g[Q],I=xe(E,I,R,z),I>-1&&(_e(E[I]),Array.prototype.splice.call(E,I,1),E.length==0&&(delete p.g[Q],p.h--)))):p&&(p=vr(p))&&(E=p.g[E.toString()],p=-1,E&&(p=xe(E,I,R,z)),(I=p>-1?E[p]:null)&&po(I))}function po(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[tt])Ce(E.i,p);else{var I=p.type,R=p.proxy;E.removeEventListener?E.removeEventListener(I,R,p.capture):E.detachEvent?E.detachEvent(li(I),R):E.addListener&&E.removeListener&&E.removeListener(R),(I=vr(E))?(Ce(I,p),I.h==0&&(I.src=null,E[Ge]=null)):_e(p)}}}function li(p){return p in Vt?Vt[p]:Vt[p]="on"+p}function ka(p,E){if(p.da)p=!0;else{E=new Pe(E,this);const I=p.listener,R=p.ha||p.src;p.fa&&po(p),p=I.call(R,E)}return p}function vr(p){return p=p[Ge],p instanceof pe?p:null}var Va="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ua(p){return typeof p=="function"?p:(p[Va]||(p[Va]=function(E){return p.handleEvent(E)}),p[Va])}function Ct(){U.call(this),this.i=new pe(this),this.M=this,this.G=null}T(Ct,U),Ct.prototype[tt]=!0,Ct.prototype.removeEventListener=function(p,E,I,R){ho(this,p,E,I,R)};function Ut(p,E){var I,R=p.G;if(R)for(I=[];R;R=R.G)I.push(R);if(p=p.M,R=E.type||E,typeof E=="string")E=new k(E,p);else if(E instanceof k)E.target=E.target||p;else{var z=E;E=new k(R,p),fe(E,z)}z=!0;let Q,ue;if(I)for(ue=I.length-1;ue>=0;ue--)Q=E.g=I[ue],z=ys(Q,R,!0,E)&&z;if(Q=E.g=p,z=ys(Q,R,!0,E)&&z,z=ys(Q,R,!1,E)&&z,I)for(ue=0;ue<I.length;ue++)Q=E.g=I[ue],z=ys(Q,R,!1,E)&&z}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var p=this.i;for(const E in p.g){const I=p.g[E];for(let R=0;R<I.length;R++)_e(I[R]);delete p.g[E],p.h--}}this.G=null},Ct.prototype.J=function(p,E,I,R){return this.i.add(String(p),E,!1,I,R)},Ct.prototype.K=function(p,E,I,R){return this.i.add(String(p),E,!0,I,R)};function ys(p,E,I,R){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();let z=!0;for(let Q=0;Q<E.length;++Q){const ue=E[Q];if(ue&&!ue.da&&ue.capture==I){const be=ue.listener,Tt=ue.ha||ue.src;ue.fa&&Ce(p.i,ue),z=be.call(Tt,R)!==!1&&z}}return z&&!R.defaultPrevented}function fd(p,E){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(p,E||0)}function Su(p){p.g=fd(()=>{p.g=null,p.i&&(p.i=!1,Su(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class ln extends U{constructor(E,I){super(),this.m=E,this.l=I,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Su(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(p){U.call(this),this.h=p,this.g={}}T(Tr,U);var La=[];function Oa(p){De(p.g,function(E,I){this.g.hasOwnProperty(I)&&po(E)},p),p.g={}}Tr.prototype.N=function(){Tr.Z.N.call(this),Oa(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _s=u.JSON.stringify,dd=u.JSON.parse,Au=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Cu(){}function Iu(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){k.call(this,"d")}T(Kt,k);function Mn(){k.call(this,"c")}T(Mn,k);var vt={},wu=null;function mo(){return wu=wu||new Ct}vt.Ia="serverreachability";function Ru(p){k.call(this,vt.Ia,p)}T(Ru,k);function ui(p){const E=mo();Ut(E,new Ru(E))}vt.STAT_EVENT="statevent";function Er(p,E){k.call(this,vt.STAT_EVENT,p),this.stat=E}T(Er,k);function It(p){const E=mo();Ut(E,new Er(E,p))}vt.Ja="timingevent";function ci(p,E){k.call(this,vt.Ja,p),this.size=E}T(ci,k);function fi(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},E)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function hd(p,E,I,R,z,Q){p.info(function(){if(p.g)if(Q){var ue="",be=Q.split("&");for(let Qe=0;Qe<be.length;Qe++){var Tt=be[Qe].split("=");if(Tt.length>1){const ht=Tt[0];Tt=Tt[1];const Vn=ht.split("_");ue=Vn.length>=2&&Vn[1]=="type"?ue+(ht+"="+Tt+"&"):ue+(ht+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+E+`
`+I+`
`+ue})}function bu(p,E,I,R,z,Q,ue){p.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+E+`
`+I+`
`+Q+" "+ue})}function di(p,E,I,R){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+pd(p,I)+(R?" "+R:"")})}function Sr(p,E){p.info(function(){return"TIMEOUT: "+E})}Qn.prototype.info=function(){};function pd(p,E){if(!p.g)return E;if(!E)return null;try{const Q=JSON.parse(E);if(Q){for(p=0;p<Q.length;p++)if(Array.isArray(Q[p])){var I=Q[p];if(!(I.length<2)){var R=I[1];if(Array.isArray(R)&&!(R.length<1)){var z=R[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ue=1;ue<R.length;ue++)R[ue]=""}}}}return _s(Q)}catch{return E}}var Ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ba;function Cr(){}T(Cr,Cu),Cr.prototype.g=function(){return new XMLHttpRequest},Ba=new Cr;function Bi(p){return encodeURIComponent(String(p))}function Nu(p){var E=1;p=p.split(":");const I=[];for(;E>0&&p.length;)I.push(p.shift()),E--;return p.length&&I.push(p.join(":")),I}function Wn(p,E,I,R){this.j=p,this.i=E,this.l=I,this.S=R||1,this.V=new Tr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var wt={},Ft={};function hi(p,E,I){p.M=1,p.A=Ir(bt(E)),p.u=I,p.R=!0,go(p,null)}function go(p,E){p.F=Date.now(),pi(p),p.B=bt(p.A);var I=p.B,R=p.S;Array.isArray(R)||(R=[String(R)]),To(I.i,"t",R),p.C=0,I=p.j.L,p.h=new $n,p.g=zu(p.j,I?E:null,!p.u),p.P>0&&(p.O=new ln(m(p.Y,p,p.g),p.P)),E=p.V,I=p.g,R=p.ba;var z="readystatechange";Array.isArray(z)||(z&&(La[0]=z.toString()),z=La);for(let Q=0;Q<z.length;Q++){const ue=dt(I,z[Q],R||E.handleEvent,!1,E.h||E);if(!ue)break;E.g[ue.key]=ue}E=p.J?q(p.J):{},p.u?(p.v||(p.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,E)):(p.v="GET",p.g.ea(p.B,p.v,null,E)),ui(),hd(p.i,p.v,p.B,p.l,p.S,p.u)}Wn.prototype.ba=function(p){p=p.target;const E=this.O;E&&jn(p)==3?E.j():this.Y(p)},Wn.prototype.Y=function(p){try{if(p==this.g)e:{const be=jn(this.g),Tt=this.g.ya(),Qe=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||be!=4||Tt==7||(Tt==8||Qe<=0?ui(3):ui(2)),mi(this);var E=this.g.ca();this.X=E;var I=md(this);if(this.o=E==200,bu(this.i,this.v,this.B,this.l,this.S,be,E),this.o){if(this.U&&!this.L){t:{if(this.g){var R,z=this.g;if((R=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(R)){var Q=R;break t}}Q=null}if(p=Q)di(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,p);else{this.o=!1,this.m=3,It(12),En(this),Dn(this);break e}}if(this.R){p=!0;let ht;for(;!this.K&&this.C<I.length;)if(ht=Mu(this,I),ht==Ft){be==4&&(this.m=4,It(14),p=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==wt){this.m=4,It(15),di(this.i,this.l,I,"[Invalid Chunk]"),p=!1;break}else di(this.i,this.l,ht,null),gi(this,ht);if(xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||I.length!=0||this.h.h||(this.m=1,It(16),p=!1),this.o=this.o&&p,!p)di(this.i,this.l,I,"[Invalid Chunked Response]"),En(this),Dn(this);else if(I.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),tl(ue),ue.P=!0,It(11))}}else di(this.i,this.l,I,null),gi(this,I);be==4&&En(this),this.o&&!this.K&&(be==4?Bu(this.j,this):(this.o=!1,pi(this)))}else Hi(this.g),E==400&&I.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),En(this),Dn(this)}}}catch{}finally{}};function md(p){if(!xu(p))return p.g.la();const E=Yt(p.g);if(E==="")return"";let I="";const R=E.length,z=jn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return En(p),Dn(p),"";p.h.i=new u.TextDecoder}for(let Q=0;Q<R;Q++)p.h.h=!0,I+=p.h.i.decode(E[Q],{stream:!(z&&Q==R-1)});return E.length=0,p.h.g+=I,p.C=0,p.h.g}function xu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Mu(p,E){var I=p.C,R=E.indexOf(`
`,I);return R==-1?Ft:(I=Number(E.substring(I,R)),isNaN(I)?wt:(R+=1,R+I>E.length?Ft:(E=E.slice(R,R+I),p.C=R+I,E)))}Wn.prototype.cancel=function(){this.K=!0,En(this)};function pi(p){p.T=Date.now()+p.H,yo(p,p.H)}function yo(p,E){if(p.D!=null)throw Error("WatchDog timer not null");p.D=fi(m(p.aa,p),E)}function mi(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Wn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Sr(this.i,this.B),this.M!=2&&(ui(),It(17)),En(this),this.m=2,Dn(this)):yo(this,this.T-p)};function Dn(p){p.j.I==0||p.K||Bu(p.j,p)}function En(p){mi(p);var E=p.O;E&&typeof E.dispose=="function"&&E.dispose(),p.O=null,Oa(p.V),p.g&&(E=p.g,p.g=null,E.abort(),E.dispose())}function gi(p,E){try{var I=p.j;if(I.I!=0&&(I.g==p||_i(I.h,p))){if(!p.L&&_i(I.h,p)&&I.I==3){try{var R=I.Ba.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<p.F)Io(I),ws(I);else break e;Dr(I),It(18)}}else I.xa=z[1],0<I.xa-I.K&&z[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=fi(m(I.Va,I),6e3));yi(I.h)<=1&&I.ta&&(I.ta=void 0)}else Ci(I,11)}else if((p.L||I.g==p)&&Io(I),!P(E))for(z=I.Ba.g.parse(E),E=0;E<z.length;E++){let Qe=z[E];const ht=Qe[0];if(!(ht<=I.K))if(I.K=ht,Qe=Qe[1],I.I==2)if(Qe[0]=="c"){I.M=Qe[1],I.ba=Qe[2];const Vn=Qe[3];Vn!=null&&(I.ka=Vn,I.j.info("VER="+I.ka));const Ii=Qe[4];Ii!=null&&(I.za=Ii,I.j.info("SVER="+I.za));const ei=Qe[5];ei!=null&&typeof ei=="number"&&ei>0&&(R=1.5*ei,I.O=R,I.j.info("backChannelRequestTimeoutMs_="+R)),R=I;const ti=p.g;if(ti){const Pr=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pr){var Q=R.h;Q.g||Pr.indexOf("spdy")==-1&&Pr.indexOf("quic")==-1&&Pr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ga(Q,Q.h),Q.h=null))}if(R.G){const wo=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;wo&&(R.wa=wo,Ze(R.J,R.G,wo))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-p.F,I.j.info("Handshake RTT: "+I.T+"ms")),R=I;var ue=p;if(R.na=Gu(R,R.L?R.ba:null,R.W),ue.L){za(R.h,ue);var be=ue,Tt=R.O;Tt&&(be.H=Tt),be.D&&(mi(be),pi(be)),R.g=ue}else Ou(R);I.i.length>0&&Ai(I)}else Qe[0]!="stop"&&Qe[0]!="close"||Ci(I,7);else I.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Ci(I,7):ja(I):Qe[0]!="noop"&&I.l&&I.l.qa(Qe),I.A=0)}}ui(4)}catch{}}var Rt=class{constructor(p,E){this.g=p,this.map=E}};function Fa(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ha(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function yi(p){return p.h?1:p.g?p.g.size:0}function _i(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function Ga(p,E){p.g?p.g.add(E):p.h=E}function za(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}Fa.prototype.cancel=function(){if(this.i=Ka(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ka(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const I of p.g.values())E=E.concat(I.G);return E}return b(p.i)}var Du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _o(p,E){if(p){p=p.split("&");for(let I=0;I<p.length;I++){const R=p[I].indexOf("=");let z,Q=null;R>=0?(z=p[I].substring(0,R),Q=p[I].substring(R+1)):z=p[I],E(z,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Sn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;p instanceof Sn?(this.l=p.l,Ht(this,p.j),this.o=p.o,this.g=p.g,vs(this,p.u),this.h=p.h,Ya(this,Uu(p.i)),this.m=p.m):p&&(E=String(p).match(Du))?(this.l=!1,Ht(this,E[1]||"",!0),this.o=vi(E[2]||""),this.g=vi(E[3]||"",!0),vs(this,E[4]),this.h=vi(E[5]||"",!0),Ya(this,E[6]||"",!0),this.m=vi(E[7]||"")):(this.l=!1,this.i=new Es(null,this.l))}Sn.prototype.toString=function(){const p=[];var E=this.j;E&&p.push(wr(E,vo,!0),":");var I=this.g;return(I||E=="file")&&(p.push("//"),(E=this.o)&&p.push(wr(E,vo,!0),"@"),p.push(Bi(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&p.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&p.push("/"),p.push(wr(I,I.charAt(0)=="/"?Ja:Pu,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",wr(I,ku)),p.join("")},Sn.prototype.resolve=function(p){const E=bt(this);let I=!!p.j;I?Ht(E,p.j):I=!!p.o,I?E.o=p.o:I=!!p.g,I?E.g=p.g:I=p.u!=null;var R=p.h;if(I)vs(E,p.u);else if(I=!!p.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var z=E.h.lastIndexOf("/");z!=-1&&(R=E.h.slice(0,z+1)+R)}if(z=R,z==".."||z==".")R="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){R=z.lastIndexOf("/",0)==0,z=z.split("/");const Q=[];for(let ue=0;ue<z.length;){const be=z[ue++];be=="."?R&&ue==z.length&&Q.push(""):be==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),R&&ue==z.length&&Q.push("")):(Q.push(be),R=!0)}R=Q.join("/")}else R=z}return I?E.h=R:I=p.i.toString()!=="",I?Ya(E,Uu(p.i)):I=!!p.m,I&&(E.m=p.m),E};function bt(p){return new Sn(p)}function Ht(p,E,I){p.j=I?vi(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function vs(p,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);p.u=E}else p.u=null}function Ya(p,E,I){E instanceof Es?(p.i=E,Eo(p.i,p.l)):(I||(E=wr(E,Ts)),p.i=new Es(E,p.l))}function Ze(p,E,I){p.i.set(E,I)}function Ir(p){return Ze(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function vi(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function wr(p,E,I){return typeof p=="string"?(p=encodeURI(p).replace(E,dn),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function dn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var vo=/[#\/\?@]/g,Pu=/[#\?:]/g,Ja=/[#\?]/g,Ts=/[#\?@]/g,ku=/#/g;function Es(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function hn(p){p.g||(p.g=new Map,p.h=0,p.i&&_o(p.i,function(E,I){p.add(decodeURIComponent(E.replace(/\+/g," ")),I)}))}n=Es.prototype,n.add=function(p,E){hn(this),this.i=null,p=Ss(this,p);let I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(E),this.h+=1,this};function Vu(p,E){hn(p),E=Ss(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function Qa(p,E){return hn(p),E=Ss(p,E),p.g.has(E)}n.forEach=function(p,E){hn(this),this.g.forEach(function(I,R){I.forEach(function(z){p.call(E,z,R,this)},this)},this)};function Wa(p,E){hn(p);let I=[];if(typeof E=="string")Qa(p,E)&&(I=I.concat(p.g.get(Ss(p,E))));else for(p=Array.from(p.g.values()),E=0;E<p.length;E++)I=I.concat(p[E]);return I}n.set=function(p,E){return hn(this),this.i=null,p=Ss(this,p),Qa(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=Wa(this,p),p.length>0?String(p[0]):E):E};function To(p,E,I){Vu(p,E),I.length>0&&(p.i=null,p.g.set(Ss(p,E),b(I)),p.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(let R=0;R<E.length;R++){var I=E[R];const z=Bi(I);I=Wa(this,I);for(let Q=0;Q<I.length;Q++){let ue=z;I[Q]!==""&&(ue+="="+Bi(I[Q])),p.push(ue)}}return this.i=p.join("&")};function Uu(p){const E=new Es;return E.i=p.i,p.g&&(E.g=new Map(p.g),E.h=p.h),E}function Ss(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function Eo(p,E){E&&!p.j&&(hn(p),p.i=null,p.g.forEach(function(I,R){const z=R.toLowerCase();R!=z&&(Vu(this,R),To(this,z,I))},p)),p.j=E}function Xn(p,E){const I=new Qn;if(u.Image){const R=new Image;R.onload=v(Pn,I,"TestLoadImage: loaded",!0,E,R),R.onerror=v(Pn,I,"TestLoadImage: error",!1,E,R),R.onabort=v(Pn,I,"TestLoadImage: abort",!1,E,R),R.ontimeout=v(Pn,I,"TestLoadImage: timeout",!1,E,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=p}else E(!1)}function $a(p,E){const I=new Qn,R=new AbortController,z=setTimeout(()=>{R.abort(),Pn(I,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:R.signal}).then(Q=>{clearTimeout(z),Q.ok?Pn(I,"TestPingServer: ok",!0,E):Pn(I,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(z),Pn(I,"TestPingServer: error",!1,E)})}function Pn(p,E,I,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(I)}catch{}}function As(){this.g=new Au}function Ti(p){this.i=p.Sb||null,this.h=p.ab||!1}T(Ti,Cu),Ti.prototype.g=function(){return new Rr(this.i,this.h)};function Rr(p,E){Ct.call(this),this.H=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Rr,Ct),n=Rr.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=E,this.readyState=1,Zn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(E.body=p),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cs(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;So(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function So(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?Cs(this):Zn(this),this.readyState==3&&So(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,Cs(this))},n.Na=function(p){this.g&&(this.response=p,Cs(this))},n.ga=function(){this.g&&Cs(this)};function Cs(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Zn(p)}n.setRequestHeader=function(p,E){this.A.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var I=E.next();!I.done;)I=I.value,p.push(I[0]+": "+I[1]),I=E.next();return p.join(`\r
`)};function Zn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Rr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function kn(p){let E="";return De(p,function(I,R){E+=R,E+=":",E+=I,E+=`\r
`}),E}function br(p,E,I){e:{for(R in I){var R=!1;break e}R=!0}R||(I=kn(I),typeof p=="string"?I!=null&&Bi(I):Ze(p,E,I))}function nt(p){Ct.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,Ct);var Ei=/^https?$/i,Xa=["POST","PUT"];n=nt.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,E,I,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ba.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(Q){Nr(this,Q);return}if(p=I||"",I=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)I.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())I.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(I.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Xa,E,void 0)>=0)||R||z||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of I)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(Q){Nr(this,Q)}};function Nr(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.o=5,Za(p),Fi(p)}function Za(p){p.A||(p.A=!0,Ut(p,"complete"),Ut(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Ut(this,"complete"),Ut(this,"abort"),Fi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fi(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?xr(this):this.Xa())},n.Xa=function(){xr(this)};function xr(p){if(p.h&&typeof l<"u"){if(p.v&&jn(p)==4)setTimeout(p.Ca.bind(p),0);else if(Ut(p,"readystatechange"),jn(p)==4){p.h=!1;try{const Q=p.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var I;if(!(I=E)){var R;if(R=Q===0){let ue=String(p.D).match(Du)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),R=!Ei.test(ue?ue.toLowerCase():"")}I=R}if(I)Ut(p,"complete"),Ut(p,"success");else{p.o=6;try{var z=jn(p)>2?p.g.statusText:""}catch{z=""}p.l=z+" ["+p.ca()+"]",Za(p)}}finally{Fi(p)}}}}function Fi(p,E){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const I=p.g;p.g=null,E||Ut(p,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function jn(p){return p.g?p.g.readyState:0}n.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),dd(E)}};function Yt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(p){const E={};p=(p.g&&jn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<p.length;R++){if(P(p[R]))continue;var I=Nu(p[R]);const z=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const Q=E[z]||[];E[z]=Q,Q.push(I)}Xe(E,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(p,E,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||E}function Is(p){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,p),this.Za=Si("retryDelaySeedMs",1e4,p),this.Ta=Si("forwardChannelMaxRetries",2,p),this.va=Si("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Fa(p&&p.concurrentRequestLimit),this.Ba=new As,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Is.prototype,n.ka=8,n.I=1,n.connect=function(p,E,I,R){It(0),this.W=p,this.H=E||{},I&&R!==void 0&&(this.H.OSID=I,this.H.OAID=R),this.F=this.X,this.J=Gu(this,null,this.W),Ai(this)};function ja(p){if(Ao(p),p.I==3){var E=p.V++,I=bt(p.J);if(Ze(I,"SID",p.M),Ze(I,"RID",E),Ze(I,"TYPE","terminate"),Mr(p,I),E=new Wn(p,p.j,E),E.M=2,E.A=Ir(bt(I)),I=!1,u.navigator&&u.navigator.sendBeacon)try{I=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!I&&u.Image&&(new Image().src=E.A,I=!0),I||(E.g=zu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),pi(E)}Hu(p)}function ws(p){p.g&&(tl(p),p.g.cancel(),p.g=null)}function Ao(p){ws(p),p.v&&(u.clearTimeout(p.v),p.v=null),Io(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function Ai(p){if(!Ha(p.h)&&!p.m){p.m=!0;var E=p.Ea;ce||D(),oe||(ce(),oe=!0),x.add(E,p),p.D=0}}function Co(p,E){return yi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=E.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=fi(m(p.Ea,p,E),Fu(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const z=new Wn(this,this.j,p);let Q=this.o;if(this.U&&(Q?(Q=q(Q),fe(Q,this.U)):Q=this.U),this.u!==null||this.R||(z.J=Q,Q=null),this.S)e:{for(var E=0,I=0;I<this.i.length;I++){t:{var R=this.i[I];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,E>4096){E=I;break e}if(E===4096||I===this.i.length-1){E=I+1;break e}}E=1e3}else E=1e3;E=Lu(this,z,E),I=bt(this.J),Ze(I,"RID",p),Ze(I,"CVER",22),this.G&&Ze(I,"X-HTTP-Session-Id",this.G),Mr(this,I),Q&&(this.R?E="headers="+Bi(kn(Q))+"&"+E:this.u&&br(I,this.u,Q)),Ga(this.h,z),this.Ra&&Ze(I,"TYPE","init"),this.S?(Ze(I,"$req",E),Ze(I,"SID","null"),z.U=!0,hi(z,I,null)):hi(z,I,E),this.I=2}}else this.I==3&&(p?el(this,p):this.i.length==0||Ha(this.h)||el(this))};function el(p,E){var I;E?I=E.l:I=p.V++;const R=bt(p.J);Ze(R,"SID",p.M),Ze(R,"RID",I),Ze(R,"AID",p.K),Mr(p,R),p.u&&p.o&&br(R,p.u,p.o),I=new Wn(p,p.j,I,p.D+1),p.u===null&&(I.J=p.o),E&&(p.i=E.G.concat(p.i)),E=Lu(p,I,1e3),I.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ga(p.h,I),hi(I,R,E)}function Mr(p,E){p.H&&De(p.H,function(I,R){Ze(E,R,I)}),p.l&&De({},function(I,R){Ze(E,R,I)})}function Lu(p,E,I){I=Math.min(p.i.length,I);const R=p.l?m(p.l.Ka,p.l,p):null;e:{var z=p.i;let be=-1;for(;;){const Tt=["count="+I];be==-1?I>0?(be=z[0].g,Tt.push("ofs="+be)):be=0:Tt.push("ofs="+be);let Qe=!0;for(let ht=0;ht<I;ht++){var Q=z[ht].g;const Vn=z[ht].map;if(Q-=be,Q<0)be=Math.max(0,z[ht].g-100),Qe=!1;else try{Q="req"+Q+"_"||"";try{var ue=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Ii,ei]of ue){let ti=ei;d(ei)&&(ti=_s(ei)),Tt.push(Q+Ii+"="+encodeURIComponent(ti))}}catch(Ii){throw Tt.push(Q+"type="+encodeURIComponent("_badmap")),Ii}}catch{R&&R(Vn)}}if(Qe){ue=Tt.join("&");break e}}ue=void 0}return p=p.i.splice(0,I),E.G=p,ue}function Ou(p){if(!p.g&&!p.v){p.Y=1;var E=p.Da;ce||D(),oe||(ce(),oe=!0),x.add(E,p),p.A=0}}function Dr(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=fi(m(p.Da,p),Fu(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=fi(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),ws(this),qu(this))};function tl(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function qu(p){p.g=new Wn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var E=bt(p.na);Ze(E,"RID","rpc"),Ze(E,"SID",p.M),Ze(E,"AID",p.K),Ze(E,"CI",p.F?"0":"1"),!p.F&&p.ia&&Ze(E,"TO",p.ia),Ze(E,"TYPE","xmlhttp"),Mr(p,E),p.u&&p.o&&br(E,p.u,p.o),p.O&&(p.g.H=p.O);var I=p.g;p=p.ba,I.M=1,I.A=Ir(bt(E)),I.u=null,I.R=!0,go(I,p)}n.Va=function(){this.C!=null&&(this.C=null,ws(this),Dr(this),It(19))};function Io(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Bu(p,E){var I=null;if(p.g==E){Io(p),tl(p),p.g=null;var R=2}else if(_i(p.h,E))I=E.G,za(p.h,E),R=1;else return;if(p.I!=0){if(E.o)if(R==1){I=E.u?E.u.length:0,E=Date.now()-E.F;var z=p.D;R=mo(),Ut(R,new ci(R,I)),Ai(p)}else Ou(p);else if(z=E.m,z==3||z==0&&E.X>0||!(R==1&&Co(p,E)||R==2&&Dr(p)))switch(I&&I.length>0&&(E=p.h,E.i=E.i.concat(I)),z){case 1:Ci(p,5);break;case 4:Ci(p,10);break;case 3:Ci(p,6);break;default:Ci(p,2)}}}function Fu(p,E){let I=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(I*=2),I*E}function Ci(p,E){if(p.j.info("Error code "+E),E==2){var I=m(p.bb,p),R=p.Ua;const z=!R;R=new Sn(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ht(R,"https"),Ir(R),z?Xn(R.toString(),I):$a(R.toString(),I)}else It(2);p.I=0,p.l&&p.l.pa(E),Hu(p),Ao(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Hu(p){if(p.I=0,p.ja=[],p.l){const E=Ka(p.h);(E.length!=0||p.i.length!=0)&&(F(p.ja,E),F(p.ja,p.i),p.h.i.length=0,b(p.i),p.i.length=0),p.l.oa()}}function Gu(p,E,I){var R=I instanceof Sn?bt(I):new Sn(I);if(R.g!="")E&&(R.g=E+"."+R.g),vs(R,R.u);else{var z=u.location;R=z.protocol,E=E?E+"."+z.hostname:z.hostname,z=+z.port;const Q=new Sn(null);R&&Ht(Q,R),E&&(Q.g=E),z&&vs(Q,z),I&&(Q.h=I),R=Q}return I=p.G,E=p.wa,I&&E&&Ze(R,I,E),Ze(R,"VER",p.ka),Mr(p,R),R}function zu(p,E,I){if(E&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Aa&&!p.ma?new nt(new Ti({ab:I})):new nt(p.ma),E.Fa(p.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ku(){}n=Ku.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Rs(){}Rs.prototype.g=function(p,E){return new un(p,E)};function un(p,E){Ct.call(this),this.g=new Is(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(p?p["X-WebChannel-Client-Profile"]=E.sa:p={"X-WebChannel-Client-Profile":E.sa}),this.g.U=p,(p=E&&E.Qb)&&!P(p)&&(this.g.u=p),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!P(E)&&(this.g.G=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new Gi(this)}T(un,Ct),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){ja(this.g)},un.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var I={};I.__data__=p,p=I}else this.v&&(I={},I.__data__=_s(p),p=I);E.i.push(new Rt(E.Ya++,p)),E.I==3&&Ai(E)},un.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,un.Z.N.call(this)};function Yu(p){Kt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const I in E){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}T(Yu,Kt);function Ju(){Mn.call(this),this.status=1}T(Ju,Mn);function Gi(p){this.g=p}T(Gi,Ku),Gi.prototype.ra=function(){Ut(this.g,"a")},Gi.prototype.qa=function(p){Ut(this.g,new Yu(p))},Gi.prototype.pa=function(p){Ut(this.g,new Ju)},Gi.prototype.oa=function(){Ut(this.g,"b")},Rs.prototype.createWebChannel=Rs.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,hA=function(){return new Rs},dA=function(){return mo()},fA=vt,Qp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,cf=Ar,qa.COMPLETE="complete",cA=qa,Iu.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Gl=Iu,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,uA=nt}).apply(typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{});const GE="@firebase/firestore",zE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Tm("@firebase/firestore");function na(){return no.logLevel}function he(n,...e){if(no.logLevel<=qe.DEBUG){const t=e.map(Mm);no.debug(`Firestore (${xa}): ${n}`,...t)}}function fs(n,...e){if(no.logLevel<=qe.ERROR){const t=e.map(Mm);no.error(`Firestore (${xa}): ${n}`,...t)}}function ya(n,...e){if(no.logLevel<=qe.WARN){const t=e.map(Mm);no.warn(`Firestore (${xa}): ${n}`,...t)}}function Mm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,pA(n,s,t)}function pA(n,e,t){let s=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw fs(s),new Error(s)}function $e(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||pA(e,o,s)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class o2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class a2{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new or,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},d=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new or)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new mA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class l2{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u2{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new l2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class KE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const s=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new KE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new KE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=f2(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Be(n,e){return n<e?-1:n>e?1:0}function Wp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Sp(o)===Sp(l)?Be(o,l):Sp(o)?1:-1}return Be(n.length,e.length)}const d2=55296,h2=57343;function Sp(n){const e=n.charCodeAt(0);return e>=d2&&e<=h2}function _a(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="__name__";class xi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=xi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const s=xi.isNumericId(e),o=xi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?xi.extractNumericId(e).compare(xi.extractNumericId(t)):Wp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}}class mt extends xi{construct(e,t,s){return new mt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const p2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends xi{construct(e,t,s){return new Zt(e,t,s)}static isValidIdentifier(e){return p2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===YE}static keyField(){return new Zt([YE])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(s+=d,o++):(l(),o++)}if(l(),u)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(mt.fromString(e))}static fromName(e){return new Te(mt.fromString(e).popFirst(5))}static empty(){return new Te(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(n,e,t){if(!t)throw new ye(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function g2(n,e,t,s){if(e===!0&&s===!0)throw new ye(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JE(n){if(!Te.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Pm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function io(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pm(n);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function gu(n,e){if(!gA(n))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(o&&typeof u!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ye(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=-62135596800,WE=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*WE);return new ft(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<QE)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WE}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-QE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:kt("string",ft._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new ft(0,0))}static max(){return new Ie(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function y2(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new ft(t+1,0):new ft(t,s));return new lr(o,Te.empty(),e)}function _2(n){return new lr(n.readTime,n.key,su)}class lr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new lr(Ie.min(),Te.empty(),su)}static max(){return new lr(Ie.max(),Te.empty(),su)}}function v2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==T2)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let o=0,l=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++l,u&&l===o&&t()}),(g=>s(g)))})),u=!0,l===o&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((o=>o?se.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,o)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;t(e[m]).next((v=>{u[m]=v,++d,d===l&&s(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function S2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Da(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=-1;function Wf(n){return n==null}function bf(n){return n===0&&1/n==-1/0}function A2(n){return typeof n=="number"&&Number.isInteger(n)&&!bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="";function C2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$E(e)),e=I2(n.get(t),e);return $E(e)}function I2(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case yA:t+="";break;default:t+=l}}return t}function $E(n){return n+yA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _A(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jc(this.root,e,this.comparator,!0)}}class jc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=l??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Xt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZE(this.data.getIterator())}getIteratorFrom(e){return new ZE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class ZE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new xn([])}unionWith(e){let t=new Bt(Zt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new vA("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const w2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(n){if($e(!!n,39018),typeof n=="string"){let e=0;const t=w2.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cr(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="server_timestamp",EA="__type__",SA="__previous_value__",AA="__local_write_time__";function Vm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[EA])==null?void 0:s.stringValue)===TA}function $f(n){const e=n.mapValue.fields[SA];return Vm(e)?$f(e):e}function ru(n){const e=ur(n.mapValue.fields[AA].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,t,s,o,l,u,d,g,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=v}}const Nf="(default)";class ou{constructor(e,t){this.projectId=e,this.database=t||Nf}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===Nf}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="__type__",b2="__max__",ef={mapValue:{}},IA="__vector__",xf="value";function fr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vm(n)?4:x2(n)?9007199254740991:N2(n)?10:11:Ae(28295,{value:n})}function Oi(n,e){if(n===e)return!0;const t=fr(n);if(t!==fr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ru(n).isEqual(ru(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=ur(o.timestampValue),d=ur(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return cr(o.bytesValue).isEqual(cr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return At(o.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return At(o.integerValue)===At(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=At(o.doubleValue),d=At(l.doubleValue);return u===d?bf(u)===bf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return _a(n.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},d=l.mapValue.fields||{};if(XE(u)!==XE(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Oi(u[g],d[g])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function au(n,e){return(n.values||[]).find((t=>Oi(t,e)))!==void 0}function va(n,e){if(n===e)return 0;const t=fr(n),s=fr(e);if(t!==s)return Be(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=At(l.integerValue||l.doubleValue),g=At(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return jE(n.timestampValue,e.timestampValue);case 4:return jE(ru(n),ru(e));case 5:return Wp(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=cr(l),g=cr(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let m=0;m<d.length&&m<g.length;m++){const v=Be(d[m],g[m]);if(v!==0)return v}return Be(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Be(At(l.latitude),At(u.latitude));return d!==0?d:Be(At(l.longitude),At(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return eS(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,b,F,B;const d=l.fields||{},g=u.fields||{},m=(S=d[xf])==null?void 0:S.arrayValue,v=(b=g[xf])==null?void 0:b.arrayValue,T=Be(((F=m==null?void 0:m.values)==null?void 0:F.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return T!==0?T:eS(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===ef.mapValue&&u===ef.mapValue)return 0;if(l===ef.mapValue)return 1;if(u===ef.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=u.fields||{},v=Object.keys(m);g.sort(),v.sort();for(let T=0;T<g.length&&T<v.length;++T){const S=Wp(g[T],v[T]);if(S!==0)return S;const b=va(d[g[T]],m[v[T]]);if(b!==0)return b}return Be(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function jE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=ur(n),s=ur(e),o=Be(t.seconds,s.seconds);return o!==0?o:Be(t.nanos,s.nanos)}function eS(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=va(t[o],s[o]);if(l)return l}return Be(t.length,s.length)}function Ta(n){return $p(n)}function $p(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ur(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return cr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=$p(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of s)l?l=!1:o+=",",o+=`${u}:${$p(t.fields[u])}`;return o+"}"})(n.mapValue):Ae(61005,{value:n})}function ff(n){switch(fr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$f(n);return e?16+ff(e):16;case 5:return 2*n.stringValue.length;case 6:return cr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+ff(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return gr(s.fields,((l,u)=>{o+=l.length+ff(u)})),o})(n.mapValue);default:throw Ae(13486,{value:n})}}function Xp(n){return!!n&&"integerValue"in n}function Um(n){return!!n&&"arrayValue"in n}function tS(n){return!!n&&"nullValue"in n}function nS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function df(n){return!!n&&"mapValue"in n}function N2(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[CA])==null?void 0:s.stringValue)===IA}function Xl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return gr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Xl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xl(n.arrayValue.values[t]);return e}return{...n}}function x2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===b2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!df(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(t)}setAll(e){let t=Zt.emptyPath(),s={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=d.popLast()}u?s[d.lastSegment()]=Xl(u):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());df(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];df(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){gr(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Tn(Xl(this.value))}}function wA(n){const e=[];return gr(n.fields,((t,s)=>{const o=new Zt([t]);if(df(s)){const l=wA(s.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)})),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,s,o,l,u,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new rn(e,0,Ie.min(),Ie.min(),Ie.min(),Tn.empty(),0)}static newFoundDocument(e,t,s,o){return new rn(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new rn(e,2,t,Ie.min(),Ie.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,Ie.min(),Ie.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.position=e,this.inclusive=t}}function iS(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?s=Te.comparator(Te.fromName(u.referenceValue),t.key):s=va(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function sS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t="asc"){this.field=e,this.dir=t}}function M2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{}class Ot extends RA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new P2(e,t,s):t==="array-contains"?new U2(e,s):t==="in"?new L2(e,s):t==="not-in"?new O2(e,s):t==="array-contains-any"?new q2(e,s):new Ot(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new k2(e,s):new V2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(va(t,this.value)):t!==null&&fr(this.value)===fr(t)&&this.matchesComparison(va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qi extends RA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new qi(e,t)}matches(e){return bA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bA(n){return n.op==="and"}function NA(n){return D2(n)&&bA(n)}function D2(n){for(const e of n.filters)if(e instanceof qi)return!1;return!0}function Zp(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Ta(n.value);if(NA(n))return n.filters.map((e=>Zp(e))).join(",");{const e=n.filters.map((t=>Zp(t))).join(",");return`${n.op}(${e})`}}function xA(n,e){return n instanceof Ot?(function(s,o){return o instanceof Ot&&s.op===o.op&&s.field.isEqual(o.field)&&Oi(s.value,o.value)})(n,e):n instanceof qi?(function(s,o){return o instanceof qi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,u,d)=>l&&xA(u,o.filters[d])),!0):!1})(n,e):void Ae(19439)}function MA(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ta(t.value)}`})(n):n instanceof qi?(function(t){return t.op.toString()+" {"+t.getFilters().map(MA).join(" ,")+"}"})(n):"Filter"}class P2 extends Ot{constructor(e,t,s){super(e,t,s),this.key=Te.fromName(s.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class k2 extends Ot{constructor(e,t){super(e,"in",t),this.keys=DA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class V2 extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=DA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function DA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Te.fromName(s.referenceValue)))}class U2 extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Um(t)&&au(t.arrayValue,this.value)}}class L2 extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&au(this.value.arrayValue,t)}}class O2 extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!au(this.value.arrayValue,t)}}class q2 extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Um(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>au(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t=null,s=[],o=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function rS(n,e=null,t=[],s=[],o=null,l=null,u=null){return new B2(n,e,t,s,o,l,u)}function Lm(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Zp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Wf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ta(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ta(s))).join(",")),e.Te=t}return e.Te}function Om(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!M2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sS(n.startAt,e.startAt)&&sS(n.endAt,e.endAt)}function jp(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t=null,s=[],o=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function F2(n,e,t,s,o,l,u,d){return new Xf(n,e,t,s,o,l,u,d)}function qm(n){return new Xf(n)}function oS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function H2(n){return n.collectionGroup!==null}function Zl(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Bt(Zt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Df(l,s))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new Df(Zt.keyField(),s))}return e.Ie}function Pi(n){const e=Re(n);return e.Ee||(e.Ee=G2(e,Zl(n))),e.Ee}function G2(n,e){if(n.limitType==="F")return rS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Df(o.field,l)}));const t=n.endAt?new Mf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Mf(n.startAt.position,n.startAt.inclusive):null;return rS(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function em(n,e,t){return new Xf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zf(n,e){return Om(Pi(n),Pi(e))&&n.limitType===e.limitType}function PA(n){return`${Lm(Pi(n))}|lt:${n.limitType}`}function ia(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>MA(o))).join(", ")}]`),Wf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Ta(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Ta(o))).join(",")),`Target(${s})`})(Pi(n))}; limitType=${n.limitType})`}function jf(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Te.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of Zl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(u,d,g){const m=iS(u,d,g);return u.inclusive?m<=0:m<0})(s.startAt,Zl(s),o)||s.endAt&&!(function(u,d,g){const m=iS(u,d,g);return u.inclusive?m>=0:m>0})(s.endAt,Zl(s),o))})(n,e)}function z2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kA(n){return(e,t)=>{let s=!1;for(const o of Zl(n)){const l=K2(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function K2(n,e,t){const s=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,u,d){const g=u.data.field(l),m=d.data.field(l);return g!==null&&m!==null?va(g,m):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){gr(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return _A(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new gt(Te.comparator);function ds(){return Y2}const VA=new gt(Te.comparator);function zl(...n){let e=VA;for(const t of n)e=e.insert(t.key,t);return e}function UA(n){let e=VA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function $r(){return jl()}function LA(){return jl()}function jl(){return new ao((n=>n.toString()),((n,e)=>n.isEqual(e)))}const J2=new gt(Te.comparator),Q2=new Bt(Te.comparator);function Fe(...n){let e=Q2;for(const t of n)e=e.add(t);return e}const W2=new Bt(Be);function $2(){return W2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function OA(n){return{integerValue:""+n}}function X2(n,e){return A2(e)?OA(e):Bm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function Z2(n,e,t){return n instanceof Pf?(function(o,l){const u={fields:{[EA]:{stringValue:TA},[AA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Vm(l)&&(l=$f(l)),l&&(u.fields[SA]=l),{mapValue:u}})(t,e):n instanceof Ea?BA(n,e):n instanceof lu?FA(n,e):(function(o,l){const u=qA(o,l),d=aS(u)+aS(o.Ae);return Xp(u)&&Xp(o.Ae)?OA(d):Bm(o.serializer,d)})(n,e)}function j2(n,e,t){return n instanceof Ea?BA(n,e):n instanceof lu?FA(n,e):t}function qA(n,e){return n instanceof kf?(function(s){return Xp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Pf extends ed{}class Ea extends ed{constructor(e){super(),this.elements=e}}function BA(n,e){const t=HA(e);for(const s of n.elements)t.some((o=>Oi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class lu extends ed{constructor(e){super(),this.elements=e}}function FA(n,e){let t=HA(e);for(const s of n.elements)t=t.filter((o=>!Oi(o,s)));return{arrayValue:{values:t}}}class kf extends ed{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function aS(n){return At(n.integerValue||n.doubleValue)}function HA(n){return Um(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,t){this.field=e,this.transform=t}}function tU(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Ea&&o instanceof Ea||s instanceof lu&&o instanceof lu?_a(s.elements,o.elements,Oi):s instanceof kf&&o instanceof kf?Oi(s.Ae,o.Ae):s instanceof Pf&&o instanceof Pf})(n.transform,e.transform)}class nU{constructor(e,t){this.version=e,this.transformResults=t}}class ki{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ki}static exists(e){return new ki(void 0,e)}static updateTime(e){return new ki(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class td{}function GA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new KA(n.key,ki.none()):new yu(n.key,n.data,ki.none());{const t=n.data,s=Tn.empty();let o=new Bt(Zt.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),o=o.add(l)}return new yr(n.key,s,new xn(o.toArray()),ki.none())}}function iU(n,e,t){n instanceof yu?(function(o,l,u){const d=o.value.clone(),g=uS(o.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof yr?(function(o,l,u){if(!hf(o.precondition,l))return void l.convertToUnknownDocument(u.version);const d=uS(o.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(zA(o)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function eu(n,e,t,s){return n instanceof yu?(function(l,u,d,g){if(!hf(l.precondition,u))return d;const m=l.value.clone(),v=cS(l.fieldTransforms,g,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof yr?(function(l,u,d,g){if(!hf(l.precondition,u))return d;const m=cS(l.fieldTransforms,g,u),v=u.data;return v.setAll(zA(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,u,d){return hf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function sU(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=qA(s.transform,o||null);l!=null&&(t===null&&(t=Tn.empty()),t.set(s.field,l))}return t||null}function lS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&_a(s,o,((l,u)=>tU(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class yu extends td{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class yr extends td{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function zA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function uS(n,e,t){const s=new Map;$e(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,d=e.data.field(l.field);s.set(l.field,j2(u,d,t[o]))}return s}function cS(n,e,t){const s=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);s.set(o.field,Z2(l,u,e))}return s}class KA extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rU extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&iU(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=eu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=eu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=LA();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(o.key)?null:d;const g=GA(u,d);g!==null&&s.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,((t,s)=>lS(t,s)))&&_a(this.baseMutations,e.baseMutations,((t,s)=>lS(t,s)))}}class Fm{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return J2})();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,s[u].version);return new Fm(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,ze;function uU(n){switch(n){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function YA(n){if(n===void 0)return fs("GRPC error has no .code"),re.UNKNOWN;switch(n){case Pt.OK:return re.OK;case Pt.CANCELLED:return re.CANCELLED;case Pt.UNKNOWN:return re.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return re.INTERNAL;case Pt.UNAVAILABLE:return re.UNAVAILABLE;case Pt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Pt.NOT_FOUND:return re.NOT_FOUND;case Pt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Pt.ABORTED:return re.ABORTED;case Pt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Pt.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:n})}}(ze=Pt||(Pt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=new rr([4294967295,4294967295],0);function fS(n){const e=cU().encode(n),t=new lA;return t.update(e),new Uint8Array(t.digest())}function dS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new rr([t,s],0),new rr([o,l],0)]}class Hm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Kl(`Invalid padding: ${t}`);if(s<0)throw new Kl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=rr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(rr.fromNumber(s)));return o.compare(fU)===1&&(o=new rr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=fS(e),[s,o]=dS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,o,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Hm(l,o,t);return s.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=fS(e),[s,o]=dS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,o,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new nd(Ie.min(),o,new gt(Be),ds(),Fe())}}class _u{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new _u(s,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class JA{constructor(e,t){this.targetId=e,this.Ce=t}}class QA{constructor(e,t,s=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class hS{constructor(){this.ve=0,this.Fe=pS(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),s=Fe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:l})}})),new _u(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=pS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dU{constructor(e){this.Ge=e,this.ze=new Map,this.je=ds(),this.Je=tf(),this.He=tf(),this.Ye=new gt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(jp(l))if(s===0){const u=new Te(l.path);this.et(t,u,rn.newNoDocument(u,Ie.min()))}else $e(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let u,d;try{u=cr(s).toUint8Array()}catch(g){if(g instanceof vA)return ya("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Hm(u,o,l)}catch(g){return ya(g instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&jp(d.target)){const g=new Te(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,rn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=Fe();this.He.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const o=new nd(e,t,this.Ye,this.je,s);return this.je=ds(),this.Je=tf(),this.He=tf(),this.Ye=new gt(Be),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new hS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function tf(){return new gt(Te.comparator)}function pS(){return new gt(Te.comparator)}const hU={asc:"ASCENDING",desc:"DESCENDING"},pU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mU={and:"AND",or:"OR"};class gU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tm(n,e){return n.useProto3Json||Wf(e)?e:{value:e}}function Vf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yU(n,e){return Vf(n,e.toTimestamp())}function Vi(n){return $e(!!n,49232),Ie.fromTimestamp((function(t){const s=ur(t);return new ft(s.seconds,s.nanos)})(n))}function Gm(n,e){return nm(n,e).canonicalString()}function nm(n,e){const t=(function(o){return new mt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function $A(n){const e=mt.fromString(n);return $e(tC(e),10190,{key:e.toString()}),e}function im(n,e){return Gm(n.databaseId,e.path)}function Ap(n,e){const t=$A(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(ZA(t))}function XA(n,e){return Gm(n.databaseId,e)}function _U(n){const e=$A(n);return e.length===4?mt.emptyPath():ZA(e)}function sm(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZA(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mS(n,e,t){return{name:im(n,e),fields:t.value.mapValue.fields}}function vU(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?($e(v===void 0||typeof v=="string",58123),en.fromBase64String(v||"")):($e(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),en.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?re.UNKNOWN:YA(m.code);return new ye(v,m.message||"")})(u);t=new QA(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ap(n,s.document.name),l=Vi(s.document.updateTime),u=s.document.createTime?Vi(s.document.createTime):Ie.min(),d=new Tn({mapValue:{fields:s.document.fields}}),g=rn.newFoundDocument(o,l,u,d),m=s.targetIds||[],v=s.removedTargetIds||[];t=new pf(m,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ap(n,s.document),l=s.readTime?Vi(s.readTime):Ie.min(),u=rn.newNoDocument(o,l),d=s.removedTargetIds||[];t=new pf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ap(n,s.document),l=s.removedTargetIds||[];t=new pf([],l,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,u=new lU(o,l),d=s.targetId;t=new JA(d,u)}}return t}function TU(n,e){let t;if(e instanceof yu)t={update:mS(n,e.key,e.value)};else if(e instanceof KA)t={delete:im(n,e.key)};else if(e instanceof yr)t={update:mS(n,e.key,e.data),updateMask:NU(e.fieldMask)};else{if(!(e instanceof rU))return Ae(16599,{Vt:e.type});t={verify:im(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const d=u.transform;if(d instanceof Pf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ea)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof lu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof kf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ae(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:yU(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(n,e.precondition)),t}function EU(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map((t=>(function(o,l){let u=o.updateTime?Vi(o.updateTime):Vi(l);return u.isEqual(Ie.min())&&(u=Vi(l)),new nU(u,o.transformResults||[])})(t,e)))):[]}function SU(n,e){return{documents:[XA(n,e.path)]}}function AU(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=XA(n,o);const l=(function(m){if(m.length!==0)return eC(qi.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:sa(S.field),direction:wU(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=tm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function CU(n){let e=_U(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){$e(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=jA(T);return S instanceof qi&&NA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(F){return new Df(ra(F.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,Wf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,b=T.values||[];return new Mf(b,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const S=!T.before,b=T.values||[];return new Mf(b,S)})(t.endAt)),F2(e,o,u,l,d,"F",g,m)}function IU(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ra(t.unaryFilter.field);return Ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ra(t.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ra(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ra(t.unaryFilter.field);return Ot.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(ra(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return qi.create(t.compositeFilter.filters.map((s=>jA(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function wU(n){return hU[n]}function RU(n){return pU[n]}function bU(n){return mU[n]}function sa(n){return{fieldPath:n.canonicalString()}}function ra(n){return Zt.fromServerFormat(n.fieldPath)}function eC(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(nS(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NAN"}};if(tS(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nS(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NAN"}};if(tS(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(t.field),op:RU(t.op),value:t.value}}})(n):n instanceof qi?(function(t){const s=t.getFilters().map((o=>eC(o)));return s.length===1?s[0]:{compositeFilter:{op:bU(t.op),filters:s}}})(n):Ae(54877,{filter:n})}function NU(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function tC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t,s,o,l=Ie.min(),u=Ie.min(),d=en.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.yt=e}}function MU(n){const e=CU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?em(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.Cn=new PU}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(lr.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class PU{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Bt(mt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Bt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nC=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(nC,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Sa(0)}static cr(){return new Sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="LruGarbageCollector",kU=1048576;function _S([n,e],[t,s]){const o=Be(n,t);return o===0?Be(e,s):o}class VU{constructor(e){this.Ir=e,this.buffer=new Bt(_S),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();_S(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UU{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(yS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Da(t)?he(yS,"Ignoring IndexedDB error during garbage collection: ",t):await Ma(t)}await this.Vr(3e5)}))}}class LU{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Qf.ce);const s=new VU(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(gS)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,u,d,g,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,d=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(m=Date.now(),na()<=qe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(m-g)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function OU(n,e){return new LU(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(){this.changes=new ao((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&eu(s.mutation,o,xn.empty(),ft.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Fe()){const o=$r();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let u=zl();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=$r();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Fe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,s,o){let l=ds();const u=jl(),d=(function(){return jl()})();return t.forEach(((g,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof yr)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),eu(v.mutation,m,v.mutation.getFieldMask(),ft.now())):u.set(m.key,xn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>d.set(m,new BU(v,u.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=jl();let o=new gt(((u,d)=>u-d)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const m=t.get(g);if(m===null)return;let v=s.get(g)||xn.empty();v=d.applyToLocalView(m,v),s.set(g,v);const T=(o.get(d.batchId)||Fe()).add(g);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,v=g.value,T=LA();v.forEach((S=>{if(!l.has(S)){const b=GA(t.get(S),s.get(S));b!==null&&T.set(S,b),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return se.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):H2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):se.resolve($r());let d=su,g=l;return u.next((m=>se.forEach(m,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,g,m,Fe()))).next((v=>({batchId:d,changes:UA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((s=>{let o=zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let u=zl();return this.indexManager.getCollectionParents(e,l).next((d=>se.forEach(d,(g=>{const m=(function(T,S){return new Xf(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((u=>{l.forEach(((g,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,rn.newInvalidDocument(v)))}));let d=zl();return u.forEach(((g,m)=>{const v=l.get(g);v!==void 0&&eu(v.mutation,m,xn.empty(),ft.now()),jf(t,m)&&(d=d.insert(g,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Vi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:MU(o.bundledQuery),readTime:Vi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(){this.overlays=new gt(Te.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=$r();return se.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const o=$r(),l=t.length+1,u=new Te(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new gt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=$r(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=$r(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return se.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new aU(t,s));let l=this.qr.get(t);l===void 0&&(l=Fe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.Qr=new Bt(zt.$r),this.Ur=new Bt(zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new zt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new zt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Te(new mt([])),s=new zt(t,e),o=new zt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new mt([])),s=new zt(t,e),o=new zt(t,e+1);let l=Fe();return this.Ur.forEachInRange([s,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new zt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(zt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new oU(l,t,s,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new zt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?km:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new zt(t,0),o=new zt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(u=>{const d=this.Xr(u.Yr);l.push(d)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Bt(Be);return t.forEach((o=>{const l=new zt(o,0),u=new zt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(d=>{s=s.add(d.Yr)}))})),se.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Te.isDocumentKey(l)||(l=l.child(""));const u=new zt(new Te(l),0);let d=new Bt(Be);return this.Zr.forEachWhile((g=>{const m=g.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(d=d.add(g.Yr)),!0)}),u),se.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){$e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return se.forEach(t.mutations,(o=>{const l=new zt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new zt(t,0),o=this.Zr.firstAfterOrEqual(s);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e){this.ri=e,this.docs=(function(){return new gt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let s=ds();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():rn.newInvalidDocument(o))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=ds();const u=t.path,d=new Te(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:v}}=g.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||v2(_2(v),s)<=0||(o.has(v.key)||jf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ae(9500)}ii(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new JU(this)}getSize(e){return se.resolve(this.size)}}class JU extends qU{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.persistence=e,this.si=new ao((t=>Lm(t)),Om),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new zm,this.targetCount=0,this.ai=Sa.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Sa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(l).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t){this.ui={},this.overlays={},this.ci=new Qf(0),this.li=!1,this.li=!0,this.hi=new zU,this.referenceDelegate=e(this),this.Pi=new QU(this),this.indexManager=new DU,this.remoteDocumentCache=(function(o){return new YU(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new xU(t),this.Ii=new HU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new KU(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const o=new WU(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class WU extends E2{constructor(e){super(),this.currentSequenceNumber=e}}class Km{constructor(e){this.persistence=e,this.Ri=new zm,this.Vi=null}static mi(e){return new Km(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(s=>{const o=Te.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Uf{constructor(e,t){this.persistence=e,this.pi=new ao((s=>C2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=OU(this,t)}static mi(e,t){return new Uf(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?se.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(s++,l.removeEntry(u,Ie.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ff(e.data.value)),t}br(e,t,s){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Fe(),o=Fe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Ym(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return CD()?8:S2(an())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new $U;return this.Ss(e,t,u).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(na()<=qe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(na()<=qe.DEBUG&&he("QueryEngine","Query:",ia(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(na()<=qe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):se.resolve())}ys(e,t){if(oS(t))return se.resolve(null);let s=Pi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=em(t,null,"F"),s=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Fe(...l);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,s).next((g=>{const m=this.Ds(t,d);return this.Cs(t,m,u,g.readTime)?this.ys(e,em(t,null,"F")):this.vs(e,m,t,g)}))))})))))}ws(e,t,s,o){return oS(t)||o.isEqual(Ie.min())?se.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,o)?se.resolve(null):(na()<=qe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ia(t)),this.vs(e,u,t,y2(o,su)).next((d=>d)))}))}Ds(e,t){let s=new Bt(kA(e));return t.forEach(((o,l)=>{jf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return na()<=qe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ia(t)),this.ps.getDocumentsMatchingQuery(e,t,lr.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",ZU=3e8;class jU{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new gt(Be),this.xs=new ao((l=>Lm(l)),Om),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FU(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function eL(n,e,t,s){return new jU(n,e,t,s)}async function sC(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],d=[];let g=Fe();for(const m of o){u.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function tL(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,m,v){const T=m.batch,S=T.keys();let b=se.resolve();return S.forEach((F=>{b=b.next((()=>v.getEntry(g,F))).next((B=>{const G=m.docVersions.get(F);$e(G!==null,48541),B.version.compareTo(G)<0&&(T.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),v.addEntry(B)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let g=Fe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function rC(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function nL(n,e){const t=Re(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,T))));let b=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?b=b.withResumeToken(en.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,s)),o=o.insert(T,b),(function(B,G,ee){return B.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=ZU?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(S,b,v)&&d.push(t.Pi.updateTargetData(l,b))}));let g=ds(),m=Fe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(iL(l,u,e.documentUpdates).next((v=>{g=v.ks,m=v.qs}))),!s.isEqual(Ie.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return se.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,m))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function iL(n,e,t){let s=Fe(),o=Fe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=ds();return t.forEach(((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):he(Jm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function sL(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=km),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function rL(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,se.resolve(o)):t.Pi.allocateTargetId(s).next((u=>(o=new tr(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function rm(n,e,t){const s=Re(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Da(u))throw u;he(Jm,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function vS(n,e,t){const s=Re(n);let o=Ie.min(),l=Fe();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,m,v){const T=Re(g),S=T.xs.get(v);return S!==void 0?se.resolve(T.Ms.get(S)):T.Pi.getTargetData(m,v)})(s,u,Pi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?o:Ie.min(),t?l:Fe()))).next((d=>(oL(s,z2(e),d),{documents:d,Qs:l})))))}function oL(n,e,t){let s=n.Os.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class TS{constructor(){this.activeTargetIds=$2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aL{constructor(){this.Mo=new TS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new TS,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="ConnectivityMonitor";class SS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(ES,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(ES,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf=null;function om(){return nf===null?nf=(function(){return 268435456+Math.round(2147483648*Math.random())})():nf++,"0x"+nf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="RestConnection",uL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Nf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const u=om(),d=this.zo(e,t.toUriEncodedString());he(Cp,`Sending RPC '${e}' ${u}:`,d,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:m}=new URL(d),v=Ra(m);return this.Jo(e,d,g,s,v).then((T=>(he(Cp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw ya(Cp,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",s),T}))}Ho(e,t,s,o,l,u){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=uL[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class dL extends cL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const u=om();return new Promise(((d,g)=>{const m=new uA;m.setWithCredentials(!0),m.listenOnce(cA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case cf.NO_ERROR:const T=m.getResponseJson();he(nn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case cf.TIMEOUT:he(nn,`RPC '${e}' ${u} timed out`),g(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:const S=m.getStatus();if(he(nn,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const F=b==null?void 0:b.error;if(F&&F.status&&F.message){const B=(function(ee){const X=ee.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(X)>=0?X:re.UNKNOWN})(F.status);g(new ye(B,F.message))}else g(new ye(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new ye(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{he(nn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);he(nn,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=om(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=hA(),d=dA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");he(nn,`Creating RPC '${e}' stream ${o}: ${v}`,g);const T=u.createWebChannel(v,g);this.I_(T);let S=!1,b=!1;const F=new fL({Yo:G=>{b?he(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(S||(he(nn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),he(nn,`RPC '${e}' stream ${o} sending:`,G),T.send(G))},Zo:()=>T.close()}),B=(G,ee,X)=>{G.listen(ee,(Z=>{try{X(Z)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return B(T,Gl.EventType.OPEN,(()=>{b||(he(nn,`RPC '${e}' stream ${o} transport opened.`),F.o_())})),B(T,Gl.EventType.CLOSE,(()=>{b||(b=!0,he(nn,`RPC '${e}' stream ${o} transport closed`),F.a_(),this.E_(T))})),B(T,Gl.EventType.ERROR,(G=>{b||(b=!0,ya(nn,`RPC '${e}' stream ${o} transport errored. Name:`,G.name,"Message:",G.message),F.a_(new ye(re.UNAVAILABLE,"The operation could not be completed")))})),B(T,Gl.EventType.MESSAGE,(G=>{var ee;if(!b){const X=G.data[0];$e(!!X,16349);const Z=X,ae=(Z==null?void 0:Z.error)||((ee=Z[0])==null?void 0:ee.error);if(ae){he(nn,`RPC '${e}' stream ${o} received error:`,ae);const ce=ae.status;let oe=(function(M){const U=Pt[M];if(U!==void 0)return YA(U)})(ce),x=ae.message;oe===void 0&&(oe=re.INTERNAL,x="Unknown error status: "+ce+" with message "+ae.message),b=!0,F.a_(new ye(oe,x)),T.close()}else he(nn,`RPC '${e}' stream ${o} received:`,X),F.u_(X)}})),B(d,fA.STAT_EVENT,(G=>{G.stat===Qp.PROXY?he(nn,`RPC '${e}' stream ${o} detected buffering proxy`):G.stat===Qp.NOPROXY&&he(nn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ip(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(n){return new gU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="PersistentStream";class aC{constructor(e,t,s,o,l,u,d,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(fs(t.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ye(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(AS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(AS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hL extends aC{constructor(e,t,s,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vU(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ie.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?Vi(u.readTime):Ie.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=sm(this.serializer),t.addTarget=(function(l,u){let d;const g=u.target;if(d=jp(g)?{documents:SU(l,g)}:{query:AU(l,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=WA(l,u.resumeToken);const m=tm(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ie.min())>0){d.readTime=Vf(l,u.snapshotVersion.toTimestamp());const m=tm(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=IU(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=sm(this.serializer),t.removeTarget=e,this.q_(t)}}class pL extends aC{constructor(e,t,s,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EU(e.writeResults,e.commitTime),s=Vi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=sm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>TU(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{}class gL extends mL{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,nm(t,s),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(re.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,nm(t,s),o,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fs(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class _L{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{lo(this)&&(he(so,"Restarting streams for network reachability change."),await(async function(g){const m=Re(g);m.Ea.add(4),await vu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await sd(m)})(this))}))})),this.Ra=new yL(s,o)}}async function sd(n){if(lo(n))for(const e of n.da)await e(!0)}async function vu(n){for(const e of n.da)await e(!1)}function lC(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xm(t)?$m(t):Pa(t).O_()&&Wm(t,e))}function Qm(n,e){const t=Re(n),s=Pa(t);t.Ia.delete(e),s.O_()&&uC(t,e),t.Ia.size===0&&(s.O_()?s.L_():lo(t)&&t.Ra.set("Unknown"))}function Wm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pa(n).Y_(e)}function uC(n,e){n.Va.Ue(e),Pa(n).Z_(e)}function $m(n){n.Va=new dU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pa(n).start(),n.Ra.ua()}function Xm(n){return lo(n)&&!Pa(n).x_()&&n.Ia.size>0}function lo(n){return Re(n).Ea.size===0}function cC(n){n.Va=void 0}async function vL(n){n.Ra.set("Online")}async function TL(n){n.Ia.forEach(((e,t)=>{Wm(n,e)}))}async function EL(n,e){cC(n),Xm(n)?(n.Ra.ha(e),$m(n)):n.Ra.set("Unknown")}async function SL(n,e,t){if(n.Ra.set("Online"),e instanceof QA&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){he(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Lf(n,s)}else if(e instanceof pf?n.Va.Ze(e):e instanceof JA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ie.min()))try{const s=await rC(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const d=l.Va.Tt(u);return d.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,m)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(en.EMPTY_BYTE_STRING,v.snapshotVersion)),uC(l,g);const T=new tr(v.target,g,m,v.sequenceNumber);Wm(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){he(so,"Failed to raise snapshot:",s),await Lf(n,s)}}async function Lf(n,e,t){if(!Da(e))throw e;n.Ea.add(1),await vu(n),n.Ra.set("Offline"),t||(t=()=>rC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(so,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await sd(n)}))}function fC(n,e){return e().catch((t=>Lf(n,t,e)))}async function rd(n){const e=Re(n),t=dr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:km;for(;AL(e);)try{const o=await sL(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,CL(e,o)}catch(o){await Lf(e,o)}dC(e)&&hC(e)}function AL(n){return lo(n)&&n.Ta.length<10}function CL(n,e){n.Ta.push(e);const t=dr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function dC(n){return lo(n)&&!dr(n).x_()&&n.Ta.length>0}function hC(n){dr(n).start()}async function IL(n){dr(n).ra()}async function wL(n){const e=dr(n);for(const t of n.Ta)e.ea(t.mutations)}async function RL(n,e,t){const s=n.Ta.shift(),o=Fm.from(s,e,t);await fC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await rd(n)}async function bL(n,e){e&&dr(n).X_&&await(async function(s,o){if((function(u){return uU(u)&&u!==re.ABORTED})(o.code)){const l=s.Ta.shift();dr(s).B_(),await fC(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await rd(s)}})(n,e),dC(n)&&hC(n)}async function CS(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),he(so,"RemoteStore received new credentials");const s=lo(t);t.Ea.add(3),await vu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await sd(t)}async function NL(n,e){const t=Re(n);e?(t.Ea.delete(2),await sd(t)):e||(t.Ea.add(2),await vu(t),t.Ra.set("Unknown"))}function Pa(n){return n.ma||(n.ma=(function(t,s,o){const l=Re(t);return l.sa(),new hL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:vL.bind(null,n),t_:TL.bind(null,n),r_:EL.bind(null,n),H_:SL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Xm(n)?$m(n):n.Ra.set("Unknown")):(await n.ma.stop(),cC(n))}))),n.ma}function dr(n){return n.fa||(n.fa=(function(t,s,o){const l=Re(t);return l.sa(),new pL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:IL.bind(null,n),r_:bL.bind(null,n),ta:wL.bind(null,n),na:RL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await rd(n)):(await n.fa.stop(),n.Ta.length>0&&(he(so,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const u=Date.now()+s,d=new Zm(e,t,u,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jm(n,e){if(fs("AsyncQueue",`${e}: ${n}`),Da(n))return new ye(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{static emptySet(e){return new pa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Te.comparator(t.key,s.key):(t,s)=>Te.comparator(t.key,s.key),this.keyedMap=zl(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new pa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.ga=new gt(Te.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Aa{constructor(e,t,s,o,l,u,d,g,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Aa(e,t,pa.emptySet(t),u,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ML{constructor(){this.queries=wS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),l=o.queries;o.queries=wS(),l.forEach(((u,d)=>{for(const g of d.Sa)g.onError(s)}))})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function wS(){return new ao((n=>PA(n)),Zf)}async function DL(n,e){const t=Re(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new xL,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=jm(u,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&eg(t)}async function PL(n,e){const t=Re(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function kL(n,e){const t=Re(n);let s=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const d of u.Sa)d.Fa(o)&&(s=!0);u.wa=o}}s&&eg(t)}function VL(n,e,t){const s=Re(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function eg(n){n.Ca.forEach((e=>{e.next()}))}var am,RS;(RS=am||(am={})).Ma="default",RS.Cache="cache";class UL{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Aa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.key=e}}class mC{constructor(e){this.key=e}}class LL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=kA(e),this.tu=new pa(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new IS,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),b=jf(this.query,T)?T:null,F=!!S&&this.mutatedKeys.has(S.key),B=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let G=!1;S&&b?S.data.isEqual(b.data)?F!==B&&(s.track({type:3,doc:b}),G=!0):this.su(S,b)||(s.track({type:2,doc:b}),G=!0,(g&&this.eu(b,g)>0||m&&this.eu(b,m)<0)&&(d=!0)):!S&&b?(s.track({type:0,doc:b}),G=!0):S&&!b&&(s.track({type:1,doc:S}),G=!0,(g||m)&&(d=!0)),G&&(b?(u=u.add(b),l=B?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,T)=>(function(b,F){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:G})}};return B(b)-B(F)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,m=g!==this.Za;return this.Za=g,u.length!==0||m?{snapshot:new Aa(this.query,e.tu,l,u,e.mutatedKeys,g===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new IS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new mC(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new pC(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Aa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tg="SyncEngine";class OL{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class qL{constructor(e){this.key=e,this.hu=!1}}class BL{constructor(e,t,s,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ao((d=>PA(d)),Zf),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Te.comparator),this.Au=new Map,this.Ru=new zm,this.Vu={},this.mu=new Map,this.fu=Sa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FL(n,e,t=!0){const s=EC(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await gC(s,e,t,!0),o}async function HL(n,e){const t=EC(n);await gC(t,e,!0,!1)}async function gC(n,e,t,s){const o=await rL(n.localStore,Pi(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await GL(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&lC(n.remoteStore,o),d}async function GL(n,e,t,s,o){n.pu=(T,S,b)=>(async function(B,G,ee,X){let Z=G.view.ru(ee);Z.Cs&&(Z=await vS(B.localStore,G.query,!1).then((({documents:x})=>G.view.ru(x,Z))));const ae=X&&X.targetChanges.get(G.targetId),ce=X&&X.targetMismatches.get(G.targetId)!=null,oe=G.view.applyChanges(Z,B.isPrimaryClient,ae,ce);return NS(B,G.targetId,oe.au),oe.snapshot})(n,T,S,b);const l=await vS(n.localStore,e,!0),u=new LL(e,l.Qs),d=u.ru(l.documents),g=_u.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,g);NS(n,t,m.au);const v=new OL(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function zL(n,e,t){const s=Re(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((u=>!Zf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await rm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Qm(s.remoteStore,o.targetId),lm(s,o.targetId)})).catch(Ma)):(lm(s,o.targetId),await rm(s.localStore,o.targetId,!0))}async function KL(n,e){const t=Re(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Qm(t.remoteStore,s.targetId))}async function YL(n,e,t){const s=jL(n);try{const o=await(function(u,d){const g=Re(u),m=ft.now(),v=d.reduce(((b,F)=>b.add(F.key)),Fe());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let F=ds(),B=Fe();return g.Ns.getEntries(b,v).next((G=>{F=G,F.forEach(((ee,X)=>{X.isValidDocument()||(B=B.add(ee))}))})).next((()=>g.localDocuments.getOverlayedDocuments(b,F))).next((G=>{T=G;const ee=[];for(const X of d){const Z=sU(X,T.get(X.key).overlayedDocument);Z!=null&&ee.push(new yr(X.key,Z,wA(Z.value.mapValue),ki.exists(!0)))}return g.mutationQueue.addMutationBatch(b,m,ee,d)})).next((G=>{S=G;const ee=G.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(b,G.batchId,ee)}))})).then((()=>({batchId:S.batchId,changes:UA(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(u,d,g){let m=u.Vu[u.currentUser.toKey()];m||(m=new gt(Be)),m=m.insert(d,g),u.Vu[u.currentUser.toKey()]=m})(s,o.batchId,t),await Tu(s,o.changes),await rd(s.remoteStore)}catch(o){const l=jm(o,"Failed to persist write");t.reject(l)}}async function yC(n,e){const t=Re(n);try{const s=await nL(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Au.get(l);u&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?$e(u.hu,14607):o.removedDocuments.size>0&&($e(u.hu,42227),u.hu=!1))})),await Tu(t,s,e)}catch(s){await Ma(s)}}function bS(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const g=Re(u);g.onlineState=d;let m=!1;g.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(d)&&(m=!0)})),m&&eg(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function JL(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let u=new gt(Te.comparator);u=u.insert(l,rn.newNoDocument(l,Ie.min()));const d=Fe().add(l),g=new nd(Ie.min(),new Map,new gt(Be),u,d);await yC(s,g),s.du=s.du.remove(l),s.Au.delete(e),ng(s)}else await rm(s.localStore,e,!1).then((()=>lm(s,e,t))).catch(Ma)}async function QL(n,e){const t=Re(n),s=e.batch.batchId;try{const o=await tL(t.localStore,e);vC(t,s,null),_C(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Tu(t,o)}catch(o){await Ma(o)}}async function WL(n,e,t){const s=Re(n);try{const o=await(function(u,d){const g=Re(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return g.mutationQueue.lookupMutationBatch(m,d).next((T=>($e(T!==null,37113),v=T.keys(),g.mutationQueue.removeMutationBatch(m,T)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>g.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);vC(s,e,t),_C(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Tu(s,o)}catch(o){await Ma(o)}}function _C(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function vC(n,e,t){const s=Re(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function lm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||TC(n,s)}))}function TC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Qm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ng(n))}function NS(n,e,t){for(const s of t)s instanceof pC?(n.Ru.addReference(s.key,e),$L(n,s)):s instanceof mC?(he(tg,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||TC(n,s.key)):Ae(19791,{wu:s})}function $L(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(he(tg,"New document in limbo: "+t),n.Eu.add(s),ng(n))}function ng(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(mt.fromString(e)),s=n.fu.next();n.Au.set(s,new qL(t)),n.du=n.du.insert(t,s),lC(n.remoteStore,new tr(Pi(qm(t.path)),s,"TargetPurposeLimboResolution",Qf.ce))}}async function Tu(n,e,t){const s=Re(n),o=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,g)=>{u.push(s.pu(g,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const T=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(m){o.push(m);const T=Ym.As(g.targetId,m);l.push(T)}})))})),await Promise.all(u),s.Pu.H_(o),await(async function(g,m){const v=Re(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(m,(S=>se.forEach(S.Es,(b=>v.persistence.referenceDelegate.addReference(T,S.targetId,b))).next((()=>se.forEach(S.ds,(b=>v.persistence.referenceDelegate.removeReference(T,S.targetId,b)))))))))}catch(T){if(!Da(T))throw T;he(Jm,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const b=v.Ms.get(S),F=b.snapshotVersion,B=b.withLastLimboFreeSnapshotVersion(F);v.Ms=v.Ms.insert(S,B)}}})(s.localStore,l))}async function XL(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){he(tg,"User change. New user:",e.toKey());const s=await sC(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new ye(re.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Tu(t,s.Ls)}}function ZL(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return Fe().add(s.key);{let o=Fe();const l=t.Iu.get(e);if(!l)return o;for(const u of l){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function EC(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JL.bind(null,e),e.Pu.H_=kL.bind(null,e.eventManager),e.Pu.yu=VL.bind(null,e.eventManager),e}function jL(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WL.bind(null,e),e}class Of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eL(this.persistence,new XU,e.initialUser,this.serializer)}Cu(e){return new iC(Km.mi,this.serializer)}Du(e){return new aL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Of.provider={build:()=>new Of};class e4 extends Of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof Uf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new UU(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new iC((s=>Uf.mi(s,t)),this.serializer)}}class um{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>bS(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=XL.bind(null,this.syncEngine),await NL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ML})()}createDatastore(e){const t=id(e.databaseInfo.databaseId),s=(function(l){return new dL(l)})(e.databaseInfo);return(function(l,u,d,g){return new gL(l,u,d,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,u,d){return new _L(s,o,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>bS(this.syncEngine,t,0)),(function(){return SS.v()?new SS:new lL})())}createSyncEngine(e,t){return(function(o,l,u,d,g,m,v){const T=new BL(o,l,u,d,g,m);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);he(so,"RemoteStore shutting down."),l.Ea.add(5),await vu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}um.provider={build:()=>new um};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="FirestoreClient";class n4{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=Dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{he(hr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(he(hr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=jm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function wp(n,e){n.asyncQueue.verifyOperationInProgress(),he(hr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await sC(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function xS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await i4(n);he(hr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>CS(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>CS(e.remoteStore,o))),n._onlineComponents=e}async function i4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(hr,"Using user provided OfflineComponentProvider");try{await wp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ya("Error using user provided cache. Falling back to memory cache: "+t),await wp(n,new Of)}}else he(hr,"Using default OfflineComponentProvider"),await wp(n,new e4(void 0));return n._offlineComponents}async function SC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(hr,"Using user provided OnlineComponentProvider"),await xS(n,n._uninitializedComponentsProvider._online)):(he(hr,"Using default OnlineComponentProvider"),await xS(n,new um))),n._onlineComponents}function s4(n){return SC(n).then((e=>e.syncEngine))}async function r4(n){const e=await SC(n),t=e.eventManager;return t.onListen=FL.bind(null,e.syncEngine),t.onUnlisten=zL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=KL.bind(null,e.syncEngine),t}function o4(n,e,t={}){const s=new or;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const v=new t4({next:S=>{v.Nu(),u.enqueueAndForget((()=>PL(l,T)));const b=S.docs.has(d);!b&&S.fromCache?m.reject(new ye(re.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&S.fromCache&&g&&g.source==="server"?m.reject(new ye(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new UL(qm(d.path),v,{includeMetadataChanges:!0,qa:!0});return DL(l,T)})(await r4(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="firestore.googleapis.com",DS=!0;class PS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CC,this.ssl=DS}else this.host=e.host,this.ssl=e.ssl??DS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kU)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AC(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ig{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new r2;switch(s.type){case"firstParty":return new u2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=MS.get(t);s&&(he("ComponentProvider","Removing Datastore"),MS.delete(t),s.terminate())})(this),Promise.resolve()}}function a4(n,e,t,s={}){var m;n=io(n,ig);const o=Ra(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(T0(`https://${d}`),E0("Firestore",!0)),l.host!==CC&&l.host!==d&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:o,emulatorOptions:s};if(!ar(g,u)&&(n._setSettings(g),s.mockUserToken)){let v,T;if(typeof s.mockUserToken=="string")v=s.mockUserToken,T=sn.MOCK_USER;else{v=mD(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new sn(S)}n._authCredentials=new o2(new mA(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new sg(this.firestore,e,this._query)}}class qt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(gu(t,qt._jsonSchema))return new qt(e,s||null,new Te(mt.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:kt("string",qt._jsonSchemaVersion),referencePath:kt("string")};class uu extends sg{constructor(e,t,s){super(e,t,qm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Te(e))}withConverter(e){return new uu(this.firestore,e,this._path)}}function uo(n,e,...t){if(n=jt(n),arguments.length===1&&(e=Dm.newId()),m2("doc","path",e),n instanceof ig){const s=mt.fromString(e,...t);return JE(s),new qt(n,null,new Te(s))}{if(!(n instanceof qt||n instanceof uu))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(mt.fromString(e,...t));return JE(s),new qt(n.firestore,n instanceof uu?n.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="AsyncQueue";class VS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oC(this,"async_queue_retry"),this._c=()=>{const s=Ip();s&&he(kS,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Da(e))throw e;he(kS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,fs("INTERNAL UNHANDLED ERROR: ",US(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Zm.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:US(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function US(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class od extends ig{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new VS,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VS(e),this._firestoreClient=void 0,await e}}}function l4(n,e){const t=typeof n=="object"?n:I0(),s=typeof n=="string"?n:Nf,o=Sm(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=hD("firestore");l&&a4(o,...l)}return o}function IC(n){if(n._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||u4(n),n._firestoreClient}function u4(n){var s,o,l;const e=n._freezeSettings(),t=(function(d,g,m,v){return new R2(d,g,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,AC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new n4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(en.fromBase64String(e))}catch(t){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:kt("string",Kn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(e){if(gu(e,Ui._jsonSchema))return new Ui(e.latitude,e.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:kt("string",Ui._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Li(e.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:kt("string",Li._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=/^__.*__$/;class f4{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new yr(e,this.data,this.fieldMask,t,this.fieldTransforms):new yu(e,this.data,t,this.fieldTransforms)}}class wC{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new yr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:n})}}class ud{constructor(e,t,s,o,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ud({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(RC(this.Ac)&&c4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class d4{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||id(e)}Cc(e,t,s,o=!1){return new ud({Ac:e,methodName:t,Dc:s,path:Zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bC(n){const e=n._freezeSettings(),t=id(n._databaseId);return new d4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function h4(n,e,t,s,o,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);og("Data must be an object, but it was:",u,s);const d=NC(s,u);let g,m;if(l.merge)g=new xn(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const S=cm(e,T,t);if(!u.contains(S))throw new ye(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);MC(v,S)||v.push(S)}g=new xn(v),m=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,m=u.fieldTransforms;return new f4(new Tn(d),g,m)}class cd extends ld{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}function p4(n,e,t){return new ud({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rg extends ld{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=p4(this,e,!0),s=this.vc.map((l=>Eu(l,t))),o=new Ea(s);return new eU(e.path,o)}isEqual(e){return e instanceof rg&&ar(this.vc,e.vc)}}function m4(n,e,t,s){const o=n.Cc(1,e,t);og("Data must be an object, but it was:",o,s);const l=[],u=Tn.empty();gr(s,((g,m)=>{const v=ag(e,g,t);m=jt(m);const T=o.yc(v);if(m instanceof cd)l.push(v);else{const S=Eu(m,T);S!=null&&(l.push(v),u.set(v,S))}}));const d=new xn(l);return new wC(u,d,o.fieldTransforms)}function g4(n,e,t,s,o,l){const u=n.Cc(1,e,t),d=[cm(e,s,t)],g=[o];if(l.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(cm(e,l[S])),g.push(l[S+1]);const m=[],v=Tn.empty();for(let S=d.length-1;S>=0;--S)if(!MC(m,d[S])){const b=d[S];let F=g[S];F=jt(F);const B=u.yc(b);if(F instanceof cd)m.push(b);else{const G=Eu(F,B);G!=null&&(m.push(b),v.set(b,G))}}const T=new xn(m);return new wC(v,T,u.fieldTransforms)}function Eu(n,e){if(xC(n=jt(n)))return og("Unsupported field value:",e,n),NC(n,e);if(n instanceof ld)return(function(s,o){if(!RC(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let u=0;for(const d of s){let g=Eu(d,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return X2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ft.fromDate(s);return{timestampValue:Vf(o.serializer,l)}}if(s instanceof ft){const l=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vf(o.serializer,l)}}if(s instanceof Ui)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Kn)return{bytesValue:WA(o.serializer,s._byteString)};if(s instanceof qt){const l=o.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Li)return(function(u,d){return{mapValue:{fields:{[CA]:{stringValue:IA},[xf]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return Bm(d.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Pm(s)}`)})(n,e)}function NC(n,e){const t={};return _A(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gr(n,((s,o)=>{const l=Eu(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function xC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Ui||n instanceof Kn||n instanceof qt||n instanceof ld||n instanceof Li)}function og(n,e,t){if(!xC(t)||!gA(t)){const s=Pm(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function cm(n,e,t){if((e=jt(e))instanceof ad)return e._internalPath;if(typeof e=="string")return ag(n,e);throw qf("Field path arguments must be of type string or ",n,!1,void 0,t)}const y4=new RegExp("[~\\*/\\[\\]]");function ag(n,e,t){if(e.search(y4)>=0)throw qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch{throw qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qf(n,e,t,s,o){const l=s&&!s.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${o}`),g+=")"),new ye(re.INVALID_ARGUMENT,d+n+g)}function MC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(PC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _4 extends DC{data(){return super.data()}}function PC(n,e){return typeof e=="string"?ag(n,e):e instanceof ad?e._internalPath:e._delegate._internalPath}class v4{convertValue(e,t="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return gr(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[xf].arrayValue)==null?void 0:o.values)==null?void 0:l.map((u=>At(u.doubleValue)));return new Li(t)}convertGeoPoint(e){return new Ui(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=$f(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const t=ur(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=mt.fromString(e);$e(tC(s),9688,{name:e});const o=new ou(s.get(1),s.get(3)),l=new Te(s.popFirst(5));return o.isEqual(t)||fs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Yl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xr extends DC{constructor(e,t,s,o,l,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(PC("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Xr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xr._jsonSchema={type:kt("string",Xr._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class mf extends Xr{data(e={}){return super.data(e)}}class tu{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Yl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new mf(this._firestore,this._userDataWriter,s.key,s,new Yl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const g=new mf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Yl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new mf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Yl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:E4(d.type),doc:g,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function E4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n){n=io(n,qt);const e=io(n.firestore,od);return o4(IC(e),n._key).then((t=>A4(e,n,t)))}tu._jsonSchemaVersion="firestore/querySnapshot/1.0",tu._jsonSchema={type:kt("string",tu._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class S4 extends v4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function VC(n,e,t){n=io(n,qt);const s=io(n.firestore,od),o=T4(n.converter,e,t);return UC(s,[h4(bC(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ki.none())])}function lg(n,e,t,...s){n=io(n,qt);const o=io(n.firestore,od),l=bC(o);let u;return u=typeof(e=jt(e))=="string"||e instanceof ad?g4(l,"updateDoc",n._key,e,t,s):m4(l,"updateDoc",n._key,e),UC(o,[u.toMutation(n._key,ki.exists(!0))])}function UC(n,e){return(function(s,o){const l=new or;return s.asyncQueue.enqueueAndForget((async()=>YL(await s4(s),o,l))),l.promise})(IC(n),e)}function A4(n,e,t){const s=t.docs.get(e._key),o=new S4(n);return new Xr(n,o,e._key,s,new Yl(t.hasPendingWrites,t.fromCache),e.converter)}function LC(...n){return new rg("arrayUnion",n)}(function(e,t=!0){(function(o){xa=o})(ba),ma(new jr("firestore",((s,{instanceIdentifier:o,options:l})=>{const u=s.getProvider("app").getImmediate(),d=new od(new a2(s.getProvider("auth-internal")),new c2(u,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(m.options.projectId,v)})(u,o),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),sr(GE,zE,e),sr(GE,zE,"esm2020")})();var C4="firebase",I4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(C4,I4,"app");const w4={apiKey:"AIzaSyDFxeAnSQgt9SFnjS7DIfuPXROYxvGz81E",authDomain:"learnenglish-c19d1.firebaseapp.com",projectId:"learnenglish-c19d1",storageBucket:"learnenglish-c19d1.firebasestorage.app",messagingSenderId:"383230463534",appId:"1:383230463534:web:006f96e48f65c8053119bf",measurementId:"G-9FFLYFWDLN"},OC=C0(w4),Zr=i2(OC),co=l4(OC),ug=(n,e)=>{var t;return{uid:n.uid,name:e||n.displayName||((t=n.email)==null?void 0:t.split("@")[0])||"User",email:n.email||"",avatar:n.photoURL||`https://api.dicebear.com/7.x/notionists/svg?seed=${n.email}`}},R4=async(n,e,t)=>{try{const o=(await qk(Zr,n,e)).user;return await Hk(o,{displayName:t,photoURL:`https://api.dicebear.com/7.x/notionists/svg?seed=${n}`}),await VC(uo(co,"users",o.uid),{name:t,email:n,createdAt:new Date().toISOString(),score:0,quizzesTaken:0,learningProgress:{}}),ug(o,t)}catch(s){throw new Error(qC(s.code))}},b4=async(n,e)=>{try{const t=await Bk(Zr,n,e);return ug(t.user)}catch(t){throw new Error(qC(t.code))}},N4=async()=>{await Yk(Zr)},LS=async(n,e)=>{try{const t=uo(co,"users",n,"customTopics",e),s=await kC(t);return s.exists()?s.data():null}catch(t){return console.error("Error fetching custom topic:",t),null}},OS=async(n,e)=>{try{const t=uo(co,"users",n,"customTopics",e.id);await VC(t,e,{merge:!0})}catch(t){console.error("Error creating custom topic:",t)}},x4=async(n,e,t)=>{try{const s=uo(co,"users",n,"customTopics",e);await lg(s,{words:LC(...t),updatedAt:new Date().toISOString()})}catch(s){console.error("Error appending words:",s)}},M4=async(n,e,t,s)=>{if(!Zr.currentUser)return;const o=uo(co,"users",n);try{await lg(o,{history:LC({topicName:t,score:e.score,correct:e.correct,total:e.total,date:new Date().toISOString()})})}catch(l){console.error("Error saving score",l)}},Rp=async(n,e)=>{const t=uo(co,"users",n),s=`learningProgress.${e.topicId}`;try{await lg(t,{[s]:e})}catch(o){console.error("Error saving progress",o)}},D4=async n=>{const e=uo(co,"users",n),t=await kC(e);return t.exists()?t.data():null},qC=n=>{switch(n){case"auth/email-already-in-use":return"Email ny  c ng k.";case"auth/invalid-email":return"Email khng hp l.";case"auth/user-not-found":return"Ti khon khng tn ti.";case"auth/wrong-password":return"Sai mt khu.";case"auth/weak-password":return"Mt khu qu yu (cn > 6 k t).";default:return" c li xy ra. Vui lng th li."}},qS=[{id:"all",label:"Tt c"},{id:"common",label:"Thng dng"},{id:"toeic",label:"Luyn thi TOEIC"},{id:"ielts",label:"Luyn thi IELTS"},{id:"business",label:"Kinh doanh"},{id:"tech",label:"Cng ngh"},{id:"medical",label:"Y khoa"}],P4=[{id:"c1",name:"Daily Routine",icon:"",description:"Thi quen sinh hot hng ngy",color:"#00b894",category:"common"},{id:"c2",name:"Family & Friends",icon:"",description:"Gia nh v cc mi quan h",color:"#00b894",category:"common"},{id:"c3",name:"Food & Cooking",icon:"",description:"m thc, nu nng v nh hng",color:"#fdcb6e",category:"common"},{id:"c4",name:"Travel & Tourism",icon:"",description:"Du lch, sn bay v khch sn",color:"#0984e3",category:"common"},{id:"t1",name:"Office Life",icon:"",description:"Vn phng phm, thit b, quy trnh",color:"#6c5ce7",category:"toeic"},{id:"t2",name:"Human Resources",icon:"",description:"Tuyn dng, phng vn, nhn s",color:"#6c5ce7",category:"toeic"},{id:"t3",name:"Marketing",icon:"",description:"Qung co, th trng, sales",color:"#e17055",category:"toeic"},{id:"i1",name:"Environment",icon:"",description:"Mi trng, bin i kh hu",color:"#2ecc71",category:"ielts"},{id:"i2",name:"Education",icon:"",description:"Gio dc, i hc, nghin cu",color:"#a29bfe",category:"ielts"},{id:"te1",name:"Software Dev",icon:"",description:"Lp trnh, phn mm, coding",color:"#0984e3",category:"tech"},{id:"te2",name:"Cyber Security",icon:"",description:"Bo mt, hacker, an ton mng",color:"#2d3436",category:"tech"},{id:"m1",name:"Anatomy",icon:"",description:"Gii phu c th ngi",color:"#ff7675",category:"medical"},{id:"m2",name:"Hospital",icon:"",description:"Bnh vin, bc s, dng c y t",color:"#d63031",category:"medical"}],k4=({topics:n,onSelectTopic:e,onCustomTopic:t})=>{const[s,o]=ke.useState(""),[l,u]=ke.useState("all"),d=m=>{m.preventDefault(),s.trim()&&t(s.trim())},g=l==="all"?n:n.filter(m=>m.category===l);return N.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-fadeIn",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"VocaMaster AI"}),N.jsx("p",{className:"text-gray-600 text-lg",children:"Kho t vng 5000+ t theo ch  & Luyn thi thng minh"})]}),N.jsx("form",{onSubmit:d,className:"max-w-xl mx-auto mb-10 relative z-10",children:N.jsxs("div",{className:"relative flex items-center shadow-lg rounded-full",children:[N.jsx("input",{type:"text",value:s,onChange:m=>o(m.target.value),placeholder:" Nhp ch  bt k (VD: Space, Pirates...)",className:"w-full px-6 py-4 rounded-full border-2 border-transparent bg-white focus:border-primary focus:ring-4 focus:ring-primary/20 outline-none text-lg transition-all"}),N.jsx("button",{type:"submit",disabled:!s.trim(),className:"absolute right-2 bg-primary hover:bg-primary/90 text-white px-6 py-2 rounded-full font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"To bi"})]})}),N.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8 sticky top-20 z-40 bg-gray-50/90 backdrop-blur-sm p-4 rounded-xl",children:qS.map(m=>N.jsx("button",{onClick:()=>u(m.id),className:`
              px-4 py-2 rounded-full text-sm font-bold transition-all
              ${l===m.id?"bg-dark text-white shadow-md scale-105":"bg-white text-gray-500 hover:bg-gray-100 border border-gray-200"}
            `,children:m.label},m.id))}),N.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20",children:g.map(m=>{var v;return N.jsxs("div",{className:`
              relative flex flex-col group rounded-3xl p-6 bg-white border-2 border-gray-100 hover:border-gray-300 transition-all duration-300 hover:shadow-xl hover:-translate-y-1
            `,style:{borderBottomColor:m.color,borderBottomWidth:"6px"},children:[N.jsxs("div",{className:"flex items-start justify-between mb-4",children:[N.jsx("span",{className:"text-5xl group-hover:scale-110 transition-transform duration-300",children:m.icon}),N.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-bold text-white uppercase tracking-wide",style:{backgroundColor:m.color},children:((v=qS.find(T=>T.id===m.category))==null?void 0:v.label)||"General"})]}),N.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:m.name}),N.jsx("p",{className:"text-sm text-gray-500 mb-6 flex-grow",children:m.description}),N.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-auto",children:[N.jsxs("button",{onClick:()=>e(m.id,m.name,"learn"),className:"py-2.5 px-4 rounded-xl bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold text-sm transition-colors flex items-center justify-center",children:[N.jsx("span",{className:"mr-1",children:""})," Hc t"]}),N.jsxs("button",{onClick:()=>e(m.id,m.name,"test"),className:"py-2.5 px-4 rounded-xl bg-primary hover:bg-primary/90 text-white font-bold text-sm transition-colors shadow-md flex items-center justify-center",children:[N.jsx("span",{className:"mr-1",children:""})," Test"]})]})]},m.id)})})]})},V4=({cards:n,onComplete:e,onExit:t})=>{const[s,o]=ke.useState([]),[l,u]=ke.useState(0),[d,g]=ke.useState(0),[m,v]=ke.useState(!1),[T,S]=ke.useState(!1);if(ke.useEffect(()=>{n&&n.length>0&&(o([...n]),u(n.length))},[n]),!n||n.length===0)return N.jsx("div",{className:"text-center p-10 text-gray-500",children:"ang ti d liu..."});if(s.length===0&&l>0)return setTimeout(()=>e(d),100),null;const b=s[0];if(!b)return null;const F=Math.round(d/l*100),B=()=>{v(!m)},G=Z=>{const ae=new SpeechSynthesisUtterance(Z);ae.lang="en-US",window.speechSynthesis.speak(ae)},ee=()=>{T||(S(!0),setTimeout(()=>{g(Z=>Z+1),o(Z=>Z.slice(1)),v(!1),S(!1)},300))},X=()=>{T||(S(!0),setTimeout(()=>{o(Z=>{const[ae,...ce]=Z;return[...ce,ae]}),v(!1),S(!1)},300))};return N.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[85vh] w-full max-w-4xl mx-auto px-4 overflow-hidden",children:[N.jsxs("div",{className:"w-full flex items-center justify-between mb-6",children:[N.jsxs("button",{onClick:()=>t(d),className:"text-gray-500 hover:text-dark font-medium flex items-center px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[N.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Dng hc"]}),N.jsxs("div",{className:"flex flex-col items-end",children:[N.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:" thuc"}),N.jsxs("div",{className:"flex items-center space-x-2",children:[N.jsx("div",{className:"w-32 h-3 bg-gray-200 rounded-full overflow-hidden",children:N.jsx("div",{className:"h-full bg-green-500 transition-all duration-500 ease-out",style:{width:`${F}%`}})}),N.jsxs("span",{className:"font-bold text-green-600",children:[d,"/",l]})]})]})]}),N.jsx("div",{className:`relative w-full max-w-md h-[420px] perspective-1000 cursor-pointer transition-all duration-300 ${T?"opacity-0 translate-x-10 scale-95":"opacity-100"}`,onClick:B,children:N.jsxs("div",{className:`relative w-full h-full text-center transition-transform duration-500 transform-style-3d ${m?"rotate-y-180":""}`,children:[N.jsxs("div",{className:"absolute w-full h-full backface-hidden bg-white rounded-3xl shadow-xl border-2 border-gray-100 flex flex-col items-center justify-center p-8 select-none",children:[N.jsx("div",{className:"absolute top-6 right-6",children:N.jsx("span",{className:"bg-gray-100 text-gray-500 text-xs font-bold px-3 py-1 rounded-full uppercase",children:b.type})}),N.jsx("h2",{className:"text-5xl font-extrabold text-dark mb-4 mt-4",children:b.word}),N.jsxs("div",{className:"flex items-center space-x-2 bg-indigo-50 hover:bg-indigo-100 px-4 py-2 rounded-full mt-2 cursor-pointer transition-colors",onClick:Z=>{Z.stopPropagation(),G(b.word)},children:[N.jsx("span",{className:"text-indigo-600 font-serif italic text-lg",children:b.phonetic}),N.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})]}),N.jsx("p",{className:"absolute bottom-6 text-gray-400 text-sm font-medium animate-bounce-sm",children:"Chm  xem ngha"})]}),N.jsxs("div",{className:"absolute w-full h-full backface-hidden rotate-y-180 bg-white rounded-3xl shadow-xl border-4 border-primary flex flex-col items-center justify-center p-8 text-dark select-none",children:[N.jsx("h3",{className:"text-3xl font-bold mb-6 text-primary",children:b.vietnamese}),N.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 w-full border border-gray-100 relative",children:[N.jsx("span",{className:"absolute -top-3 left-4 bg-white px-2 text-xs font-bold text-gray-400",children:"V d"}),N.jsxs("p",{className:"text-gray-600 italic text-lg leading-relaxed",children:['"',b.example,'"']})]})]})]})}),N.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-8 w-full max-w-md",children:[N.jsxs("button",{onClick:ee,className:"flex-1 py-4 bg-green-500 hover:bg-green-600 text-white font-bold text-lg rounded-2xl shadow-lg shadow-green-200 border-b-4 border-green-700 active:border-b-0 active:translate-y-1 transition-all flex flex-col items-center",children:[N.jsx("span",{children:"  nh!"}),N.jsx("span",{className:"text-xs font-normal opacity-80",children:"+1 Tin "})]}),N.jsxs("button",{onClick:X,className:"flex-1 py-4 rounded-2xl bg-orange-100 hover:bg-orange-200 text-orange-700 font-bold text-lg shadow-sm border-b-4 border-orange-200 active:border-b-0 active:translate-y-1 transition-all flex flex-col items-center",children:[N.jsx("span",{children:" T tip tc"}),N.jsx("span",{className:"text-xs font-normal opacity-70",children:"Hc li sau"})]})]}),N.jsx("p",{className:"mt-6 text-gray-400 text-xs text-center max-w-xs",children:'Mo: Nt "T tip tc" s gi t ny li trong danh sch  n tp sau.'})]})},U4=({cards:n,onFinish:e})=>{const[t,s]=ke.useState(0),[o,l]=ke.useState(0),[u,d]=ke.useState(0),[g,m]=ke.useState(0),[v,T]=ke.useState([]),[S,b]=ke.useState(null),[F,B]=ke.useState(!1),[G,ee]=ke.useState([]),X=n[t];ke.useEffect(()=>{Z()},[t]);const Z=()=>{if(!X)return;const ce=X.vietnamese,oe=n.filter(x=>x.word!==X.word).map(x=>x.vietnamese).sort(()=>.5-Math.random()).slice(0,3);for(;oe.length<3&&n.length>3;)oe.push("T khc...");T([ce,...oe].sort(()=>.5-Math.random()))},ae=ce=>{if(F)return;b(ce),B(!0);const oe=ce===X.vietnamese;if(oe){const x=u+1;d(x),x>g&&m(x);const D=10+Math.floor(x/3)*5;l(M=>M+D)}else d(0),ee(x=>[...x,X]);setTimeout(()=>{t<n.length-1?(s(x=>x+1),b(null),B(!1)):e({correct:n.length-G.length-(oe?0:1),total:n.length,score:oe?o+(10+Math.floor((u+1)/3)*5):o,streakMax:oe?Math.max(g,u+1):g,wrongWords:oe?G:[...G,X]})},1200)};return X?N.jsxs("div",{className:"w-full max-w-3xl mx-auto px-4 min-h-[80vh] flex flex-col justify-center",children:[N.jsxs("div",{className:"flex justify-between items-center mb-6",children:[N.jsxs("div",{className:"flex flex-col",children:[N.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider",children:"Cu hi"}),N.jsxs("span",{className:"text-2xl font-black text-gray-700",children:[t+1,N.jsxs("span",{className:"text-gray-300 text-lg",children:["/",n.length]})]})]}),N.jsxs("div",{className:`flex flex-col items-center transition-all duration-300 ${u>2?"scale-110":""}`,children:[N.jsx("span",{className:"text-xs font-bold uppercase text-orange-500 tracking-wider",children:"Combo"}),N.jsxs("div",{className:"flex items-center text-orange-500 font-black text-2xl",children:[u," "]})]}),N.jsxs("div",{className:"flex flex-col items-end",children:[N.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider",children:"im s"}),N.jsx("span",{className:"text-2xl font-black text-primary",children:o})]})]}),N.jsx("div",{className:"w-full h-3 bg-gray-100 rounded-full mb-8 overflow-hidden",children:N.jsx("div",{className:"h-full bg-secondary transition-all duration-300 ease-out",style:{width:`${t/n.length*100}%`}})}),N.jsxs("div",{className:"bg-white rounded-3xl shadow-xl shadow-gray-200/50 border-2 border-gray-100 p-10 text-center mb-8 animate-fadeIn relative overflow-hidden",children:[F&&N.jsx("div",{className:`absolute top-0 left-0 w-full h-1 ${S===X.vietnamese?"bg-green-500":"bg-red-500"}`}),N.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-dark mb-4",children:X.word}),N.jsx("div",{className:"inline-block px-4 py-1 bg-gray-50 rounded-full text-gray-500 font-serif italic text-lg border border-gray-100",children:X.phonetic}),N.jsx("p",{className:"mt-4 text-gray-400 text-sm",children:"Chn ngha ng nht"})]}),N.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map((ce,oe)=>{let x="bg-white border-2 border-gray-100 text-gray-700 hover:border-primary hover:bg-indigo-50 shadow-sm";return F&&(ce===X.vietnamese?x="bg-green-500 border-green-600 text-white shadow-md scale-[1.02]":ce===S?x="bg-red-500 border-red-600 text-white shake-animation":x="bg-gray-50 border-gray-100 text-gray-300 opacity-40"),N.jsx("button",{onClick:()=>ae(ce),disabled:F,className:`
                p-5 rounded-2xl font-bold text-lg transition-all duration-200 relative overflow-hidden
                ${F?"":"hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-sm"}
                ${x}
              `,children:N.jsx("div",{className:"relative z-10",children:ce})},oe)})})]}):N.jsx("div",{children:"Loading..."})},L4=({result:n,onRetry:e,onHome:t})=>{const s=Math.round(n.correct/n.total*100);let o="C gng ln!",l="",u="bg-yellow-500";return s>=100?(o="Tuyt nh!",l="",u="bg-green-500"):s>=80?(o="Lm tt lm!",l="",u="bg-blue-500"):s>=50?(o="Tm n!",l="",u="bg-yellow-500"):(o="Cn hc thm!",l="",u="bg-red-500"),N.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] w-full max-w-2xl mx-auto px-4 animate-fadeIn py-10",children:[N.jsxs("div",{className:"bg-white w-full rounded-3xl shadow-xl overflow-hidden mb-8",children:[N.jsxs("div",{className:`${u} p-8 text-center text-white`,children:[N.jsx("div",{className:"text-7xl mb-4 animate-bounce-sm",children:l}),N.jsx("h2",{className:"text-4xl font-extrabold mb-2",children:o}),N.jsx("p",{className:"opacity-90",children:"Bn  hon thnh bi kim tra!"})]}),N.jsxs("div",{className:"p-8",children:[N.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-8",children:[N.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[N.jsx("span",{className:"block text-gray-400 text-xs font-bold uppercase",children:"im s"}),N.jsx("span",{className:"text-2xl font-black text-primary",children:n.score})]}),N.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[N.jsx("span",{className:"block text-gray-400 text-xs font-bold uppercase",children:"ng"}),N.jsxs("span",{className:"text-2xl font-black text-green-500",children:[n.correct,"/",n.total]})]}),N.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl",children:[N.jsx("span",{className:"block text-gray-400 text-xs font-bold uppercase",children:"Max Combo"}),N.jsxs("span",{className:"text-2xl font-black text-orange-500",children:[n.streakMax," "]})]})]}),N.jsx("div",{className:"w-full bg-gray-100 rounded-full h-4 mb-8 overflow-hidden",children:N.jsx("div",{className:`h-full transition-all duration-1000 ${u}`,style:{width:`${s}%`}})}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.jsx("button",{onClick:e,className:"w-full py-4 bg-primary hover:bg-primary/90 text-white font-bold rounded-xl shadow-lg shadow-primary/30 transition-all transform hover:-translate-y-1",children:" Hc li b ny"}),N.jsx("button",{onClick:t,className:"w-full py-4 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-xl transition-all",children:" Chn ch  mi"})]})]})]}),n.wrongWords.length>0&&N.jsxs("div",{className:"w-full",children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("div",{className:"w-1 h-8 bg-red-500 rounded-full mr-3"}),N.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Cn n tp li (",n.wrongWords.length,")"]})]}),N.jsx("div",{className:"grid gap-3",children:n.wrongWords.map((d,g)=>N.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center group hover:border-red-200 transition-colors",children:[N.jsxs("div",{children:[N.jsxs("div",{className:"flex items-baseline space-x-2",children:[N.jsx("span",{className:"font-bold text-lg text-red-600",children:d.word}),N.jsx("span",{className:"text-xs text-gray-400 font-mono",children:d.phonetic})]}),N.jsx("span",{className:"text-sm text-gray-600 font-medium",children:d.vietnamese}),N.jsxs("p",{className:"text-xs text-gray-400 mt-1 italic",children:['"',d.example,'"']})]}),N.jsx("button",{onClick:()=>{const m=new SpeechSynthesisUtterance(d.word);m.lang="en-US",window.speechSynthesis.speak(m)},className:"w-10 h-10 flex items-center justify-center rounded-full bg-red-50 text-red-500 hover:bg-red-100 transition-colors",children:""})]},g))})]})]})},O4=({topic:n})=>N.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[N.jsxs("div",{className:"relative w-24 h-24 mb-8",children:[N.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-8 border-gray-200 rounded-full"}),N.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-8 border-primary rounded-full border-t-transparent animate-spin"}),N.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-3xl",children:""})]}),N.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-2",children:"ang to bi hc..."}),N.jsxs("p",{className:"text-gray-500 max-w-md text-center",children:["Gemini AI ang tng hp t vng hay nht v ch  ",N.jsxs("span",{className:"text-primary font-bold",children:['"',n,'"']})," cho bn."]})]}),bp=[{id:1,icon:"",title:"Hc T Vng Siu Tc",desc:"H thng Flashcard thng minh gip bn ghi nh 50 t mi ngy mt cch d dng v trc quan.",color:"bg-primary"},{id:2,icon:"",title:"u Tr Gamification",desc:"Ch  kim tra (Quiz) tnh im Combo cc cun, leo bng xp hng thnh tch mi ngy.",color:"bg-secondary"},{id:3,icon:"",title:"AI Tr L C Nhn",desc:"S dng Gemini AI  to bi hc khng gii hn theo bt k ch  no bn yu thch.",color:"bg-rose-500"}],q4=({onLogin:n})=>{const[e,t]=ke.useState(!0),[s,o]=ke.useState(!1),[l,u]=ke.useState(""),[d,g]=ke.useState(0),[m,v]=ke.useState(""),[T,S]=ke.useState(""),[b,F]=ke.useState("");ke.useEffect(()=>{const ee=setInterval(()=>{g(X=>(X+1)%bp.length)},4e3);return()=>clearInterval(ee)},[]);const B=async ee=>{ee.preventDefault(),o(!0),u("");try{let X;e?X=await b4(T,b):X=await R4(T,b,m),n(X)}catch(X){u(X.message)}finally{o(!1)}},G=bp[d];return N.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50 p-4 font-sans",children:N.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl flex w-full max-w-5xl overflow-hidden min-h-[650px] relative",children:[N.jsxs("div",{className:`
          hidden md:flex w-1/2 flex-col justify-between items-center p-12 text-white transition-colors duration-700 ease-in-out
          ${G.color}
        `,children:[N.jsx("div",{className:"flex-1"}),N.jsxs("div",{className:"flex flex-col items-center text-center animate-fadeIn",children:[N.jsx("div",{className:"mb-8 text-9xl drop-shadow-xl transform transition-transform hover:scale-110 duration-500 cursor-default select-none",children:G.icon}),N.jsx("h2",{className:"text-3xl lg:text-4xl font-black mb-6 leading-tight tracking-tight",children:G.title}),N.jsx("p",{className:"text-lg opacity-90 max-w-sm mx-auto leading-relaxed font-medium",children:G.desc})]},G.id),N.jsx("div",{className:"flex-1 flex items-end w-full justify-center pb-2",children:N.jsx("div",{className:"flex gap-3 bg-black/10 px-4 py-2 rounded-full backdrop-blur-sm",children:bp.map((ee,X)=>N.jsx("button",{onClick:()=>g(X),className:`h-2 rounded-full transition-all duration-500 ease-out ${X===d?"w-8 bg-white":"w-2 bg-white/40 hover:bg-white/70"}`,"aria-label":`Go to slide ${X+1}`},ee.id))})})]}),N.jsxs("div",{className:"w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center relative bg-white",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("h1",{className:"text-3xl font-black text-dark mb-2",children:e?"ng Nhp":"To Ti Khon"}),N.jsx("p",{className:"text-gray-400 font-medium",children:e?"Cho mng bn quay tr li!":"Tham gia cng ng hc tp ngay hm nay"})]}),l&&N.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-red-50 text-red-500 text-sm font-bold text-center border border-red-100 animate-bounce-sm",children:[" ",l]}),N.jsxs("form",{onSubmit:B,className:"space-y-5 max-w-sm mx-auto w-full",children:[!e&&N.jsxs("div",{className:"space-y-1",children:[N.jsx("label",{className:"text-sm font-bold text-gray-700 ml-1",children:"Tn hin th"}),N.jsx("input",{type:"text",required:!0,value:m,onChange:ee=>v(ee.target.value),placeholder:"VD: Minh Tr",className:"w-full px-5 py-4 rounded-xl bg-gray-50 border-2 border-gray-100 focus:bg-white focus:border-primary/50 focus:ring-4 focus:ring-primary/10 outline-none transition-all font-medium text-dark"})]}),N.jsxs("div",{className:"space-y-1",children:[N.jsx("label",{className:"text-sm font-bold text-gray-700 ml-1",children:"Email"}),N.jsx("input",{type:"email",required:!0,value:T,onChange:ee=>S(ee.target.value),placeholder:"name@example.com",className:"w-full px-5 py-4 rounded-xl bg-gray-50 border-2 border-gray-100 focus:bg-white focus:border-primary/50 focus:ring-4 focus:ring-primary/10 outline-none transition-all font-medium text-dark"})]}),N.jsxs("div",{className:"space-y-1",children:[N.jsx("label",{className:"text-sm font-bold text-gray-700 ml-1",children:"Mt khu"}),N.jsx("input",{type:"password",required:!0,value:b,onChange:ee=>F(ee.target.value),placeholder:"",className:"w-full px-5 py-4 rounded-xl bg-gray-50 border-2 border-gray-100 focus:bg-white focus:border-primary/50 focus:ring-4 focus:ring-primary/10 outline-none transition-all font-medium text-dark"})]}),e&&N.jsx("div",{className:"flex justify-end",children:N.jsx("button",{type:"button",className:"text-sm text-primary font-bold hover:text-primary/80 transition-colors",children:"Qun mt khu?"})}),N.jsx("button",{type:"submit",disabled:s,className:`
                w-full py-4 rounded-xl font-bold text-white text-lg shadow-xl shadow-primary/20 hover:shadow-2xl transition-all transform hover:-translate-y-1 active:translate-y-0
                ${e?"bg-primary hover:bg-indigo-600":"bg-secondary hover:bg-teal-600"}
                ${s?"opacity-70 cursor-not-allowed":""}
              `,children:s?N.jsxs("span",{className:"flex items-center justify-center gap-2",children:[N.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[N.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),N.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"ang x l..."]}):e?"ng Nhp":"ng K Ti Khon"})]}),N.jsxs("div",{className:"relative my-8 max-w-sm mx-auto w-full",children:[N.jsx("div",{className:"absolute inset-0 flex items-center",children:N.jsx("div",{className:"w-full border-t border-gray-100"})}),N.jsx("div",{className:"relative flex justify-center text-sm",children:N.jsx("span",{className:"px-4 bg-white text-gray-400 font-medium",children:"Hoc ng nhp vi"})})]}),N.jsxs("div",{className:"flex gap-4 justify-center",children:[N.jsx("button",{className:"p-3 rounded-full bg-white hover:bg-gray-50 transition-all border-2 border-gray-100 hover:border-gray-200 shadow-sm hover:scale-105",children:N.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",className:"w-6 h-6",alt:"Google"})}),N.jsx("button",{className:"p-3 rounded-full bg-white hover:bg-gray-50 transition-all border-2 border-gray-100 hover:border-gray-200 shadow-sm hover:scale-105",children:N.jsx("img",{src:"https://www.svgrepo.com/show/475647/facebook-color.svg",className:"w-6 h-6",alt:"Facebook"})}),N.jsx("button",{className:"p-3 rounded-full bg-white hover:bg-gray-50 transition-all border-2 border-gray-100 hover:border-gray-200 shadow-sm hover:scale-105",children:N.jsx("img",{src:"https://www.svgrepo.com/show/448234/linkedin.svg",className:"w-6 h-6",alt:"LinkedIn"})})]}),N.jsx("div",{className:"mt-8 text-center",children:N.jsxs("p",{className:"text-gray-500 font-medium",children:[e?"Cha c ti khon?":" c ti khon?",N.jsx("button",{onClick:()=>{t(!e),v(""),S(""),F(""),u("")},className:"ml-2 text-primary font-bold hover:underline transition-all",children:e?"ng k ngay":"ng nhp"})]})})]})]})})},B4=({user:n,onBack:e,onResume:t,onAddWords:s})=>{const[o,l]=ke.useState(!0),[u,d]=ke.useState(null),[g,m]=ke.useState("progress");if(ke.useEffect(()=>{(async()=>{if(n.uid){const G=await D4(n.uid);d(G)}l(!1)})()},[n.uid]),o)return N.jsx("div",{className:"min-h-[80vh] flex items-center justify-center text-gray-400",children:"ang ti h s..."});const v=u!=null&&u.learningProgress?Object.values(u.learningProgress):[];v.sort((B,G)=>new Date(G.lastAccessed).getTime()-new Date(B.lastAccessed).getTime());const T=(u==null?void 0:u.history)||[];T.sort((B,G)=>new Date(G.date||0).getTime()-new Date(B.date||0).getTime());const S=T.reduce((B,G)=>B+G.score,0),b=T.length,F=v.reduce((B,G)=>B+(G.wordsLearned||0),0);return N.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 py-8 animate-fadeIn min-h-screen",children:[N.jsxs("button",{onClick:e,className:"mb-6 flex items-center text-gray-500 hover:text-primary font-bold transition-colors",children:[N.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Quay v Trang ch"]}),N.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 mb-8 border border-gray-100 relative overflow-hidden",children:[N.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full -translate-y-1/2 translate-x-1/4"}),N.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center md:items-start gap-8",children:[N.jsx("img",{src:n.avatar,alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-white shadow-lg bg-gray-100"}),N.jsxs("div",{className:"text-center md:text-left flex-1",children:[N.jsx("h1",{className:"text-3xl font-black text-dark mb-2",children:n.name}),N.jsx("p",{className:"text-gray-500 font-medium mb-4",children:n.email}),N.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-4",children:N.jsx("span",{className:"px-4 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-bold border border-yellow-200",children:"Gold Member"})})]}),N.jsxs("div",{className:"grid grid-cols-3 gap-4 md:gap-8 w-full md:w-auto mt-4 md:mt-0",children:[N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"text-2xl font-black text-primary",children:S}),N.jsx("div",{className:"text-xs text-gray-400 uppercase font-bold",children:"im"})]}),N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"text-2xl font-black text-secondary",children:b}),N.jsx("div",{className:"text-xs text-gray-400 uppercase font-bold",children:"Bi Test"})]}),N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"text-2xl font-black text-orange-500",children:F}),N.jsx("div",{className:"text-xs text-gray-400 uppercase font-bold",children:"T  thuc"})]})]})]})]}),N.jsxs("div",{className:"flex space-x-2 mb-6 border-b border-gray-200 pb-1",children:[N.jsxs("button",{onClick:()=>m("progress"),className:`px-6 py-3 rounded-t-xl font-bold transition-all ${g==="progress"?"bg-white text-primary border-b-2 border-primary shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:[" Tin trnh hc (",v.length,")"]}),N.jsxs("button",{onClick:()=>m("history"),className:`px-6 py-3 rounded-t-xl font-bold transition-all ${g==="history"?"bg-white text-primary border-b-2 border-primary shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:[" Lch s kim tra (",T.length,")"]})]}),N.jsxs("div",{className:"space-y-4",children:[g==="progress"&&(v.length>0?N.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map((B,G)=>{const ee=B.totalWords>0?Math.round(B.wordsLearned/B.totalWords*100):0;return N.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[N.jsxs("div",{className:"flex justify-between items-start mb-2",children:[N.jsxs("div",{children:[N.jsx("h3",{className:"font-bold text-lg text-gray-800",children:B.topicName}),N.jsxs("p",{className:"text-xs text-gray-400",children:["Truy cp: ",new Date(B.lastAccessed).toLocaleDateString()]})]}),B.isCustom&&N.jsx("span",{className:"bg-indigo-50 text-indigo-500 text-[10px] font-bold px-2 py-1 rounded-full border border-indigo-100",children:"CUSTOM"})]}),N.jsxs("div",{className:"mb-4",children:[N.jsxs("div",{className:"flex justify-between text-sm font-bold text-gray-500 mb-1",children:[N.jsx("span",{children:" thuc"}),N.jsxs("span",{children:[B.wordsLearned," / ",B.totalWords," t"]})]}),N.jsx("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:N.jsx("div",{className:`h-full ${ee>=100?"bg-green-500":"bg-primary"}`,style:{width:`${ee}%`}})})]}),N.jsxs("div",{className:"flex gap-2",children:[N.jsx("button",{onClick:()=>t(B.topicId,B.topicName,B.isCustom),className:"flex-1 py-2 bg-primary hover:bg-primary/90 text-white font-bold rounded-lg text-sm transition-colors",children:"Hc tip"}),B.isCustom&&N.jsx("button",{onClick:()=>s(B.topicId,B.topicName),className:"px-4 py-2 bg-gray-50 hover:bg-gray-100 text-gray-600 font-bold rounded-lg text-sm border border-gray-200 transition-colors",title:"Thm t mi vo ch  ny",children:"+ Thm t"})]})]},G)})}):N.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-gray-300",children:[N.jsx("span",{className:"text-4xl block mb-2",children:""}),N.jsx("p",{className:"text-gray-500",children:"Bn cha hc ch  no. Hy bt u ngay!"})]})),g==="history"&&(T.length>0?N.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:N.jsxs("table",{className:"w-full",children:[N.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:N.jsxs("tr",{children:[N.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-400 uppercase",children:"Ch "}),N.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-400 uppercase",children:"im s"}),N.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-400 uppercase",children:"Kt qu"}),N.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-400 uppercase",children:"Ngy thi"})]})}),N.jsx("tbody",{className:"divide-y divide-gray-100",children:T.map((B,G)=>N.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[N.jsx("td",{className:"px-6 py-4 font-bold text-gray-700",children:B.topicName||"Unknown Topic"}),N.jsx("td",{className:"px-6 py-4 text-center font-bold text-primary",children:B.score}),N.jsx("td",{className:"px-6 py-4 text-center",children:N.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${B.correct/B.total>=.8?"bg-green-100 text-green-700":B.correct/B.total>=.5?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[B.correct,"/",B.total]})}),N.jsx("td",{className:"px-6 py-4 text-right text-sm text-gray-500",children:new Date(B.date||"").toLocaleDateString()})]},G))})]})}):N.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-gray-300",children:[N.jsx("span",{className:"text-4xl block mb-2",children:""}),N.jsx("p",{className:"text-gray-500",children:"Cha c lch s lm bi kim tra."})]}))]})]})},F4=({topicName:n,cards:e,onStartFlashcard:t,onStartQuiz:s,onBack:o,onGenerateMore:l})=>N.jsxs("div",{className:"w-full max-w-6xl mx-auto px-4 py-8 animate-fadeIn min-h-screen",children:[N.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-8 bg-white p-6 rounded-3xl shadow-sm border border-gray-100",children:[N.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[N.jsx("button",{onClick:o,className:"mr-4 p-2 hover:bg-gray-100 rounded-full transition-colors",children:N.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),N.jsxs("div",{children:[N.jsx("h1",{className:"text-3xl font-black text-dark",children:n}),N.jsxs("p",{className:"text-gray-500 font-medium",children:[e.length," t vng"]})]})]}),N.jsxs("div",{className:"flex gap-3",children:[N.jsxs("button",{onClick:t,className:"px-6 py-3 bg-primary hover:bg-primary/90 text-white font-bold rounded-xl shadow-lg shadow-primary/30 transition-transform transform hover:-translate-y-1 flex items-center",children:[N.jsx("span",{className:"mr-2",children:""})," Bt u hc"]}),N.jsxs("button",{onClick:s,className:"px-6 py-3 bg-secondary hover:bg-secondary/90 text-white font-bold rounded-xl shadow-lg shadow-secondary/30 transition-transform transform hover:-translate-y-1 flex items-center",children:[N.jsx("span",{className:"mr-2",children:""})," Lm bi Test"]})]})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10",children:[e.map((u,d)=>N.jsxs("div",{className:"bg-white p-5 rounded-2xl border-2 border-gray-50 hover:border-indigo-100 shadow-sm hover:shadow-md transition-all group",children:[N.jsxs("div",{className:"flex justify-between items-start mb-2",children:[N.jsx("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-primary transition-colors",children:u.word}),N.jsx("span",{className:"text-[10px] font-bold uppercase bg-gray-100 text-gray-500 px-2 py-1 rounded-full",children:u.type})]}),N.jsxs("div",{className:"flex items-center text-indigo-500 text-sm font-serif italic mb-2",children:[N.jsx("span",{children:u.phonetic}),N.jsx("button",{onClick:()=>{const g=new SpeechSynthesisUtterance(u.word);g.lang="en-US",window.speechSynthesis.speak(g)},className:"ml-2 w-6 h-6 rounded-full bg-indigo-50 flex items-center justify-center hover:bg-indigo-100",children:""})]}),N.jsx("p",{className:"text-gray-700 font-medium mb-2 border-t border-gray-100 pt-2",children:u.vietnamese}),N.jsxs("p",{className:"text-xs text-gray-400 italic",children:['"',u.example,'"']})]},d)),N.jsxs("button",{onClick:l,className:"flex flex-col items-center justify-center p-5 rounded-2xl border-2 border-dashed border-primary/30 bg-primary/5 hover:bg-primary/10 hover:border-primary transition-all group min-h-[200px]",children:[N.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:N.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),N.jsx("span",{className:"text-lg font-bold text-primary",children:"Gen thm t vng"}),N.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"AI s to thm t mi cho ch  ny"})]})]})]}),H4=()=>{const[n,e]=ke.useState(null),[t,s]=ke.useState(ut.HOME),[o,l]=ke.useState(""),[u,d]=ke.useState(""),[g,m]=ke.useState([]),[v,T]=ke.useState(null),[S,b]=ke.useState(!1),[F,B]=ke.useState(!0);ke.useEffect(()=>{const k=Kk(Zr,L=>{e(L?ug(L):null),B(!1)});return()=>k()},[]);const G=k=>{e(k)},ee=async()=>{await N4(),D()},X=k=>k.replace(/\s+/g,"_").toLowerCase(),Z=async(k,L,P)=>{l(L),d(k),b(P==="test"),s(ut.LOADING);let Pe=[];const tt=k==="custom"||!Ql[k],W=X(L),le=tt?W:k;if(n!=null&&n.uid){const De=await LS(n.uid,W);De&&(console.log(`[App] Found extended/custom version for ${L}`),Pe=De.words)}if(Pe.length===0){if(!tt&&Ql[k])console.log(`[App] Loading static default for ${L}`),Pe=(await sD(k,L,20)).words;else if(n!=null&&n.uid){console.log("Generating new custom topic:",L),Pe=await Op(L,15);const De={id:W,name:L,ownerId:n.uid,words:Pe,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await OS(n.uid,De)}}let _e=[];P==="test"?_e=[...Pe].sort(()=>.5-Math.random()).slice(0,20):_e=Pe,m(_e),n&&n.uid&&Rp(n.uid,{topicId:le,topicName:L,progress:0,wordsLearned:0,totalWords:Pe.length,lastAccessed:new Date().toISOString(),isCustom:!0}),s(P==="test"?ut.QUIZ:ut.TOPIC_DETAIL)},ae=async()=>{if(!(n!=null&&n.uid))return;s(ut.LOADING);const k=X(o),L=g.map(Pe=>Pe.word);console.log(`[App] Generating more words for ${o}, excluding ${L.length} words.`);const P=await Op(o,10,L);if(P.length>0){if(await LS(n.uid,k))await x4(n.uid,k,P);else{const W=[...g,...P],le={id:k,name:o,ownerId:n.uid,words:W,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await OS(n.uid,le)}const tt=[...g,...P];m(tt),await Rp(n.uid,{topicId:k,topicName:o,progress:0,wordsLearned:0,totalWords:tt.length,lastAccessed:new Date().toISOString(),isCustom:!0}),s(ut.TOPIC_DETAIL)}else s(ut.TOPIC_DETAIL)},ce=async(k,L)=>{await Z(k,L,"learn")},oe=k=>{if(n&&n.uid&&k>0){const P=u==="custom"||!Ql[u]?X(o):u;Rp(n.uid,{topicId:P,topicName:o,progress:50,wordsLearned:k,totalWords:g.length,lastAccessed:new Date().toISOString(),isCustom:!0})}if(k===0&&g.length>0){D();return}s(ut.QUIZ)},x=async k=>{T(k),s(ut.RESULT),n&&Zr.currentUser&&await M4(Zr.currentUser.uid,k,o)},D=()=>{s(ut.HOME),m([]),T(null),b(!1)},M=()=>{s(ut.PROFILE)},U=()=>{s(S?ut.QUIZ:ut.FLASHCARD),T(null)};return F?N.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400",children:"ang ti d liu..."}):n?N.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans selection:bg-primary selection:text-white",children:[N.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50",children:N.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:N.jsxs("div",{className:"flex justify-between h-16",children:[N.jsxs("div",{className:"flex items-center cursor-pointer group",onClick:D,children:[N.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center mr-3 group-hover:bg-primary/20 transition-colors",children:N.jsx("span",{className:"text-2xl",children:""})}),N.jsxs("span",{className:"text-xl font-black text-dark tracking-tight",children:["VocaMaster",N.jsx("span",{className:"text-primary",children:".AI"})]})]}),N.jsxs("div",{className:"flex items-center space-x-4",children:[t!==ut.HOME&&t!==ut.PROFILE&&N.jsxs("span",{className:`hidden md:inline-block px-4 py-1.5 rounded-full text-sm font-bold shadow-sm border ${S?"bg-red-50 text-red-600 border-red-100":"bg-blue-50 text-blue-600 border-blue-100"}`,children:[S?" Testing: ":" Learning: "," ",o]}),N.jsxs("div",{className:"flex items-center pl-4 border-l border-gray-200",children:[N.jsxs("div",{className:"flex items-center mr-4 cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-colors",onClick:M,title:"Xem h s c nhn",children:[N.jsx("img",{src:n.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full bg-gray-100 mr-2 border border-gray-200"}),N.jsx("span",{className:"hidden md:block font-bold text-gray-700 text-sm truncate max-w-[100px]",children:n.name})]}),N.jsx("button",{onClick:ee,className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"ng xut",children:N.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})]})})}),N.jsxs("main",{className:"pt-8 pb-12",children:[t===ut.HOME&&N.jsx(k4,{topics:P4,onSelectTopic:(k,L,P)=>Z(k,L,P),onCustomTopic:k=>Z("custom",k,"learn")}),t===ut.PROFILE&&n&&N.jsx(B4,{user:n,onBack:D,onResume:(k,L,P)=>Z(P?"custom":k,L,"learn"),onAddWords:ce}),t===ut.LOADING&&N.jsx(O4,{topic:o}),t===ut.TOPIC_DETAIL&&g.length>0&&N.jsx(F4,{topicName:o,cards:g,onStartFlashcard:()=>s(ut.FLASHCARD),onStartQuiz:()=>s(ut.QUIZ),onBack:D,onGenerateMore:ae}),t===ut.FLASHCARD&&g.length>0&&N.jsx(V4,{cards:g,onComplete:oe,onExit:oe}),t===ut.QUIZ&&g.length>0&&N.jsx(U4,{cards:g,onFinish:x}),t===ut.RESULT&&v&&N.jsx(L4,{result:v,onRetry:U,onHome:D})]}),N.jsx("footer",{className:"fixed bottom-0 w-full bg-white/80 backdrop-blur-sm border-t border-gray-200 py-3 text-center text-xs text-gray-400 z-40",children:"Powered by Gemini AI  5000+ Words Database"})]}):N.jsx(q4,{onLogin:G})},BC=document.getElementById("root");if(!BC)throw new Error("Could not find root element to mount to");const G4=bw.createRoot(BC);G4.render(N.jsx(Tw.StrictMode,{children:N.jsx(H4,{})}));
